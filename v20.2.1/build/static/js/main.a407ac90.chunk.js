(this["webpackJsonplab.js.builder"]=this["webpackJsonplab.js.builder"]||[]).push([[0],{115:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return m}));var n=a(0),r=a.n(n),l=a(404),o=a(733),c=a(20),s=a.n(c);const i=({id:e,activeId:t,setId:a,children:n})=>r.a.createElement(l.a,null,r.a.createElement(o.a,{className:s()({active:t===e}),onClick:()=>a(e)},n)),m=({onClick:e})=>r.a.createElement(l.a,{className:"ml-auto",style:{padding:"0.25em 0"}},r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:e},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")))},158:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return s}));var n=a(28),r=a(393),l=a.n(r);const o=e=>{const t=Object.entries(e).map(([e,{files:t}])=>t||[]).filter(e=>e.length>0);return Object(n.flatMap)(t,e=>e.map(e=>e.poolPath))},c=(e,t=[])=>{const a=t.map(e=>{if(!(e.poolPath&&e.data&&e.data.content)&&!(e.component&&e.localPath&&e.poolPath)&&!(e.component&&e.localPath&&e.data&&e.data.content))throw console.log("Incomplete data for file",e),Error("Incomplete data for file",e);let t=void 0,a=void 0;if(e.data&&e.data.content){const n=l()().update(e.data.content).digest("hex"),r=(e.localPath||e.poolPath).split(".").pop();t="embedded/".concat(n,".").concat(r),a={content:e.data.content,source:e.data.source||"embedded",checkSum:n}}return{poolPath:e.poolPath||t,localPath:e.localPath,component:e.component,data:a}});return e.dispatch({type:"ADD_FILES",files:a}),a},s=(e,t,a)=>{const n=e.getState();if(n.components[t].files){const e=n.components[t].files.filter(e=>e.localPath===a).pop();if(e)return{localPath:a,poolPath:e.poolPath,file:n.files.files[e.poolPath]}}}},160:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(267),o=a.n(l);class c extends n.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this),this.handleDrop=this.handleDrop.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.inputField=r.a.createRef()}handleClick(){this.inputField.current.click()}handleInputChange(){const e=Array.from(this.inputField.current.files).filter(e=>this.checkFile(e));this.handleFiles(e)}handleDrop(e){if(e.stopPropagation(),e.preventDefault(),e.dataTransfer.items){const t=Array.from(e.dataTransfer.items).filter(e=>"file"===e.kind).map(e=>e.getAsFile()).filter(e=>this.checkFile(e));this.handleFiles(t),e.dataTransfer.items.clear()}}handleDragOver(e){e.stopPropagation(),e.preventDefault()}checkFile(e){return e.size>this.props.maxSize&&alert("This file is too large to be opened. Please contact support for assistance!"),e.size<=this.props.maxSize&&e.size>=this.props.minSize&&o()({name:e.name,type:e.type},this.props.accept)}handleFiles(e){Promise.all(e.map(e=>new Promise(t=>{const a=new FileReader;a.onload=a=>t([a.target.result,e]),"text"===this.props.decodeAs?a.readAsText(e):"dataURL"===this.props.decodeAs&&a.readAsDataURL(e)}))).then(e=>{this.props.onUpload(e)})}render(){const e=this.props.tag||"div";return(r.a.createElement(r.a.Fragment,null,r.a.createElement(e,{className:this.props.className,onClick:this.handleClick,onDrop:this.handleDrop,onDragOver:this.handleDragOver},this.props.children),r.a.createElement("input",{type:"file",accept:this.props.accept,multiple:this.props.multiple,style:{display:"none"},ref:this.inputField,onChange:this.handleInputChange,onClick:e=>e.target.value=null})))}}c.defaultProps={minSize:0,maxSize:2.5*Math.pow(1024,2),accept:"",multiple:!0,decodeAs:"text"},t.a=c},167:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return l}));const n=(e,t)=>{const a=t[e];if(a.children&&Array.isArray(a.children)){const e=a.children.map(e=>n(e,t));return a.children.concat(...e)}return[]},r=(e,t)=>{const a=Object.entries(t).filter(([t,a])=>a.children&&Array.isArray(a.children)&&a.children.includes(e)).map(([e,t])=>e);return a.concat(...a.map(e=>r(e,t)))},l=(e,t="root",a=0)=>{const n=[];return e[t].children&&e[t].children.forEach(t=>n.push([t,a,e[t]],...l(e,t,a+1))),n}},183:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(394),o=a.n(l),c=a(20),s=a.n(c);a(548);t.a=({isOpen:e,onRequestClose:t,modalProps:a={},children:n})=>r.a.createElement(o.a,{appElement:document.getElementById("root"),isOpen:e,onRequestClose:t,className:s()({"modal-dialog":!0,"modal-lg":"lg"===a.size,"modal-xl":"xl"===a.size}),overlayClassName:"modal fade show",contentLabel:"App Modal",style:{overlay:{display:"block",backgroundColor:"rgba(0, 0, 0, 0.5)",opacity:"1",overflowX:"hidden",overflowY:"auto"}}},n)},211:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return o}));var n=a(55),r=a(52);const l=(e="")=>{const t=e.split("/"),a=Object(n.a)(t,1)[0];return["image","audio","video"].includes(a)?"file-"+a:["text/html","text/css","application/javascript","application-json"].includes(e)?"file-code":"text/plain"===e?"file-alt":"file"},o=e=>l(Object(r.c)(e))},265:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));const n="(\\d+(\\.\\d+)?)|(\\$\\{.*\\})",r="(\\d+)|(\\$\\{.*\\})"},266:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var n=a(39),r=a.n(n),l=a(56),o=a(0),c=a.n(o),s=a(38),i=a(765),m=a(766),d=a(158),p=a(183),u=a(30),h=a(115),b=a(160),E=({handleUpload:e,accept:t=""})=>c.a.createElement(b.a,{accept:t,decodeAs:"dataURL",onUpload:e},c.a.createElement("div",{className:"btn btn-outline-secondary btn-block text-center p-5"},c.a.createElement(u.a,{icon:"file-upload",className:"d-block text-muted p-3",style:{fontSize:"3.5rem"}}),c.a.createElement("small",{className:"text-muted"},"Please ",c.a.createElement("strong",null,"drop a file")," here to add,",c.a.createElement("br",null),"or ",c.a.createElement("strong",null,"click to choose")," one from your computer"))),f=a(26),g=a(55),y=a(784),v=a(758),w=a(759),x=a(28),O=a(267),j=a.n(O),k=a(167),N=a(52),C=a(211);var T=({accept:e,handleImport:t,initialComponent:a})=>{var n,r;const l=Object(o.useState)(a),i=Object(g.a)(l,2),m=i[0],d=i[1],p=Object(s.d)().getState(),h=p.components,b=p.files.files,E=null!==(n=null===(r=h[m].files)||void 0===r?void 0:r.map(e=>Object(f.a)({type:b[e.poolPath]?Object(N.c)(b[e.poolPath].content):""},e)))&&void 0!==n?n:[];return c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a,{type:"select",id:"component",bsSize:"lg",className:"mb-2 font-weight-bold",defaultValue:m,onChange:e=>d(e.target.value)},Object(k.b)(h).map(([e,t,a],n)=>c.a.createElement("option",{value:e,key:n},t>0?Object(x.repeat)("\u2003",t-1)+"\u2219 ":"",a.title))),c.a.createElement(v.a,null,E.map((a,n)=>c.a.createElement(w.a,{action:!0,key:n,tag:"a",href:"#",className:"d-flex justify-content-between align-items-center",disabled:!j()({type:a.type,name:a.poolPath},e),onClick:()=>t(m,a.localPath)},c.a.createElement("span",{style:{fontFamily:"Fira Mono",overflow:"hidden",textOverflow:"ellipsis"}},a.localPath),c.a.createElement(u.a,{icon:Object(C.b)(a.type),fixedWidth:!0,className:"ml-2"})))))};class S extends o.Component{constructor(e){super(e),this.state={active:!1,activeTab:this.props.tab},this.promiseHandlers={},this.handleUpload=this.handleUpload.bind(this),this.handleImport=this.handleImport.bind(this),this.select=this.select.bind(this),this.toggle=this.toggle.bind(this),this.setTab=this.setTab.bind(this)}toggle(){this.setState(e=>(e.active&&this.promiseHandlers.reject&&this.promiseHandlers.reject("FileSelector hidden"),{active:!e.active}))}setTab(e){this.setState({activeTab:e})}handleUpload(e){const t=Object(d.a)(this.context.store,e.map(([e,t])=>({localPath:t.name,component:this.props.component,data:{content:e}})));return this.promiseHandlers.resolve&&this.promiseHandlers.resolve(t),t}handleImport(e,t){const a=Object(d.c)(this.context.store,e,t).poolPath,n=[{localPath:t,poolPath:a}];return this.props.component&&this.props.addToComponent&&this.props.component!==e&&Object(d.a)(this.context.store,[{component:this.props.component,localPath:n[0].localPath,poolPath:a}]),this.promiseHandlers.resolve&&this.promiseHandlers.resolve(n),n}select(){var e=this;return Object(l.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.toggle(),t.abrupt("return",new Promise((t,a)=>{e.promiseHandlers={resolve:a=>(e.setState({active:!1}),t(a)),reject:a}}));case 2:case"end":return t.stop()}}),t)})))()}renderTab(){switch(this.state.activeTab){case"pool":return c.a.createElement(T,{initialComponent:this.props.component,accept:this.props.accept,handleImport:this.handleImport});default:return c.a.createElement(E,{accept:this.props.accept,handleUpload:this.handleUpload})}}render(){return c.a.createElement(p.a,{isOpen:this.state.active},c.a.createElement("div",{className:"modal-content"},c.a.createElement(i.a,{tabs:!0},c.a.createElement(h.b,{id:"new",activeId:this.state.activeTab,setId:this.setTab},c.a.createElement(u.a,{icon:"plus",weight:"s"})),c.a.createElement(h.b,{id:"pool",activeId:this.state.activeTab,setId:this.setTab},c.a.createElement(u.a,{icon:"folder"})),c.a.createElement(h.a,{onClick:this.toggle})),c.a.createElement(m.a,null,this.renderTab())))}}S.contextType=s.b,S.defaultProps={addToComponent:!0,accept:"",tab:"new"}},30:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(20),o=a.n(l);a.e(13).then(a.t.bind(null,738,7)),a.e(12).then(a.t.bind(null,739,7)),a.e(10).then(a.t.bind(null,740,7)),a.e(11).then(a.t.bind(null,741,7));const c="".concat("free"),s={"alarm-clock":"clock","arrows-v":"arrows-alt-v","arrows-h":"arrows-alt-h","bullseye-pointer":"hand-pointer","comment-alt-minus":"comment-alt","comment-alt-lines":"comment-alt","ellipsis-h-alt":"ellipsis-h",expand:"square","file-exclamation":"exclamation-circle","flask-potion":"flask","heart-circle":"heart","long-arrow-down":"long-arrow-alt-down","long-arrow-right":"long-arrow-alt-right",repeat:"redo","spinner-third":"spinner",tachometer:"tachometer-alt","tachometer-average":"tachometer-alt",volume:"volume-up"},i=({icon:e,fixedWidth:t,weight:a,fallback:n,fallbackWeight:l,id:i,className:m,title:d,style:p})=>r.a.createElement("i",Object.assign({className:o()("fa".concat("pro"===c?a:l," "),"fa-".concat("pro"===c?e:s[e]||n||e),t?"fa-fw":null,m),"aria-hidden":!0},{id:i,title:d,style:p}));i.defaultProps={weight:"r",fallbackWeight:"s"},t.a=i},328:function(e,t,a){"use strict";var n=a(39),r=a.n(n),l=a(56),o=a(55),c=a(0),s=a.n(c),i=a(24),m=a(736),d=a(405),p=a(325),u=a(319),h=a(266),b=a(30),E=a(35);t.a=({name:e,component:t,icon:a,placeholder:n="source",accept:f="*/*",tab:g})=>{const y=Object(c.createRef)(),v=Object(i.h)({name:e}),w=Object(o.a)(v,3)[2];return s.a.createElement(s.a.Fragment,null,s.a.createElement(h.a,{accept:f,component:t,tab:g,ref:y}),s.a.createElement(m.a,null,void 0!==a?s.a.createElement(d.a,{addonType:"prepend"},s.a.createElement(p.a,null,s.a.createElement(b.a,{fixedWidth:!0,icon:a}))):null,s.a.createElement(i.b,{name:e,placeholder:n,component:E.c,className:"text-monospace"}),s.a.createElement(d.a,{addonType:"append"},s.a.createElement(u.a,{outline:!0,color:"secondary",style:{minWidth:"3rem"},onClick:Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.current.select();case 3:t=e.sent,w.setValue('${ this.files["'.concat(t[0].localPath,'"] }')),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error while selecting image",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))},s.a.createElement(b.a,{fixedWidth:!0,icon:"folder"})))))}},35:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return p}));var n=a(119),r=a(0),l=a.n(r),o=a(24),c=a(764),s=a(784);const i=(e,t,a,n=!0)=>{((e,t)=>{const a=Object(r.useRef)(!0);Object(r.useEffect)(a.current?()=>{a.current=!1}:e,t)})(()=>{let r=void 0;return n&&(r=setTimeout(()=>e(...a),t)),()=>clearTimeout(r)},a)},m=Object(o.f)(({formik:{values:e,dirty:t},interval:a=300,onSave:n})=>(i(n,a,[e],t),null)),d=e=>{let t=e.field,a=Object(n.a)(e,["field"]);return(l.a.createElement(c.a,Object.assign({},t,a)))},p=e=>{let t=e.field,a=Object(n.a)(e,["field"]);return(l.a.createElement(s.a,Object.assign({},t,a)))}},402:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAJOgAACToB8GSSSgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAZMSURBVGiB1ZrrbxRlFMZ/Z/bSVooKxAuRaFSu6e5SUqS10NaimIgfFDEhqBg1UVQ0MQT/ANTEDxASNUYJURMxaOWDxmgVFAu7RQoUKb2EIiCaeAEJLVLaWnZ3jh92tuz2Ojc1Pl92Z/ac5zln57wz73nfEXyANpRcT8hYjEo5qrOBWxCmAMWWyUWUc8CPiHQCTaTSDVLbcdqrtrgOev/sKVwKPgyyCpjvjoSDoFspSG2T8s5zbigcJ6ANsWkEzXUgTwJXuBEdAb0oWwgaG6XyyK9OHG0noM1lIfqTz4K+wuXS8Bt9IBvo6XtVlp4YsONgKwFtjM1CtQ6Y6yk825AWkBVSdeSH8SyN8Qw0HluOajP/WvAAWgpmsyYiy8azHDMBjUcfQ/Qj/rmSGQsTQbZrY+TpsYxGTUAbo6sR3gOCvodmHwFU3tJ45PnRDEYcAxqPLUe0Dgi4EO0C2lB+QrAGohaC3ATEgEkuONMoD0p126dDfxiWgDVgm3FaNsKfoE8wST+Xko5LI5loR0mYLuM+4B1goiN+6MEMlElNy/F82eECB3A3YHdJVdtddgw1Ed0N1DhWEA5TGC6X+YeS2VP5Y6DbWIv7u82d2hh7YTwjy6balYIyj75knsbgFdDv5t5A2jwGTHBFnkGPVLVdOWYMiegFnJdPLi6iqZlSffR3yL0C6fSLeAv+30IxElyXPTDAmphl5jb/F6zOxJy9AgPBh/BnYtaf/aKJ6CSNR+7VjpLwaDYeMIFkaCVkExB51AdSUGnIOapD5HO6jJfGsPGgpasADI3PmQqU+UIq1Od878sIWZ9ZGHzpixZymzZFrgtiBGtR941NDkxC5o7BI6N4JeneGFWtB/KtAvVIysTGRHIcCCnuMFAp90iUxUGpaD8zyF65r1+qWveTiER1T2yxaiZgqT58Fjjoi6IpFYbVw3qH5pRP9lRj9DlEWjB0F3sjH+f84k8ZCbMMhOm+kBk6LAGUZ8g+LFWWa1PkOkv4C180lRkGcLUPVKdZ2H5o2FnhVM5RN11/nQewbH/zrCp6tYE/zUq9CDpcILUG+AQhjpjLs32uZbtjmL1jyER/mhWV4eUDyMKjPwMPjOoj+rhX6SBwEZjsgSPJQOibsQy0oaSYAHMxjKsQPSYL208S7ttJsugSMPRJ7QDaEwS68ZSANMqSQ38CaCK6E+QoaAuKIswGWQS6AAihgMoRoFQqTlzQRGwvaK37+OV8EOUkwq3uEzC/AGvBC70LdEkmr0GVoQ4xbYhNk9rWXxCzHhX3CQjHDWut0j1M6/4f1KXYW2cSAnoPAGmPt1PlmAE0eaA4JTXtR62wltr2smwt35Ou1Q3dZxAyv2WE62wLmvkHtaMkjLLYgecSrZ9eYH3/ypU2KEH2GFLRfgal2RWFYZVPt9TgrE2cwMSiKsDLU3m/VLSfsWaEutUFQT+F4T0AmGK/fLLIlpxRvBuGTLntEWyF7JS2ILUN6HXkrzTI/EN9ecE488+Mg8p9/Si7HXr3Er5UB1YCUt55DmWLMw45AqCNJTcCMx0GADDL8gWh1aH229kNkctNRdDYiJOrIGamhzbNJJByFgAAKZJYK3jipB/vIZXemD0YTMDaGXnZPo/cA5BZn5F1gOkgCBPVtZf3yPRu+666PndvLb+tKwpvQjhsk2mmJqJPAUhV62uYlAKbQX4e1UP4CdiMSalUt78B1io42G2qvqeo4PV8yiHQxNyZYDZj77b4F+gaqWp/N4+jafqVpK6Yimpmqi5yEQZ+k0XHevK1Ik+AvAkU2tC6QMAsk8qOE2MmYBEvA9mO/eX1XQibKAx/nbvwOiJ3c1mIvoG7MWStg4dfGpEHZFHrZ0N/GHXuYpXHZpsCWfQDzUAnmX2Cbuv8JGAy6ByQMqDIAaeirJbqthHvkmNOvjJbTGzhv9ulSSOskUVto/6R484eNR69H+F9vK0ou8EFRFaNVDa5sLfNuqd0BoF0Hco8f2IbF98TMFcMHbAjwdbqmNS0HCc5ZQHIC0DPuA7u0Qeynsnm7XaCBzevGsTnTMUIvojyFP7tJ/QCm0mZG5y+AOLtZY9kaCXKI8ACF1wK7Ac+IGB+KJUdXW7i8GNRF90buxY1azGlItPIczNwDbmv28BZ4BRKJ4Y2IUaDLGz9w6v23wYTMruD+wugAAAAAElFTkSuQmCC"},406:function(e,t,a){e.exports=a(715)},52:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return s})),a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return m}));var n=a(55);const r=(e,t="")=>"data:".concat(t,",").concat(encodeURIComponent(e)),l=/^\s*data:([-+.\w\d]+\/[-+.\w\d]+)?(;base64)?,(.*)$/,o=e=>{const t=l.exec(e),a=Object(n.a)(t,4),r=a[1],o=a[2],c=a[3],s=";base64"===o;return{data:s?c:decodeURIComponent(c),mime:r,base64:s}},c=e=>{var t;return null===(t=l.exec(e))||void 0===t?void 0:t[1]},s=e=>{const t=o(e),a=t.data,n=t.mime;if(t.base64){const e=window.atob(a),t=new Uint8Array(e.length);for(var r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return new Blob([t],{type:n})}return new Blob([a],{type:n})},i=e=>Math.ceil(.75*(e.length-e.indexOf(",")-1)/1e3),m=(e,t,...a)=>{const n=o(e),l=n.data,c=n.mime,s=t(l,...a);return r(s,c)}},539:function(e,t,a){},541:function(e,t,a){},548:function(e,t,a){},549:function(e,t,a){},550:function(e,t,a){},645:function(e,t,a){},646:function(e,t,a){},652:function(e,t){},654:function(e,t){},701:function(e,t,a){},704:function(e,t,a){},705:function(e,t,a){},706:function(e,t,a){},707:function(e,t,a){},708:function(e,t,a){},709:function(e,t,a){},710:function(e,t,a){},711:function(e,t,a){},712:function(e,t,a){},713:function(e,t,a){},714:function(e,t,a){},715:function(e,t,a){"use strict";a.r(t);var n=a(39),r=a.n(n),l=a(56),o=a(0),c=a.n(o),s=a(150),i=a.n(s);var m=a(38),d=a(181),p=a(388);const u=[20,2,1];var h=a(26),b=a(151),E=a(154);function f(){const e=Object(b.a)(['\n        <form>\n          <input name="variable">\n          <button type="submit">Submit</button>\n        </form>\n      ']);return f=function(){return e},e}const g={root:{id:"root",title:"root",type:"lab.flow.Sequence",children:[],parameters:[],plugins:[{type:"lab.plugins.Metadata"}],metadata:{title:"",description:"",repository:"",contributors:""}}},y=["Content","Behavior","Scripts","Files","Plugins","Parameters","More"],v={files:[],responses:[{label:"",event:"",target:"",filter:""}],parameters:[{name:"",value:"",type:"string"}],messageHandlers:[{title:"",message:"",code:""}]},w={"lab.flow.Loop":{name:"Loop",description:"Repeat a component",category:"Flow",icon:"repeat",minChildren:1,maxChildren:1,tabs:y,defaultTab:"Content",defaults:Object(h.a)({type:"lab.flow.Loop",children:[],templateParameters:{columns:[{name:"",type:"string"},{name:"",type:"string"}],rows:[["",""]]},sample:{mode:"draw-shuffle"}},v)},"lab.flow.Sequence":{name:"Sequence",description:"Show components sequentially",category:"Flow",icon:"sort-amount-down",minChildren:1,maxChildren:1/0,tabs:y,defaultTab:"Content",defaults:Object(h.a)({type:"lab.flow.Sequence",children:[]},v)},"lab.html.Form":{name:"Form",description:"Collect HTML form data",category:"HTML",icon:"list-alt",iconWeight:"r",iconFallbackWeight:"r",minChildren:0,maxChildren:0,tabs:y,defaultTab:"Content",defaults:Object(h.a)({type:"lab.html.Form",content:Object(E.a)(f()),scrollTop:!0},v)},"lab.html.Frame":{name:"Frame",description:"Create a common frame around nested content",category:"HTML",icon:"expand-wide",minChildren:1,maxChildren:1,tabs:y,defaultTab:"Content",defaults:Object(h.a)({type:"lab.html.Frame",context:'<main data-labjs-section="frame">\n  \x3c!-- Content gets inserted here --\x3e\n</main>',contextSelector:'[data-labjs-section="frame"]'},v)},"lab.html.Screen":{name:"Screen",description:"Show content using HTML",category:"HTML",icon:"window-maximize",iconWeight:"r",iconFallbackWeight:"r",minChildren:0,maxChildren:0,tabs:y,defaultTab:"Content",defaults:Object(h.a)({type:"lab.html.Screen"},v)},"lab.html.Page":{name:"Page",description:"Graphical page builder",category:"HTML",icon:"clipboard-list",iconWeight:"r",iconFallbackWeight:"s",minChildren:0,maxChildren:0,tabs:y,defaultTab:"Content",defaults:Object(h.a)({type:"lab.html.Page",items:[{type:"text"}],scrollTop:!0,submitButtonText:"Continue \u2192",submitButtonPosition:"right"},v)},"lab.canvas.Frame":{name:"Frame",description:"Provide a common canvas for nested components",category:"Canvas",icon:"expand-wide",minChildren:1,maxChildren:1,tabs:y,defaultTab:"Content",defaults:Object(h.a)({type:"lab.canvas.Frame",context:"\x3c!-- Nested components use this canvas --\x3e\n<canvas />",contextSelector:"canvas"},v)},"lab.canvas.Screen":{name:"Screen",description:"Show content using a canvas",category:"Canvas",icon:"image",iconWeight:"r",iconFallbackWeight:"r",minChildren:0,maxChildren:0,tabs:y,defaultTab:"Content",defaults:Object(h.a)({type:"lab.canvas.Screen",content:[],viewport:[800,600]},v)}},x=(e,t)=>e&&w[t].tabs.includes(e)?e:t?w[t].defaultTab:void 0,O=["lab.canvas.Screen","lab.html.Page","lab.flow.Sequence","lab.flow.Loop"];var j=a(28);let k=0;const N=function(e={}){const t=Object.entries(e).map(([e,t])=>e);let a;do{a=(++k).toString()}while(t.includes(a));return a};const C={viewType:"COMPONENT_DETAIL",viewProps:{id:"welcome"}};var T=a(52);const S={files:{"index.html":{content:Object(T.b)('<!doctype html>\n<html>\n<head>\n  <meta charset="utf-8">\n  <title>Experiment</title>\n  \x3c!-- viewport setup --\x3e\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  \x3c!-- lab.js library and experiment code --\x3e\n  ${ header }\n</head>\n<body>\n  \x3c!-- If you\'d rather have a container with a fixed width\n       and variable height, try removing the fullscreen class below --\x3e\n  <div class="container fullscreen" data-labjs-section="main">\n    <main class="content-vertical-center content-horizontal-center">\n      <div>\n        <h2>Loading Experiment</h2>\n        <p>The experiment is loading and should start in a few seconds</p>\n      </div>\n    </main>\n  </div>\n</body>\n</html>\n',"text/html"),source:"library"},"style.css":{content:Object(T.b)("/* Please define your custom styles here */","text/css"),source:"library"}},bundledFiles:{"lib/lab.js":{type:"application/javascript"},"lib/lab.js.map":{type:"text/plain"},"lib/lab.fallback.js":{type:"application/javascript"},"lib/lab.legacy.js":{type:"application/javascript"},"lib/lab.legacy.js.map":{type:"text/plain"},"lib/lab.css":{type:"text/css"},"lib/loading.svg":{type:"image/svg+xml"}}};const P={modalType:null,modalProps:{}};var A,_,D=(A=Object(d.combineReducers)({version:(e=u,t)=>e,components:(e=g,t)=>{switch(t.type){case"MOVE_COMPONENT":if(t.oldParent===t.newParent){const a=[...e[t.newParent].children.slice(0,t.oldIndex),...e[t.newParent].children.slice(t.oldIndex+1)],n=[...a.slice(0,t.newIndex),t.id,...a.slice(t.newIndex)];return Object(h.a)({},e,{[t.newParent]:Object(h.a)({},e[t.newParent],{children:n})})}return Object(h.a)({},e,{[t.newParent]:Object(h.a)({},e[t.newParent],{children:e[t.newParent].children?[...e[t.newParent].children.slice(0,t.newIndex),t.id,...e[t.newParent].children.slice(t.newIndex)]:[t.id]}),[t.oldParent]:Object(h.a)({},e[t.oldParent],{children:[...e[t.oldParent].children.slice(0,t.oldIndex),...e[t.oldParent].children.slice(t.oldIndex+1)]})});case"ADD_COMPONENT":const a=Object(h.a)({id:t.id||N(e)},t.data);return Object(h.a)({},e,{[a.id]:a,[t.parent]:Object(h.a)({},e[t.parent],{children:e[t.parent].children?[...e[t.parent].children.slice(0,t.index),a.id,...e[t.parent].children.slice(t.index)]:[a.id]})});case"DELETE_COMPONENT":const n=1<Object.entries(e).reduce((e,[a,n])=>e+(n.children?n.children.filter(e=>e===t.id).length:0),0),r=Object(h.a)({},e,{[t.parent]:Object(h.a)({},e[t.parent],{children:e[t.parent].children.filter((e,a)=>!(e===t.id&&a===t.index))})});return n||delete r[t.id],r;case"CLONE_COMPONENT":return Object(h.a)({},e,{[t.parent]:Object(h.a)({},e[t.parent],{children:e[t.parent].children?[...e[t.parent].children.slice(0,t.index),t.id,...e[t.parent].children.slice(t.index)]:[t.id]})});case"COPY_COMPONENT":const l=Object(h.a)({},e),o=e=>{const t=Object(h.a)({},l[e]),a=N(l);return t.id&&(t.id=a),t.children&&(t.children=t.children.map(o)),l[a]=t,a};return l[t.parent]=Object(h.a)({},l[t.parent],{children:l[t.parent].children?[...l[t.parent].children.slice(0,t.index),o(t.id),...l[t.parent].children.slice(t.index)]:[o(t.id)]}),l;case"IMPORT_COMPONENT":const c=Object(h.a)({},e),s=e=>{const a=Object(h.a)({},t.source[e]),n=N(c);return a.id&&(a.id=n),a.children&&(a.children=a.children.map(s)),c[n]=a,n};return c[t.parent]=Object(h.a)({},c[t.parent],{children:c[t.parent].children?[...c[t.parent].children.slice(0,t.index),s(t.id),...c[t.parent].children.slice(t.index)]:[s(t.id)]}),c;case"COLLAPSE_COMPONENT":return e[t.id].children&&e[t.id].children.length>0?Object(h.a)({},e,{[t.id]:Object(h.a)({},e[t.id],{_collapsed:!e[t.id]._collapsed})}):e;case"UPDATE_COMPONENT":return e[t.id]?Object(h.a)({},e,{[t.id]:Object(h.a)({},e[t.id],{},t.data)}):(console.log("Skipping update to missing component ".concat(t.id)),e);case"ADD_FILES":return Object(j.fromPairs)(Object.entries(e).map(([a,n])=>{const r=t.files.filter(e=>e.component===a);if(r.length>0){const t=e[a].files||[];return[a,Object(h.a)({},e[a],{files:[...t,...r.map(e=>Object(j.pick)(e,["localPath","poolPath"]))]})]}return[a,n]}));case"UPDATE_TIMELINE_ITEM":return Object(h.a)({},e,{[t.id]:Object(h.a)({},e[t.id],{timeline:e[t.id].timeline.map((e,a)=>a===t.item?Object(h.a)({},e,{},t.data):e)})});case"ADD_PLUGIN":return Object(h.a)({},e,{[t.id]:Object(h.a)({},e[t.id],{plugins:[...e[t.id].plugins||[],{type:t.pluginType}]})});case"DELETE_PLUGIN":return Object(h.a)({},e,{[t.id]:Object(h.a)({},e[t.id],{plugins:(e[t.id].plugins||[]).filter((e,a)=>a!==t.index)})});case"RESET_STATE":return g;default:return e}},componentDetail:(e=C,t)=>{switch(t.type){case"SHOW_COMPONENT_DETAIL":return{viewType:"COMPONENT_DETAIL",viewProps:{id:t.id}};case"RESET_STATE":return C;default:return e}},files:(e=S,t)=>{switch(t.type){case"ADD_FILES":return Object(h.a)({},e,{files:Object(h.a)({},e.files,{},Object(j.fromPairs)(t.files.filter(e=>e.data).map(e=>[e.poolPath,e.data])))});case"UPDATE_FILE":return Object(h.a)({},e,{files:Object(h.a)({},e.files,{[t.file]:Object(h.a)({},e.files[t.file],{},t.data)})});case"DELETE_FILE":const a=Object(h.a)({},e,{files:Object(h.a)({},e.files)});return delete a.files[t.file],a;case"MERGE_FILES":return Object(h.a)({},e,{files:Object(h.a)({},t.files,{},e.files)});case"RESET_STATE":return S;default:return e}},modal:(e=P,t)=>{switch(t.type){case"SHOW_MODAL":return{modalType:t.modalType,modalProps:t.modalProps};case"HIDE_MODAL":case"RESET_STATE":return P;default:return e}}}),_="HYDRATE",function(e,t){switch(t.type){case _:return A(t.state,t);default:return A(e,t)}}),I=a(389);function F(){const e=Object(b.a)(["\n      \x3c!-- lab.js library and experiment code --\x3e\n      ${ header }\n    "],["\n      \x3c!-- lab.js library and experiment code --\x3e\n      \\${ header }\n    "]);return F=function(){return e},e}function H(){const e=Object(b.a)(['\n      ^\\s+\x3c!-- lab.js library and default styles --\x3e$\n      ^\\s+<script [^>]* data-labjs-script="library"><\/script>$\n      ^\\s+<script [^>]* data-labjs-script="fallback"><\/script>$\n      ^\\s+<link rel="stylesheet" href="lib/lab.css">$\n      ^\\s+\x3c!-- study code and styles --\x3e$\n      ^\\s+<script defer src="script.js"><\/script>$\n      ^\\s+<link rel="stylesheet" href="style.css">$\n    '],['\n      ^\\\\s+\x3c!-- lab.js library and default styles --\x3e$\n      ^\\\\s+<script [^>]* data-labjs-script="library"><\/script>$\n      ^\\\\s+<script [^>]* data-labjs-script="fallback"><\/script>$\n      ^\\\\s+<link rel="stylesheet" href="lib/lab.css">$\n      ^\\\\s+\x3c!-- study code and styles --\x3e$\n      ^\\\\s+<script defer src="script.js"><\/script>$\n      ^\\\\s+<link rel="stylesheet" href="style.css">$\n    ']);return H=function(){return e},e}const L={"2017.0.1":e=>Object(h.a)({},e,{version:[2017,0,2],components:Object(j.mapValues)(e.components,e=>Object(h.a)({messageHandlers:{rows:[[{title:"",message:"",code:""}]]}},e))}),"2017.0.2":e=>Object(h.a)({},e,{version:[2017,0,3],components:Object(j.mapValues)(e.components,e=>"lab.flow.Loop"===e.type?Object(h.a)({},e,{templateParameters:Object(h.a)({},e.templateParameters,{columns:e.templateParameters.columns.map(e=>({name:e,type:"string"}))})}):Object(h.a)({},e))}),"2017.0.3":e=>Object(h.a)({},e,{version:[2017,0,4],components:Object(j.mapValues)(e.components,e=>{const t={space:"Space",enter:"Enter",tab:"Tab",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight"};return e.responses&&e.responses.rows&&(e.responses.rows=e.responses.rows.map(e=>{if("keypress"===e[1]){const a=e[3].split(",").map(e=>e.trim()).map(e=>t[e]||e).join(", "),n=e;return n[3]=a,n}return e})),e})}),"2017.0.4":e=>(e.files.files["index.html"]&&(e.files.files["index.html"].content=e.files.files["index.html"].content.replace('id="labjs-content"','data-labjs-section="main"')),e.version=[2017,0,5],e),"2017.0.5":e=>Object(h.a)({},e,{version:[2017,1,0]}),"2017.1.0":e=>(e.files.files["index.html"]&&(e.files.files["index.html"].content=e.files.files["index.html"].content.replace('src="lib/lab.min.js"','src="lib/lab.js"')),e.files.bundledFiles["lib/lab.min.js"]&&delete e.files.bundledFiles["lib/lab.min.js"],e.files.bundledFiles["lib/lab.js"]={type:"application/javascript"},e.files.bundledFiles["lib/lab.js.map"]={type:"text/plain"},e.version=[2017,1,1],e),"2017.1.1":e=>(Object.entries(e.files.files).forEach(([t,a])=>{e.files.files[t]={content:Object(T.b)(a.content,a.type)},["index.html","style.css"].includes(t)&&(e.files.files[t].permanent=!0)}),e.version=[2017,1,2],e),"2017.1.2":e=>(e.components.root.plugins=[{type:"lab.plugins.Metadata"}],e.version=[2017,1,3],e),"2017.1.3":e=>Object(h.a)({},e,{version:[2017,1,4],components:Object(j.mapValues)(e.components,e=>"lab.canvas.Screen"===e.type?Object(h.a)({},e,{viewport:[800,600]}):e)}),"2017.1.4":e=>(e.components.root.metadata=e.components.root.metadata||{title:"",description:"",repository:"",contributors:""},e.version=[2017,1,5],e),"2017.1.5":e=>(e.components=Object(j.mapValues)(e.components,e=>(e.messageHandlers&&e.messageHandlers.rows&&(e.messageHandlers.rows=e.messageHandlers.rows.map(e=>[Object(h.a)({},e[0],{message:"prepare"===e[0].message?"after:prepare":e[0].message})])),e)),e.version=[2017,1,6],e),"2017.1.6":e=>Object(h.a)({},e,{version:[2017,1,7],components:Object(j.mapValues)(e.components,e=>Object(h.a)({},e,{parameters:{rows:[[{name:"",value:"",type:"string"}]]}}))}),"2017.1.7":e=>(e.version=[2018,0,1],e.files.files["index.html"]&&(e.files.files["index.html"].content=Object(T.f)(e.files.files["index.html"].content,e=>e.replace(/^(\s*)<script src="lib\/lab\.js"><\/script>/gm,'$&\n$1<script src="lib/lab.fallback.js" data-labjs-script="fallback"><\/script>')),e.files.files["index.html"].content=Object(T.f)(e.files.files["index.html"].content,e=>e.replace('<script src="lib/lab.js"><\/script>','<script src="lib/lab.js" data-labjs-script="library"><\/script>'))),e),"2018.0.1":e=>(e.version=[2018,0,2],e.files.bundledFiles["lib/lab.fallback.js"]={type:"application/javascript"},e.files.bundledFiles["lib/lab.legacy.js"]={type:"application/javascript"},e.files.bundledFiles["lib/lab.legacy.js.map"]={type:"text/plain"},e),"2018.0.2":e=>(e.version=[2018,0,3],e.components=Object(j.mapValues)(e.components,e=>(e._tab&&"Responses"===e._tab&&(e._tab="Behavior"),e)),e),"2018.0.3":e=>{e.version=[2018,0,4];const t=new RegExp(Object(E.a)(H()),"gm"),a=Object(E.a)(F()).split("\n").map(e=>"  ".concat(e)).join("\n");return e.files.files["index.html"].content=Object(T.f)(e.files.files["index.html"].content,e=>e.replace(t,a)),e},"2018.0.4":e=>Object(h.a)({},e,{version:[2018,1,0],components:Object(j.mapValues)(e.components,e=>Object(h.a)({},e,{files:e.files||{rows:[]}}))}),"2018.1.0":e=>(Object.entries(e.files.files).forEach(([t,a])=>{a.permanent?(e.files.files[t].source="library",delete e.files.files[t].permanent):e.files.files[t].source="embedded-global"}),e.version=[2018,1,1],e),"2018.1.1":e=>Object(h.a)({},e,{version:[2018,1,2],components:Object(j.mapValues)(e.components,e=>Object(h.a)({},e,{files:e.files?{rows:e.files.rows.map(e=>[{localPath:e[0].path,poolPath:e[0].file}])}:void 0}))}),"2018.1.2":e=>Object(h.a)({},e,{version:[19,0,0],components:Object(j.mapValues)(e.components,e=>"lab.flow.Loop"===e.type?(e.sample=e.sample||{},["",void 0].includes(e.sample.n)?e.shuffle?e.sample.mode="draw-shuffle":e.sample.mode="sequential":e.sample.replace?e.sample.mode="draw-replace":e.sample.mode="draw-shuffle",delete e.sample.replace,delete e.shuffle,e):e)}),"19.0.0":e=>Object(h.a)({},e,{version:[19,0,1],components:Object(j.mapValues)(e.components,e=>(e.timeline&&Array.isArray(e.timeline)&&(e.timeline=e.timeline.map(e=>({type:e.type,start:e.start,stop:e.stop,priority:e.priority,payload:Object(j.omit)(Object(h.a)({},e,{},e.options),["type","start","stop","priority","options"])}))),e))}),"19.0.1":e=>Object(h.a)({},e,{version:[19,1,0]}),"19.1.0":e=>Object(h.a)({},e,{version:[19,1,1],components:Object(j.mapValues)(e.components,(e,t)=>("root"===t&&e.messageHandlers&&e.messageHandlers.rows&&(e.messageHandlers.rows=e.messageHandlers.rows.filter(e=>"JATOS integration"!==e[0].title&&"epilogue"!==e[0].message)),e))}),"19.1.1":e=>Object(h.a)({},e,{version:[19,1,2],components:Object(j.mapValues)(e.components,e=>"lab.canvas.Screen"===e.type?Object(h.a)({},e,{content:e.content.map(e=>"i-text"===e.type&&"Times New Roman"===e.fontFamily?Object(h.a)({},e,{fontFamily:"serif"}):e)}):Object(h.a)({},e))}),"19.1.2":e=>Object(h.a)({},e,{version:[20,0,0]}),"20.0.0":e=>Object(h.a)({},e,{version:[20,0,1]}),"20.0.1":e=>Object(h.a)({},e,{version:[20,1,0]}),"20.0.2":e=>Object(h.a)({},e,{version:[20,1,0]}),"20.1.0":e=>Object(h.a)({},e,{version:[20,1,1]}),"20.1.1":e=>Object(h.a)({},e,{version:[20,2,0],components:Object(j.mapValues)(e.components,(e,t)=>{var a,n,r,l,o,c,s,i,m,d,p;return Object(h.a)({},e,{parameters:null!==(a=null===(n=e.parameters)||void 0===n||null===(r=n.rows)||void 0===r?void 0:r.map(e=>e[0]))&&void 0!==a?a:[],messageHandlers:null!==(l=null===(o=e.messageHandlers)||void 0===o||null===(c=o.rows)||void 0===c?void 0:c.map(e=>e[0]))&&void 0!==l?l:[],files:null!==(s=null===(i=e.files)||void 0===i||null===(m=i.rows)||void 0===m?void 0:m.map(e=>e[0]))&&void 0!==s?s:[],responses:null===(d=e.responses)||void 0===d||null===(p=d.rows)||void 0===p?void 0:p.map(e=>({label:e[0],event:e[1],target:e[2],filter:e[3]}))})})}),"20.2.0":e=>Object(h.a)({},e,{version:[20,2,1],components:Object(j.mapValues)(e.components,(e,t)=>{var a,n,r;return"lab.html.Page"===e.type?Object(h.a)({},e,{items:null!==(a=null===(n=e.items)||void 0===n||null===(r=n.rows)||void 0===r?void 0:r.map(e=>e[0]))&&void 0!==a?a:[]}):e})})};const M=e=>(e=>{let t=e;for(;t.version.join(".")in L;){console.log("Updating file from ".concat(t.version.join(".")));try{t=L[t.version.join(".")](t)}catch(a){console.log("found error",a)}console.log("update complete")}return t})(Object(h.a)({version:[2017,1,7]},e)),R=e=>M(JSON.parse(e)),W=["keys and/or value are too large","value is too large","QuotaExceededError"],V=a.n(I).a.createInstance({name:"lab.js"}),B=function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.subscribe(Object(j.debounce)(()=>{V.setItem("state:latest",t.getState()).catch(e=>{if(!W.some(t=>e.message.includes(t)))throw e})}),500),!navigator.storage||!navigator.storage.persist){e.next=11;break}return e.next=4,navigator.storage.persisted();case 4:if(!e.sent){e.next=8;break}console.log("Persistent storage enabled"),e.next=9;break;case 8:console.log("Persistent storage not permitted");case 9:e.next=12;break;case 11:console.log("No support for persistent storage");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.getItem("state:latest");case 2:return t=e.sent,e.abrupt("return",t?M(t):void 0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(r.a.mark((function e(){var t,a,n,l,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=new URL(window.location.href))&&t.searchParams){e.next=3;break}return e.abrupt("return");case 3:if(!(a=t.searchParams.get("url"))||!window.confirm("Would you like to load the study from ".concat(a,"?"))){e.next=31;break}return e.prev=5,e.next=8,fetch(a);case 8:n=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),alert("Connection error while trying to load remote study: ".concat(e.t0)),e.abrupt("return");case 15:if(n.ok){e.next=18;break}return alert("Invalid response while loading remote study, code ".concat(n.status,": ").concat(n.statusText)),e.abrupt("return");case 18:return e.prev=18,e.next=21,n.json();case 21:l=e.sent,e.next=28;break;case 24:return e.prev=24,e.t1=e.catch(18),alert("Couldn't decode study data: ".concat(e.t1)),e.abrupt("return");case 28:return o=M(l),window.history.pushState({},document.title,"/"),e.abrupt("return",o);case 31:case"end":return e.stop()}}),e,null,[[5,11],[18,24]])})));return function(){return e.apply(this,arguments)}}();var q=function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=d.createStore,e.t1=D,e.t3=t,e.t3){e.next=7;break}return e.next=6,z();case 6:e.t3=e.sent;case 7:if(e.t2=e.t3,e.t2){e.next=12;break}return e.next=11,U();case 11:e.t2=e.sent;case 12:return e.t4=e.t2,e.t5=Object(p.composeWithDevTools)(),e.abrupt("return",(0,e.t0)(e.t1,e.t4,e.t5));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=a(159),G=a(390),K=a.n(G),X=a(136),Q=a(55),J=a(753),$=a(754),Z=a(755),ee=a(756),te=a(319),ae=a(757),ne=a(391),re=a.n(ne),le=a(182),oe=a(167),ce=a(392),se=a.n(ce);const ie=e=>se()(e).toLowerCase(),me=e=>ie(e.components.root&&e.components.root.metadata&&e.components.root.metadata.title&&e.components.root.metadata.title.trim()||"study");var de=a(158);const pe=(e,t="root",{removeInternals:a=!1}={})=>{const n=e.version,r=e.components,l=e.files,o=l.files,c=l.bundledFiles,s=Object(j.cloneDeep)(Object(j.pick)(r,["root",t,...Object(oe.a)(t,r)]));s.root.children="root"===t?r.root.children:[t];const i=a?Object(j.mapValues)(s,e=>Object(j.omitBy)(e,(e,t)=>t.startsWith("_"))):s,m=Object(de.b)(i),d=Object(j.pickBy)(o,(e,t)=>"embedded"!==e.source||m.includes(t));return JSON.stringify({components:i,version:n,files:{files:d,bundledFiles:c}},null,2)},ue=(e,{exportedComponent:t="root",filenameOverride:a=null,removeInternals:n=!1}={})=>{const r=pe(e,t,{removeInternals:n});let l;if(a)l=a;else{const a="root"===t?me(e):me(e)+"-"+e.components[t].title.toLowerCase(),n=re()().format("YYYY-MM-DD--HH:mm");l="".concat(a,"-").concat(n,".study.json")}const o=new Blob([r],{type:"application/json;charset=utf-8"});return Object(le.saveAs)(o,l)};var he=a(749),be=a(750),Ee=a(751),fe=a(752),ge=a(20),ye=a.n(ge);class ve extends o.Component{constructor(e){super(e),this.state={isOpen:!1!==e.open}}render(){const e=this.props,t=e.title,a=e.badge,n=e.children,r=e.className,l=e.collapsable,o=!1!==e.wrapContent?c.a.createElement(he.a,null,n):n;return c.a.createElement(be.a,{style:this.props.style,className:ye()("my-1",r)},t?c.a.createElement(Ee.a,{style:{borderBottomStyle:this.state.isOpen?"solid":"none"},onClick:()=>{l&&this.setState({isOpen:!this.state.isOpen})}},t,a&&c.a.createElement(c.a.Fragment,null,"\xa0",c.a.createElement(fe.a,{color:"secondary"},a))):null,this.state.isOpen?o:null)}}var we=ve;const xe=["Well, crikey","Dangnabbit!","What the cabbage?","What a total cluster-cuss.","Belgium!"],Oe=["https://media.giphy.com/media/XsUtdIeJ0MWMo/giphy.mp4","https://media.giphy.com/media/155lQxHOx9Bni/giphy.mp4","https://media.giphy.com/media/FYenMRUx3LGy4/giphy.mp4","https://media.giphy.com/media/p3RblYx4T7vmU/giphy.mp4","https://media.giphy.com/media/8QIgBwVvZVrG0/giphy.mp4","https://media.giphy.com/media/pPhyAv5t9V8djyRFJH/giphy.mp4","https://media.giphy.com/media/APqEbxBsVlkWSuFpth/giphy.mp4","https://media.giphy.com/media/Rhkq4ehWqVX56/giphy.mp4","https://media.giphy.com/media/fOVGTYyYtV6Ra/giphy.mp4"],je=({reset:e,error:t,errorInfo:a,eventId:n})=>{const r=Object(o.useState)(!1),l=Object(Q.a)(r,2),s=l[0],i=l[1],d=Object(m.d)();return c.a.createElement(J.a,null,c.a.createElement($.a,null,c.a.createElement(Z.a,{sm:{size:4,offset:4},className:"text-center my-4"},c.a.createElement("video",{autoPlay:!0,loop:!0,className:"rounded-circle shadow",style:{width:"300px",height:"300px",marginTop:"10vh",objectFit:"cover"}},c.a.createElement("source",{src:Object(j.sample)(Oe),type:"video/mp4"})))),c.a.createElement($.a,null,c.a.createElement(Z.a,{sm:{size:6,offset:3}},c.a.createElement(ee.a,{color:"danger",className:"my-4"},c.a.createElement("h4",{className:"alert-heading mt-2"},Object(j.sample)(xe)),c.a.createElement("hr",null),c.a.createElement("p",{className:"mb-1"},c.a.createElement("strong",null,"We're really, really sorry, something just went badly wrong.")," In a nutshell, ",c.a.createElement("code",null,"lab.js")," encountered an error it couldn't recover from, and the application can't run or restart. The team has been alerted.")),c.a.createElement(ee.a,{color:"light",style:{background:"white",border:"none"}},c.a.createElement("p",null,c.a.createElement("strong",null,"We want to help you get back to work as quickly as possible.")," Here are a few things to speed up that process:"),c.a.createElement("p",null,"First of all, please make sure you ",c.a.createElement("strong",null,"download a backup")," of the study you've been working on. We can almost certainly help you recover your last change, even if the file doesn't load."),c.a.createElement(te.a,{outline:!0,color:"primary",block:!0,size:"lg",onClick:e=>{ue(d.getState()),i(!0)}},"Download study backup"),c.a.createElement("p",{className:"mt-3"},c.a.createElement("strong",null,"With the backup in hand, you're safe for the moment.")," Please ",c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://lab.js.org/resources/support/"}," join the support channel")," where we would be happy to help you track down and fix the bug. We make mistakes sometimes, but also love to learn how we can improve things, and would be glad to make things better for everyone!"),c.a.createElement("p",null,"There are two more things you can try. ",c.a.createElement("strong",null,"We recommend to only attempt these in consultation with support.")," You'll need to download a backup of your current study first."),c.a.createElement(ae.a,{className:"w-100"},c.a.createElement(te.a,{outline:!0,className:"w-50 py-3",disabled:!s,onClick:()=>{d.dispatch({type:"SHOW_COMPONENT_DETAIL",id:void 0}),e()}},"Close currently",c.a.createElement("br",null),"open component"),c.a.createElement(te.a,{outline:!0,className:"w-50 py-3",disabled:!s,onClick:()=>{window.confirm("This will discard the currently active study. Are you sure?")&&d.dispatch({type:"RESET_STATE"}),e()}},"Start from scratch",c.a.createElement("br",null),"with an empty study")),c.a.createElement(we,{title:"Guru meditation / technical details",className:"mt-3",collapsable:!0,open:!1},c.a.createElement("dl",null,c.a.createElement("dt",null,"Error message"),c.a.createElement("dd",null,t&&t.toString()||c.a.createElement("em",null,"(unavailable)")),c.a.createElement("dt",null,"Component stack"),c.a.createElement("dd",{style:{whiteSpace:"pre-wrap"}},a.componentStack||c.a.createElement("em",null,"(unavailable)")),c.a.createElement("dt",null,"EventId"),c.a.createElement("dd",null,n||c.a.createElement("em",null,"(unavailable)"))))))))};je.defaultProps={error:void 0,errorInfo:{}};var ke=je,Ne=(a(539),a(540),a(541),({sidebar:e,footer:t,children:a})=>c.a.createElement("div",{className:"grid-wrapper"},c.a.createElement("div",{className:"grid-sidebar"},e),c.a.createElement("div",{className:"grid-footer"},t),c.a.createElement("div",{className:"grid-contents"},c.a.createElement(J.a,{fluid:!0,className:"h-100 d-flex flex-column",style:{minWidth:"510px",maxWidth:"1200px",minHeight:"600px",padding:"0"}},a)))),Ce=a(183),Te=a(119),Se=a(765),Pe=a(766),Ae=a(767),_e=a(30),De=a(115),Ie=a(758),Fe=a(759),He=a(760);a(549);const Le=(e,t,a,n)=>{e.dispatch({type:"ADD_COMPONENT",parent:a,index:n,data:Object(h.a)({},w[t].defaults,{title:w[t].name})}),e.dispatch({type:"SHOW_COMPONENT_DETAIL",id:e.getState().components[a].children[n]}),e.dispatch({type:"HIDE_MODAL"})},Me=({type:e,parent:t,index:a})=>{const n=Object(m.d)();return(c.a.createElement(be.a,{className:"add-component-card",onClick:()=>Le(n,e,t,a)},c.a.createElement(Ee.a,{className:"text-center"},c.a.createElement(_e.a,{icon:w[e].icon,weight:w[e].iconWeight,fallbackWeight:w[e].iconFallbackWeight})),c.a.createElement(he.a,{className:"text-center"},c.a.createElement("h5",{className:"card-title"},w[e].name),c.a.createElement("h6",{className:"card-subtitle mb-2 text-muted",style:{fontWeight:"400"}},w[e].category))))},Re=({parent:e,index:t})=>{const a=Object(m.d)();return Object.entries(Object.entries(w).reduce((e,[t,a])=>(e[a.category]=[...e[a.category]||[],t],e),{})).map(([n,r])=>c.a.createElement(we,{key:n,title:n,open:!1,collapsable:!0,wrapContent:!1},c.a.createElement(Ie.a,{className:"list-group-flush"},r.map(n=>c.a.createElement(Fe.a,{key:n,tag:"a",href:"#",action:!0,className:"d-flex justify-content-between",onClick:()=>Le(a,n,e,t)},c.a.createElement("span",null,c.a.createElement("strong",null,w[n].name),"\xa0",c.a.createElement("small",{className:"text-muted"},"\xb7 ",w[n].description)),c.a.createElement(_e.a,{icon:w[n].icon,className:"mt-1",weight:w[n].iconWeight,fallbackWeight:w[n].iconFallbackWeight}))))))};var We,Ve=({parent:e,index:t})=>c.a.createElement(c.a.Fragment,null,c.a.createElement(He.a,{className:"mb-3"},O.map(a=>c.a.createElement(Me,{key:a,type:a,parent:e,index:t}))),c.a.createElement(Re,{parent:e,index:t})),Be=a(761),Ue=a(762),ze=a(763);const qe=null!==(We=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FA:"free"}).REACT_APP_EXAMPLE_PATH)&&void 0!==We?We:"https://raw.githubusercontent.com/FelixHenninger/lab.js/master/tasks/",Ye=(e="",t,a,n)=>""===e?t:e+(a<n.length-1?", ":" & ")+t,Ge=({name:e,contributors:t,description:a,url:n,clickHandler:r})=>c.a.createElement(Fe.a,{action:!0,style:{cursor:"pointer"},onClick:r},c.a.createElement("div",{className:"d-flex w-100 justify-content-between"},c.a.createElement("strong",null,e),c.a.createElement("span",{className:"text-muted"},(t||[""]).filter(e=>!e.includes("Felix Henninger")).reduce(Ye,""))));class Ke extends o.Component{constructor(e){super(e),this.state={state:"empty",tasks:[]}}componentDidMount(){var e=this;return Object(l.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e.props.path+"metadata.json");case 3:return a=t.sent,t.next=6,a.json();case 6:n=t.sent,e.setState({state:"loaded",tasks:n}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e.setState({state:"error"});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}loadTask(e){var t=this;return Object(l.a)(r.a.mark((function a(){var n,l;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(t.props.path+e);case 2:return n=a.sent,a.t0=M,a.next=6,n.json();case 6:a.t1=a.sent,l=(0,a.t0)(a.t1),t.props.loadHandler(l,t.context.store.dispatch);case 9:case"end":return a.stop()}}),a)})))()}render(){return"error"===this.state.state?c.a.createElement(Ie.a,{className:"list-group-flush"},c.a.createElement(Fe.a,{className:"text-center text-muted"},c.a.createElement("i",{className:"fas fa-exclamation-circle fa-2x mt-3 mb-2"})," ",c.a.createElement("p",null,c.a.createElement("strong",null,"Sorry, I couldn't load the ",this.props.taskLabel),c.a.createElement("br",null),c.a.createElement("small",null,"This shouldn't happen. If it persists even though you're online, could you please"," ",c.a.createElement("a",{href:"http://labjs.readthedocs.io/en/latest/meta/contribute/help.html",target:"_blank",rel:"noopener noreferrer"},"let us know"),"?")))):0===this.state.tasks.length?c.a.createElement(Ie.a,{className:"list-group-flush"},c.a.createElement(Fe.a,{className:"text-center"},c.a.createElement("i",{className:"fas fa-spinner-third fa-spin"}))):c.a.createElement(Ie.a,{className:"list-group-flush"},this.state.tasks.map((e,t)=>c.a.createElement(Ge,Object.assign({key:"task-".concat(t),clickHandler:()=>this.loadTask(e.path)},e))))}}Ke.contextType=m.b,Ke.defaultProps={taskLabel:"tasks"};var Xe=()=>c.a.createElement(c.a.Fragment,null,c.a.createElement(he.a,null,c.a.createElement(Be.a,{className:"h5 mt-2"},"Examples"),c.a.createElement(Ue.a,{className:"text-muted mb-3"},"Pre-made, ready-to-run studies"),c.a.createElement(ze.a,null,"These examples are made by researchers like you! If you're building a study, we'd love to add it here \u2014 please ",c.a.createElement("a",{href:"https://labjs.readthedocs.io/en/latest/meta/contribute/index.html",target:"_blank",rel:"noopener noreferrer"},"let us know"),"!"),c.a.createElement(ze.a,null,"Please click on any of the paradigms to open it; they're yours to try, demonstrate, replicate and extend.")),c.a.createElement(Ke,{path:qe,taskLabel:"examples",loadHandler:(e,t)=>t({type:"HYDRATE",state:e})}),c.a.createElement(he.a,null,c.a.createElement("small",{className:"text-muted"},"Missing a task? Something to improve? Please ",c.a.createElement("a",{href:"https://labjs.readthedocs.io/en/latest/meta/contribute/index.html",target:"_blank",rel:"noopener noreferrer"},"suggest or contribute"),"!"))),Qe=a(160);const Je=(e,t,a,n)=>{1===a.components.root.children.length?n.dispatch({type:"IMPORT_COMPONENT",parent:e,index:t,id:a.components.root.children[0],source:a.components}):(a.components.root.plugins=a.components.root.plugins.filter(e=>"lab.plugins.Metadata"!==e.type),a.components.root.title=a.components.root.metadata.title||"Unnamed task",n.dispatch({type:"IMPORT_COMPONENT",parent:e,index:t,id:"root",source:a.components})),n.dispatch({type:"MERGE_FILES",files:a.files.files}),n.dispatch({type:"SHOW_COMPONENT_DETAIL",id:n.getState().components[e].children[t]}),n.dispatch({type:"HIDE_MODAL"})};var $e,Ze=({parent:e,index:t})=>{const a=Object(m.d)();return(c.a.createElement(Qe.a,{accept:"application/json",multiple:!1,maxSize:55*Math.pow(1024,2),onUpload:([[n]])=>{try{const r=R(n);Je(e,t,r,a)}catch(r){alert("Couldn't load file, found error",r)}}},c.a.createElement("button",{className:"btn btn-outline-secondary btn-lg btn-block"},c.a.createElement("strong",null,"Import component")," from file")))};const et=null!==($e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FA:"free"}).REACT_APP_TEMPLATE_PATH)&&void 0!==$e?$e:"https://raw.githubusercontent.com/FelixHenninger/lab.js/master/templates/";var tt=({parent:e,index:t})=>{const a=Object(m.d)();return(c.a.createElement("div",null,c.a.createElement("h2",{className:"h5 mt-1"},c.a.createElement("span",null,"Templates")),c.a.createElement("p",null,"Click on any template to include it in your study; they're yours to use and extend. Please consider ",c.a.createElement("a",{href:"https://labjs.readthedocs.io/en/latest/meta/contribute/index.html"},"sharing your own favorites!")),c.a.createElement(be.a,{className:"card-flush"},c.a.createElement(Ke,{path:et,taskLabel:"templates",loadHandler:n=>{try{Je(e,t,n,a)}catch(r){alert("Couldn't load file, found error",r)}}})),c.a.createElement("div",{className:"mt-3"},c.a.createElement("small",{className:"text-muted"},"Missing something? Ideas for improving things? Please ",c.a.createElement("a",{href:"https://labjs.readthedocs.io/en/latest/meta/contribute/index.html",target:"_blank",rel:"noopener noreferrer"},"suggest or contribute"),"!"))))},at=a(764);a(550);var nt=({parent:e,index:t})=>{let a=c.a.createRef();const n=Object(m.d)();return(c.a.createElement("div",{className:"copy-component-tab"},c.a.createElement(at.a,{type:"select",bsSize:"lg",name:"copySelect",id:"copySelect",className:"custom-select",innerRef:a},Object(oe.b)(n.getState().components).map(([e,t,a],n)=>c.a.createElement("option",{value:e,key:n},t>0?Object(j.repeat)("\u2003",t-1)+"\u2219 ":"",a.title))),c.a.createElement(ae.a,null,c.a.createElement(te.a,{outline:!0,color:"secondary",onClick:()=>{""!==a.current.value&&(n.dispatch({type:"COPY_COMPONENT",id:a.current.value,parent:e,index:t}),n.dispatch({type:"HIDE_MODAL"}))}},"Copy"),c.a.createElement(te.a,{outline:!0,color:"secondary",onClick:()=>{if(""!==a.current.value){if([a.current.value,...Object(oe.a)(a.current.value,n.getState().components)].includes(e))return void alert("I'm sorry, I'm afraid I can't do that: Cloning a component inside itself would create an endless chain of nested components. Please use a regular copy instead.");n.dispatch({type:"CLONE_COMPONENT",id:a.current.value,parent:e,index:t}),n.dispatch({type:"HIDE_MODAL"})}}},"Clone"))))};const rt=e=>{let t=e.tab,a=Object(Te.a)(e,["tab"]);switch(t){case"new":return c.a.createElement(Ve,a);case"template":return c.a.createElement(tt,a);case"copy":return c.a.createElement(nt,a);case"import":return c.a.createElement(Ze,a);default:return c.a.createElement("div",null,"Requested tab not found")}};var lt=a(24),ot=a(768),ct=a(769),st=a(770),it=a(35);const mt=(e,t)=>({type:"UPDATE_COMPONENT",id:e,data:t}),dt={updateComponent:mt};var pt=Object(m.c)(e=>({data:e.components.root.metadata}),dt)(({data:e,updateComponent:t})=>c.a.createElement(lt.e,{initialValues:e},c.a.createElement("form",null,c.a.createElement("h4",{className:"mt-1"},"Study information"),c.a.createElement("p",{className:"text-muted"},"Please tell your fellow scientists a few things about your study."),c.a.createElement("hr",null),c.a.createElement(ot.a,{row:!0},c.a.createElement(ct.a,{for:"title",sm:2},"Title"),c.a.createElement(Z.a,{sm:10},c.a.createElement(lt.b,{name:"title",component:it.c,bsSize:"lg",className:"font-weight-bold",style:{paddingLeft:"12px"}}))),c.a.createElement(ot.a,{row:!0},c.a.createElement(ct.a,{for:"description",sm:2},"Description"),c.a.createElement(Z.a,{sm:10},c.a.createElement(lt.b,{name:"description",component:it.c,type:"textarea",rows:"3"}),c.a.createElement(st.a,{color:"muted"},"What does your study do?"))),c.a.createElement("hr",null),c.a.createElement(ot.a,{row:!0},c.a.createElement(ct.a,{for:"repository",size:"sm",sm:2},"Repository"),c.a.createElement(Z.a,{sm:10},c.a.createElement(lt.b,{name:"repository",placeholder:"https://osf.io/... / https://github.com/...",component:it.c,bsSize:"sm",className:"text-monospace"}),c.a.createElement(st.a,{color:"muted"},"Where can researchers find the canonical or latest version of your study?"))),c.a.createElement(ot.a,{row:!0},c.a.createElement(ct.a,{for:"contributors",size:"sm",sm:2},"Contributors"),c.a.createElement(Z.a,{sm:10},c.a.createElement(lt.b,{name:"contributors",placeholder:"Rita Levi-Montalcini <rlm@nobel.example> (http://ibcn.cnr.it)",component:it.c,type:"textarea",rows:"3",bsSize:"sm",className:"text-monospace"}),c.a.createElement(st.a,{color:"muted"},c.a.createElement("em",null,"One line each, please!")," To keep things tidy, please enter full names (or secret pseudonyms) for everyone who helped build this study. You can also add an email address (in angle brackets) and a link (in round brackets)."))),c.a.createElement(it.a,{onSave:e=>t("root",{metadata:e})})))),ut=a(772),ht=a(211);const bt=()=>c.a.createElement("colgroup",null,c.a.createElement("col",{style:{width:"60px"}}),c.a.createElement("col",{style:{width:"80%"}}),c.a.createElement("col",{style:{width:"20%"}}),c.a.createElement("col",{style:{width:"60px"}})),Et=()=>c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null),c.a.createElement("th",null,"Filename"),c.a.createElement("th",{className:"text-right"},"Size ",c.a.createElement("span",{className:"text-muted font-weight-normal"},"[KB]")),c.a.createElement("th",null))),ft=({path:e,content:t,onDelete:a})=>c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("div",{className:"text-muted text-center",style:{padding:"0.375rem 0.75rem",border:"1px solid transparent",lineHeight:"1.5"}},c.a.createElement(_e.a,{icon:Object(ht.a)(t),fixedWidth:!0,style:{color:"var(--secondary)",position:"relative",top:"1px"}}))),c.a.createElement("td",{className:"text-monospace"},c.a.createElement("div",{style:{padding:"0.55rem 0 0.2rem"}},e)),c.a.createElement("td",{className:"text-monospace text-right"},c.a.createElement("div",{style:{padding:"0.55rem 0 0.2rem"}},Object(T.e)(t))),c.a.createElement("td",null,c.a.createElement(te.a,{block:!0,outline:!0,color:"muted",onClick:a},c.a.createElement(_e.a,{icon:"trash",fixedWidth:!0})))),gt=Object(m.c)(e=>({files:e.files.files}),{deleteFile:e=>({type:"DELETE_FILE",file:e})})(({files:e,sources:t=["embedded-global"],deleteFile:a})=>c.a.createElement("tbody",null,Object(j.sortBy)(Object.entries(e),([e,t])=>e).filter(([e,{source:a}])=>t.includes(a)).map(([e,{content:t}])=>c.a.createElement(ft,{key:e,path:e,content:t,onDelete:()=>a(e)}))));var yt=a(771);var vt=Object(m.c)(e=>({space:Object.entries(e.files.files).reduce((e,[,{content:t}])=>e+Object(T.e)(t),0)}))(({space:e})=>c.a.createElement(yt.a,{value:e,max:51200,style:{height:"25px"}},c.a.createElement("span",{className:"pl-2"},(e/1024).toFixed(1)," / 50 MB")));const wt=()=>{const e=Object(m.d)();return(c.a.createElement(ut.a,{className:"grid border-top-0",style:{borderBottom:"2px solid #eceeef"}},c.a.createElement(bt,null),c.a.createElement(Et,null),c.a.createElement(gt,null),c.a.createElement("tfoot",null,c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",{colSpan:"2"},c.a.createElement(Qe.a,{decodeAs:"dataURL",onUpload:t=>{try{Object(de.a)(e,t.map(([e,t])=>({poolPath:"static/".concat(t.name),data:{content:e,source:"embedded-global"}})))}catch(a){console.log("Error while adding file",a),alert("Encountered error while adding file:",a)}}},c.a.createElement(te.a,{size:"sm",block:!0,outline:!0,color:"muted",className:"hover-target"},c.a.createElement(_e.a,{icon:"plus"})))),c.a.createElement("td",null)))))};var xt=()=>c.a.createElement(c.a.Fragment,null,c.a.createElement("h4",{className:"mt-1"},"Storage in use"),c.a.createElement(vt,null),c.a.createElement("small",{className:"text-muted d-block mt-2"},"While storage is not strictly limited, we strongly recommend that studies use substantially less than 50 MB overall, and ideally below 20MB. This is not because of technical limitations but to reduce loading time and network traffic. If larger media are required, for example videos, these should be hosted outside of the study."),c.a.createElement("hr",null),c.a.createElement("h5",{className:"h5 mt-1"},"Study-wide static files"),c.a.createElement("p",{className:"text-muted"},"The following files are available study-wide from the ",c.a.createElement("code",null,"static")," directory."),c.a.createElement(wt,null)),Ot=a(397),jt=a.n(Ot);a(645);class kt extends c.a.Component{editorWillMount(e){e.editor.defineTheme("labjs",{base:"vs",inherit:!0,rules:[{token:"attribute.name",foreground:"0275d8"},{token:"attribute.value",foreground:"569cd6"},{token:"attribute.value.html",foreground:"569cd6"},{token:"comment",foreground:"999999"},{token:"comment.content",foreground:"999999"},{token:"comment.html",foreground:"999999"},{token:"comment.content.html",foreground:"999999"},{token:"keyword",foreground:"0275d8"},{token:"metatag.content",foreground:"0275d8"},{token:"metatag.content.html",foreground:"0275d8"},{token:"metatag.html",foreground:"999999"},{token:"property-name",foreground:"0275d8"},{token:"token.content",foreground:"0275d8"}],colors:{"editor.background":"#ffffff","editorIndentGuide.background":"#eceeef","editorLineNumber.foreground":"#818a91","editorRuler.foreground":"#eceeef"}})}editorDidMount(e,t){const n=e.getModel();n.updateOptions({tabSize:2}),"html"===this.props.language&&a.e(4).then(a.t.bind(null,922,7)).then(({default:e})=>{n.onDidChangeContent(Object(j.throttle)(()=>{const a=e.verify(n.getValue(),{"tagname-lowercase":!0,"attr-lowercase":!0,"attr-value-double-quotes":!0,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0,"attr-unsafe-chars":!0}).map(e=>({startLineNumber:e.line,startColumn:e.col,endLineNumber:e.line,endColumn:e.col+e.raw.length,message:e.message,severity:1}));t.editor.setModelMarkers(n,"custom-linter",a)},500))}).catch(e=>console.log("Couldn't load HTMLHint:",e))}render(){return c.a.createElement(jt.a,Object.assign({width:"100%",language:"html",value:"",theme:"labjs",editorDidMount:this.editorDidMount.bind(this),editorWillMount:this.editorWillMount.bind(this)},this.props,{options:Object(h.a)({contextmenu:!1,cursorBlinking:"solid",lineNumbers:!0,lineNumbersMinChars:4,overviewRulerLanes:0,rulers:[80],scrollbar:{useShadows:!1},scrollBeyondLastLine:!1,tabSize:2,wordWrap:"wordWrapColumn",wordWrapColumn:80,wrappingIndent:"indent",fontFamily:"Fira Mono",fontSize:18,lineHeight:26},this.props.options)}))}}a(646);const Nt=({tab:e})=>{const t=Object(m.d)(),a=t.getState().files.files;switch(e){case"meta":return c.a.createElement(pt,null);case"files":return c.a.createElement(xt,null);case"html":return c.a.createElement("div",{className:"d-flex flex-column",style:{minHeight:"60vh"}},c.a.createElement(kt,{key:"html",value:Object(T.d)(a["index.html"].content).data,onChange:e=>t.dispatch({type:"UPDATE_FILE",file:"index.html",data:{content:Object(T.b)(e,"text/html")}})}));case"css":return c.a.createElement("div",{className:"d-flex flex-column",style:{minHeight:"60vh"}},c.a.createElement(kt,{key:"css",height:"400",language:"css",value:Object(T.d)(a["style.css"].content).data,onChange:e=>t.dispatch({type:"UPDATE_FILE",file:"style.css",data:{content:Object(T.b)(e,"text/css")}})}));default:return c.a.createElement("div",null,"Requested tab not found")}};var Ct=({closeHandler:e})=>{const t=Object(o.useState)("meta"),a=Object(Q.a)(t,2),n=a[0],r=a[1];return(c.a.createElement("div",{className:"modal-content"},c.a.createElement(Se.a,{tabs:!0},c.a.createElement(De.b,{id:"meta",activeId:n,setId:r},c.a.createElement(_e.a,{icon:"info",weight:"s"})),c.a.createElement(De.b,{id:"files",activeId:n,setId:r},c.a.createElement(_e.a,{icon:"folder"})),c.a.createElement(De.b,{id:"html",activeId:n,setId:r},"HTML"),c.a.createElement(De.b,{id:"css",activeId:n,setId:r},"CSS"),c.a.createElement(De.a,{onClick:e})),c.a.createElement(Pe.a,null,c.a.createElement(Nt,{tab:n})),c.a.createElement(Ae.a,null,c.a.createElement(te.a,{outline:!0,color:"secondary",onClick:e},"Done"))))},Tt=a(773),St=({title:e,children:t,confirmLabel:a,confirmHandler:n,closeLabel:r,closeHandler:l})=>c.a.createElement("div",{className:"modal-content"},c.a.createElement(Tt.a,{toggle:l},e),c.a.createElement(Pe.a,null,t),c.a.createElement(Ae.a,null,c.a.createElement(te.a,{outline:!0,color:n?"secondary":"primary",onClick:l},r||"Cancel"),n?c.a.createElement(te.a,{outline:!0,color:"primary",onClick:n},a||"Okay"):null));const Pt=[[Object(j.isNil)(navigator.serviceWorker),c.a.createElement("li",null,"Your browser does not support ",c.a.createElement("a",{href:"http://caniuse.com/#feat=serviceworkers"},"service workers"),", which are required for the study preview. This might be because you are browsing in private mode \u2014 if your browser is up to date, please check whether private mode is active.")],[[Array.from,Object.entries].some(j.isNil),c.a.createElement("li",null,"The browser you are using does not support JavaScript features required by the builder. Please update or switch to a modern browser!")],[Object(j.isNil)(window.localStorage),c.a.createElement("li",null,"Your browser does not offer ",c.a.createElement("a",{href:"https://caniuse.com/#search=localstorage"},"local storage")," capabilities, which we use to keep a backup of your data when you leave the site. You are missing one of our safety nets, please make sure that you save regularly!")]].filter(e=>e[0]).map(e=>e[1]),At=e=>{Pt.length>0&&e.dispatch({type:"SHOW_MODAL",modalType:"SYSTEM_COMPATIBILITY",modalProps:{large:!1}})};var _t=a(282),Dt=a.n(_t);const It={fullscreen:{title:"Fullscreen",description:"Enable fullscreen mode for portions of the study",version:"0.1.0",path:"lab.plugins.Fullscreen",files:{},headers:[],options:{message:{label:"Message",type:"text",placeholder:"This experiment requires full screen display"},hint:{label:"Help text",type:"text",placeholder:"Please click to continue in full screen mode"}}},mousetrap:{title:"Mousetrap",description:"Mouse-tracking data collection",version:"0.1.0",path:"global.MousetrapPlugin",files:{},headers:[["comment",{content:"MousetrapPlugin"}],["script",{src:"https://mousetrap.felixhenninger.com/0.1.0/mousetrap.js"}]],options:{mode:{label:"Data format",type:"select",options:[{label:"Mousetrap default",coding:"mousetrap"},{label:"Event stream",coding:"events"}],default:"mousetrap",help:"Standard moustrap output or raw event stream"}}}},Ft=e=>It[e],Ht=e=>{const t=Object.entries(e.components).map(([e,t])=>t.plugins||[]).reduce((e,t)=>e.concat(t),[]),a=Object(j.uniqBy)(t,e=>e.type).map(e=>[e.type,Ft(e.type)]).filter(([,e])=>void 0!==e);return{pluginFiles:a.map(([e,t])=>((e={},t)=>Object(j.fromPairs)(Object.entries(e).map(([e,a])=>["".concat("lib/plugins","/").concat(t,"/").concat(e),a])))(t.files,e)).reduce((e,t)=>Object.assign(e,t),{}),pluginHeaders:a.map(([e,t])=>((e=[],t)=>e.map(([e,a])=>[e,Object(j.mapValues)(a,e=>"string"===typeof e?Object(j.template)(e)({pluginPath:"".concat("lib/plugins","/").concat(t)}):e)]))(t.headers,e)).reduce((e,t)=>e.concat(t),[]),pluginPaths:Object(j.fromPairs)(a.map(([e,t])=>[e,t.path]).filter(([,e])=>void 0!==e))}};var Lt=a(398),Mt=a.n(Lt);const Rt=(e,t)=>{if(void 0===t)return e;switch(t){case"string":return Object(j.toString)(e).trim();case"number":return""===e.trim()?null:Object(j.toNumber)(e);case"boolean":switch(e.trim()){case"true":return!0;case"false":return!1}default:return null}},Wt=/(^|[^\w])await\s+/m,Vt=new Function("return Object.getPrototypeOf(async function(){}).constructor")(),Bt=e=>e.match(Wt)?new Vt(e):new Function(e),Ut=e=>["".concat(e.event)+"".concat(e.filter?"(".concat(e.filter.trim(),")"):"")+"".concat(e.target?" ".concat(e.target.trim()):""),e.label.trim()],zt=e=>{const t=e.map(Ut);return Object(j.fromPairs)(t)},qt=e=>((e,t=null,a)=>e.rows.filter(e=>!e.every(e=>""===e.trim())).map(e=>e.map((e,t)=>Rt(e,a?a[t]:void 0))).map(a=>Object(j.fromPairs)(Object(j.zip)(t||e.columns,a))))(e,e.columns.map(e=>e.name.trim()),e.columns.map(e=>e.type)),Yt=(e,t)=>{switch(e){case"lab.canvas.Screen":return t.map(e=>Object(j.pick)(e,["type","left","top","angle","width","height","stroke","strokeWidth","fill","text","fontStyle","fontWeight","fontSize","fontFamily","lineHeight","textAlign","textBaseline","src","autoScale","label"]));default:return t}},Gt=(e,t)=>{const a=(e=>{const t=["skipCondition"],a=Object.assign({},Object(j.pickBy)(e,(e,a)=>""!==e&&!(a.startsWith("_")||t.includes(a))),{content:Yt(e.type,e.content),files:e.files?(c=e.files,Object(j.fromPairs)(c.map(e=>[e.localPath.trim(),e.poolPath.trim()]))):{},messageHandlers:e.messageHandlers?(o=e.messageHandlers,Object(j.fromPairs)(o.filter(e=>""!==e.message.trim()&&""!==e.code.trim()).map(e=>[e.message,Bt(e.code)]))):e.messageHandlers,parameters:e.parameters?(l=e.parameters,Object(j.fromPairs)(l.filter(e=>""!==e.name.trim()&&""!==e.value.trim()).map(e=>[e.name.trim(),Rt(e.value,e.type)]))):{},items:e.items?(r=e.items,r.filter(e=>""!==e.label).map(e=>["text","divider"].includes(e.type)?e:Object(h.a)({},e,{name:e.name||ie(e.label||"")}))):null,responses:e.responses?zt(e.responses):{},skip:e.skip||e.skipCondition||void 0,templateParameters:e.templateParameters?qt(e.templateParameters):e.templateParameters,shuffleGroups:e.templateParameters?(n=e.templateParameters.columns||[],Object.values(Object(j.groupBy)(n.filter(e=>void 0!==e.shuffleGroup),"shuffleGroup")).map(e=>e.map(e=>e.name))):e.shuffleGroups});var n,r,l,o,c;return Object(j.pickBy)(a,j.identity)})(e[t]);if(a){const t=Object.assign({},a);if(a.children){switch(a.type){case"lab.flow.Sequence":t.content=a.children.map(t=>Gt(e,t));break;case"lab.flow.Loop":Object(j.isEmpty)(a.children)||(t.template=Gt(e,a.children[0]));break;case"lab.canvas.Frame":case"lab.html.Frame":Object(j.isEmpty)(a.children)||(t.content=Gt(e,a.children[0]))}delete t.children}return delete t.id,t}return{}},Kt=e=>(e=>"// Define study\nconst study = lab.util.fromObject(".concat(e,")\n\n// Let's go!\nstudy.run()"))((e=>{const t=Gt(e.components,"root");return Mt()(t,{space:2})})(e)),Xt=([e,t={}])=>{if("comment"===e)return"\x3c!-- ".concat(t.content," --\x3e");{const a=document.createElement(e);return Object.entries(t).forEach(([e,t])=>a.setAttribute(e,t)),a.outerHTML}},Qt=(e,{beforeHeader:t=[],libraryPath:a="lib",dev:n=!1}={})=>[...t,...[["comment",{content:"lab.js library code"}],["script",{src:"".concat(a,"/").concat(n?"lab.dev.js":"lab.js"),"data-labjs-script":"library"}],["script",{src:"".concat(a,"/lab.fallback.js"),"data-labjs-script":"fallback"}],["link",{rel:"stylesheet",href:"".concat(a,"/lab.css")}],["comment",{content:"study code and styles"}],["script",{src:"script.js",defer:!0}],["link",{rel:"stylesheet",href:"style.css"}]]].map(Xt).map((e,t)=>0===t?e:"  ".concat(e)).join("\n"),Jt=(e,t)=>{const a=Object(T.d)(e.files.files["index.html"].content).data;return Object(j.template)(a,{escape:"",evaluate:""})({header:Qt(0,t)})};var $t=(e,t=(e=>e),{additionalFiles:a={},headerOptions:n={}}={})=>{const r=t(Object(j.cloneDeep)(e)),l=Object(de.b)(r.components),o=Object(j.pickBy)(r.files.files,(e,t)=>"embedded"!==e.source||l.includes(t)),c=Ht(r),s=c.pluginFiles,i=c.pluginHeaders,m=c.pluginPaths,d=Object(h.a)({},n,{beforeHeader:[...n.beforeHeader||[],...i]});return r.components=Object(j.mapValues)(r.components,e=>Object(h.a)({},e,{plugins:e.plugins?e.plugins.map(e=>Object(h.a)({},e,{path:Object.keys(m).includes(e.type)?m[e.type]:e.path})):e.plugins})),{files:Object(h.a)({},o,{},s,{},a,{"script.js":{content:Object(T.b)(Kt(r),"application/javascript")},"index.html":{content:Object(T.b)(Jt(r,d),"text/html")}}),bundledFiles:Object(j.fromPairs)(Object.entries(r.files.bundledFiles).map(([e,t])=>[e,Object(h.a)({source:e},t)]))}},Zt=a(399),ea=a.n(Zt);const ta=function(){var e=Object(l.a)(r.a.mark((function e({files:t,bundledFiles:a}){var n,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new ea.a,l=([e,t])=>{const a=Object(T.d)(t.content),r=a.data,l=a.base64;n.file(e,r,{base64:l})},Object.entries(t).forEach(l),e.next=5,Promise.all(Object.entries(a).map(([e,t])=>fetch("".concat("","/api/_defaultStatic/").concat(t.source)).then(t=>n.file(e,t.blob()))));case 5:return e.next=7,n.generateAsync({type:"blob"});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),aa=function(){var e=Object(l.a)(r.a.mark((function e(t,a="study_export.zip"){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ta(t,a);case 3:return n=e.sent,e.abrupt("return",Object(le.saveAs)(n,a));case 7:e.prev=7,e.t0=e.catch(0),X.b(t=>{t.setTag("scope","export"),X.a(e.t0)}),alert("Couldn't export bundle: ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),na=(e,t=(e=>e),a)=>aa($t(e,t,a),me(e)+"-export.zip");function ra(){const e=Object(b.a)(["\n    ","\n    ","\n\n    ","\n    Built by "," with [lab.js](https://lab.js.org)\n  "]);return ra=function(){return e},e}let la=(e,t,a,n)=>{switch(a){case 0:return t;case n.length-1:return 2===n.length?e+" and "+t:e+", and "+t;default:return e+", "+t}};const oa=e=>{const t=e.components.root.metadata,a=t.contributors?t.contributors.split("\n").map(e=>Dt()(e)).map(e=>e.url?"[".concat(e.name,"](").concat(e.url,")"):"".concat(e.name)).reduce(la):"excellent folks",n=Object(E.a)(ra(),t.title||"Study",Object(j.repeat)("=",t.title?t.title.length:5),t.description?"\n    ".concat(t.description,"\n\n    ----\n\n    "):"",a);return Object(T.b)(n)},ca=e=>{const t=e.components.root.metadata,a={name:t.title,exp_id:me(e),url:t.repository,description:t.description,contributors:t.contributors.split("\n").map(e=>e.trim()),template:"lab.js",instructions:"",time:5};return Object(T.b)(JSON.stringify(a,null,2))},sa=e=>(e.components.root.plugins=[...e.components.root.plugins,{type:"lab.plugins.Transmit",url:"/save",encoding:"form",updates:{incremental:!1},callbacks:{setup:function(){this.headers["X-CSRFToken"]=window.csrf_token},full:function(e){e&&e.ok&&(window.location="/next")}}}],e);var ia=function(){var e=Object(l.a)(r.a.mark((function e(t,{container:a=!0}={}){var n,l,o,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=$t(t,sa)).files["readme.md"]={content:oa(t)},n.files["config.json"]={content:ca(t)},l=a?"experiments/":"",o=me(t),c=(e,t,a)=>(e["".concat(l).concat(o,"/").concat(a)]=t,e),n.bundledFiles=Object(j.transform)(n.bundledFiles,c,{}),n.files=Object(j.transform)(n.files,c,{}),!a){e.next=18;break}return e.next=11,fetch("https://raw.githubusercontent.com/expfactory/builder-labjs/master/.circleci/config.yml");case 11:return s=e.sent,e.t0=T.b,e.next=15,s.text();case 15:e.t1=e.sent,e.t2=(0,e.t0)(e.t1),n.files[".circleci/config.yml"]={content:e.t2};case 18:aa(n);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var ma=({closeHandler:e})=>{const t=Object(m.d)();return(c.a.createElement(St,{title:c.a.createElement("span",null,"Export to ",c.a.createElement("strong",null,"the Experiment Factory")),closeHandler:e},c.a.createElement("p",null,c.a.createElement("strong",null,"The Experiment Factory ")," creates reproducible, reusable, and modular study containers. ",c.a.createElement("span",{className:"text-muted"},"If you're getting started, you'll want to start with a new container; alternatively, you can export the study by itself.")),c.a.createElement(ae.a,{vertical:!0,size:"l",className:"w-100"},c.a.createElement(te.a,{block:!0,color:"primary",className:"p-3",onClick:Object(l.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ia(t.getState());case 2:e();case 3:case"end":return a.stop()}}),a)})))},"Export study in a ",c.a.createElement("strong",null,"new container")),c.a.createElement(te.a,{block:!0,outline:!0,color:"secondary",className:"p-3",onClick:Object(l.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ia(t.getState(),{container:!1});case 2:e();case 3:case"end":return a.stop()}}),a)})))},"Export study for use in an ",c.a.createElement("strong",null,"existing container")))))},da=a(404),pa=a(733);function ua(){const e=Object(b.a)(["\n  # Enforce HTTPS for subdomain url\n  http://","   https://","          301\n  http://","/* https://","/:splat   301\n\n  # Rewrite paths to create multi-site entries\n  /e/:entry   /e/:entry/index.html              302\n  /e/:entry/* /:splat                           200\n"]);return ua=function(){return e},e}const ha=e=>{const t=Object(T.d)(e.files.files["index.html"].content),a=t.data,n=t.mime;return e.files.files["index.html"].content=Object(T.b)(a.replace("</body>",'\n  <form name="labjs-data" netlify netlify-honeypot="bot-field" hidden>\n    <input name="bot-field">\n    <input type="text" name="dataRaw" />\n    <input type="file" name="dataFile" />\n  </form>\n</body>'),n),e.components.root.plugins=[...e.components.root.plugins,{type:"lab.plugins.Submit"}],e},ba=({site:e})=>Object(T.b)(Object(E.a)(ua(),e,e,e,e));var Ea=(e,t)=>((e,t=(e=>e),a)=>ta($t(e,t,a)))(e,ha,{_redirects:{content:ba(t)}});const fa=e=>e?64!==e.length?"The keys are typically 64 characters long":void 0:"We'll need a API key to upload the study",ga=Object(o.forwardRef)(({onSubmit:e},t)=>c.a.createElement(lt.e,{initialValues:{site:"",apiKey:""},onSubmit:e},({errors:e,touched:a})=>c.a.createElement(lt.d,{ref:t},c.a.createElement(ot.a,null,c.a.createElement(ct.a,{for:"site"},"Study domain/site"," ",c.a.createElement("small",{className:"text-muted"},"(optional)")),c.a.createElement(lt.b,{name:"site",id:"site",placeholder:"random-domain-name.netlify.com",component:it.c,className:"text-monospace"}),c.a.createElement(st.a,{color:"muted"},"If you've previously created ",c.a.createElement("a",{href:"https://app.netlify.com/account/sites",target:"_blank",rel:"noopener noreferrer"},"a site for your study"),", you can enter the domain here. Leave empty to create a new site with a preliminary domain name.")),c.a.createElement(ot.a,null,c.a.createElement(ct.a,{for:"apiKey"},"API access code"),c.a.createElement(lt.b,{name:"apiKey",id:"apiKey",component:it.c,className:"text-monospace",validate:fa}),e.apiKey&&a.apiKey&&c.a.createElement(st.a,{color:"danger"},e.apiKey),c.a.createElement(st.a,{color:"muted"},"You'll need to ",c.a.createElement("a",{href:"https://app.netlify.com/account/applications",target:"_blank",rel:"noopener noreferrer"},"create an API token")," or enter an existing one. We don't save or share this information, so make sure to jot it down!")))));class ya extends o.Component{constructor(){super(),this.state={widgetState:"form"},this.formRef=Object(o.createRef)()}triggerSubmit(){Object(s.findDOMNode)(this.formRef.current).requestSubmit()}send(e){var t=this;return Object(l.a)(r.a.mark((function a(){var n,l,o,c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.setState({widgetState:"submitting"}),n=e.site?"https://api.netlify.com/api/v1/sites/".concat(e.site,"/deploys"):"https://api.netlify.com/api/v1/sites",a.next=4,Ea(t.context.store.getState(),{site:e.site});case 4:return l=a.sent,a.prev=5,a.next=8,fetch(n,{method:"post",headers:{"Content-Type":"application/zip",Authorization:"Bearer ".concat(e.apiKey)},body:l});case 8:if(!(o=a.sent).ok){a.next=16;break}return a.next=12,o.json();case 12:c=a.sent,t.setState({widgetState:"done",site_url:c.ssl_url||"https://".concat(c.subdomain,".netlify.com/"),admin_url:c.admin_url||"https://app.netlify.com/sites/".concat(c.subdomain,"/"),statusCode:o.status,statusText:o.statusText}),a.next=17;break;case 16:t.setState({widgetState:"error",statusCode:o.status,statusText:o.statusText});case 17:a.next=23;break;case 19:a.prev=19,a.t0=a.catch(5),t.setState({widgetState:"error_transmission",statusCode:void 0,statusText:void 0}),console.log("transmission error",a.t0);case 23:case"end":return a.stop()}}),a,null,[[5,19]])})))()}render(){switch(this.state.widgetState){case"submitting":return c.a.createElement("div",{className:"text-center"},c.a.createElement(_e.a,{icon:"spinner-third",className:"fa-spin"}));case"done":return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,c.a.createElement("strong",{className:"text-success"},"Uploaded study.")," The final deployment is now in the hands of Netlify, and may take a few moments to complete."),c.a.createElement(Se.a,{vertical:!0},c.a.createElement(da.a,null,c.a.createElement(pa.a,{href:this.state.site_url,target:"_blank",rel:"noopener noreferrer"},"Open study")),c.a.createElement(da.a,null,c.a.createElement(pa.a,{href:this.state.admin_url,target:"_blank",rel:"noopener noreferrer"},"Site settings"))));case"error":return c.a.createElement("p",null,c.a.createElement("strong",{className:"text-warning"},"Something went wrong.")," We got an error ",c.a.createElement("code",null,this.state.statusCode),", which means ",this.state.statusText,". Please take a look at your ",c.a.createElement("a",{href:"https://app.netlify.com",target:"_blank",rel:"noopener noreferrer"},"Dashboard")," for more detailed information.");case"error_transmission":return c.a.createElement("p",null,c.a.createElement("strong",{className:"text-danger"},"Something went wrong.")," We can't tell exactly what happened, but the transfer of the study to Netlify was cancelled. Could you check your login credentials? Otherwise please take a look at your ",c.a.createElement("a",{href:"https://app.netlify.com",target:"_blank",rel:"noopener noreferrer"},"Dashboard")," for more detailed information.");default:return c.a.createElement(ga,{ref:this.formRef,onSubmit:e=>this.send(e)})}}}ya.contextType=m.b;var va=ya;var wa=({closeHandler:e})=>{let t=c.a.createRef();return(c.a.createElement(St,{title:c.a.createElement("span",null,"Upload to Netlify"),closeLabel:"Close",closeHandler:e,confirmLabel:"Upload",confirmHandler:()=>{t.current.triggerSubmit()}},c.a.createElement("p",null,c.a.createElement("strong",null,c.a.createElement("a",{href:"https://www.netlify.com/",target:"_blank",rel:"noopener noreferrer"},"Netlify")," will host your study for you and take care of data collection.")," Their service is very easy to use, free for basic studies, and inexpensive for large ones."),c.a.createElement("p",null,"To use Netlify, you'll need to ",c.a.createElement("a",{href:"https://app.netlify.com/signup",target:"_blank",rel:"noopener noreferrer"},"set up an account")," with them. Our documentation describes in more detail ",c.a.createElement("a",{href:"http://labjs.readthedocs.io/en/latest/learn/deploy/4-netlify.html",target:"_blank",rel:"noopener noreferrer"},"how to do that"),"."),c.a.createElement("hr",null),c.a.createElement(va,{ref:t})))};class xa extends o.Component{constructor(){super(),this.state={widgetState:"dormant"}}submit(){var e=this;return Object(l.a)(r.a.mark((function t(){var a,n,l,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({widgetState:"submitting"}),a=e.context.store.getState(),n=pe(a),(l=new window.FormData).append("script",new Blob([n],{type:"application/json;charset=utf-8"}),"labjs-study.json"),l.append("name",a.components.root.metadata.title||"Unnamed study"),l.append("description",a.components.root.metadata.description),t.prev=7,t.next=10,fetch("https://open-lab.online/tests/labjs",{method:"POST",body:l});case 10:(o=t.sent).ok?e.setState({widgetState:"done",site_url:o.url,statusCode:o.status,statusText:o.statusText}):e.setState({widgetState:"error",statusCode:o.status,statusText:o.statusText}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(7),e.setState({widgetState:"error_transmission",statusCode:void 0,statusText:void 0}),console.log("transmission error",t.t0);case 18:case"end":return t.stop()}}),t,null,[[7,14]])})))()}render(){switch(this.state.widgetState){case"submitting":return c.a.createElement("div",{className:"text-center"},c.a.createElement(_e.a,{icon:"spinner-third",className:"fa-spin"}));case"done":return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,c.a.createElement("strong",{className:"text-success"},"Uploaded study.")," Please finalize the transfer by following the link below."),c.a.createElement("a",{className:"btn btn-outline-primary btn-lg btn-block",href:this.state.site_url,target:"_blank",rel:"noopener noreferrer"},"Manage study on Open Lab"));case"error":return c.a.createElement("p",null,c.a.createElement("strong",{className:"text-warning"},"Something went wrong during transmission.")," Open Lab sent us an error ",c.a.createElement("code",null,this.state.statusCode),", which means ",this.state.statusText,".");case"error_transmission":return c.a.createElement("p",null,c.a.createElement("strong",{className:"text-danger"},"Something went wrong.")," We can't tell exactly what happened, but the transfer of the study to Open Lab was cancelled. Could you check your connection?");default:return null}}}xa.contextType=m.b;var Oa=xa;var ja=({closeHandler:e})=>{let t=c.a.createRef();return(c.a.createElement(St,{title:c.a.createElement("span",null,"Upload to Open Lab"),closeLabel:"Close",closeHandler:e,confirmLabel:"Upload",confirmHandler:()=>{t.current.submit()}},c.a.createElement("p",null,c.a.createElement("strong",null,c.a.createElement("a",{href:"https://www.open-lab.online/",target:"_blank",rel:"noopener noreferrer"},"Open Lab"))," takes care of running your experiment and collecting, storing and managing data. It supports collaboration in projects, customization of task parameters and invitation of participants. The basic version of the application is available for free. "),c.a.createElement(Oa,{ref:t})))};const ka={"backend.php":{content:Object(T.b)("<?php\n\n// Define path for the database file\ndefine('DB_PATH', getcwd() . '/data/data.sqlite');\n\n// Establish a database connection\n$db = new PDO('sqlite:' . DB_PATH);\n\n// Throw exceptions when errors occur\n$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\n// Create table, if necessary\n$db->exec(\n  'CREATE TABLE IF NOT EXISTS labjs (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    session TEXT,\n    timestamp TEXT,\n    url TEXT,\n    metadata TEXT,\n    data TEXT\n  )'\n);\n\n// Establish or continue session\nsession_start([\n  'cookie_lifetime' => 86400, // 24 hours\n  'cookie_httponly' => true,  // Not accessible via JavaScript\n  'read_and_close'  => true,  // Extract information and remove lock\n]);\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n  // Decode transmitted data\n  $data = json_decode(file_get_contents('php://input'), true);\n\n  // (Cursory) validity check\n  if (is_array($data)) {\n    // Setup prepared statement\n    $insert =\n      'INSERT INTO labjs (session, timestamp, url, metadata, data)\n       VALUES (:session, :timestamp, :url, :metadata, :data)';\n    $stmt = $db->prepare($insert);\n\n    // Insert data\n    $stmt->execute(array(\n      ':session' => session_id() ?: 'unknown',\n      ':timestamp' => date('c'),\n      ':url' => isset($data['url']) ? $data['url'] : 'none',\n      ':metadata' => isset($data['metadata']) ? json_encode($data['metadata']) : 'none',\n      ':data' => isset($data['data']) ? json_encode($data['data']) : 'none'\n    ));\n\n    http_response_code(200);\n  } else {\n    http_response_code(400);\n  }\n\n} else {\n  http_response_code(405);\n}\n\n?>","application/php")},"data/.htaccess":{content:Object(T.b)("Deny from all","text/plain")}},Na=e=>(e.components.root.plugins=[...e.components.root.plugins,{type:"lab.plugins.Transmit",url:"backend.php"}],e);const Ca=e=>(e.components.root.plugins=[...e.components.root.plugins,{type:"lab.plugins.PostMessage"}],e);const Ta=({url:e})=>{const t=Object(o.useState)({state:"empty",content:""}),a=Object(Q.a)(t,2),n=a[0],s=a[1],i=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.text();case 6:n=e.sent,s({state:"loaded",content:n}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),s({state:"error"});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)(()=>{i(e)},[e]),c.a.createElement("div",{dangerouslySetInnerHTML:{__html:n.content}})};const Sa={ADD_COMPONENT:({parent:e,index:t,closeHandler:a})=>{const n=Object(o.useState)("new"),r=Object(Q.a)(n,2),l=r[0],s=r[1];return(c.a.createElement("div",{className:"modal-content"},c.a.createElement(Se.a,{tabs:!0},c.a.createElement(De.b,{id:"new",activeId:l,setId:s},c.a.createElement(_e.a,{icon:"plus",weight:"s"})),c.a.createElement(De.b,{id:"copy",activeId:l,setId:s},c.a.createElement(_e.a,{icon:"clone",fallbackWeight:"r"})),c.a.createElement(De.b,{id:"template",activeId:l,setId:s},c.a.createElement(_e.a,{icon:"box-open",fallbackWeight:"s"})),c.a.createElement(De.b,{id:"import",activeId:l,setId:s},c.a.createElement(_e.a,{icon:"folder-open",fallbackWeight:"r"})),c.a.createElement(De.a,{onClick:a})),c.a.createElement(Pe.a,null,c.a.createElement(rt,{tab:l,parent:e,index:t})),c.a.createElement(Ae.a,null,c.a.createElement(te.a,{outline:!0,color:"secondary",onClick:a},"Cancel"))))},OPTIONS:Ct,SYSTEM_COMPATIBILITY:({closeHandler:e})=>c.a.createElement(St,{title:"You're missing out!",closeLabel:"Continue",closeHandler:e},c.a.createElement("p",null,c.a.createElement("strong",{className:"text-danger"},"For the ",c.a.createElement("code",null,"lab.js")," builder to work as it should, it needs functionality that is not available in your browser.")," You'll get the most out of the builder by using ",c.a.createElement("a",{href:"https://getfirefox.com",className:"font-weight-bold"},"Firefox")," or ",c.a.createElement("a",{href:"https://www.google.com/intl/en/chrome/",className:"font-weight-bold"},"Chrome"),"."),c.a.createElement("p",null,"Here's what we found:"),c.a.createElement("ul",{style:{paddingLeft:"1.5rem"}},Pt),c.a.createElement("p",null,c.a.createElement("strong",{className:"text-primary"},"The studies you design will work fine on a much larger range of systems")," \u2014 it's just the builder interface that requires more capabilities.")),EXPORT_EXPFACTORY:ma,EXPORT_NETLIFY:wa,EXPORT_OPENLAB:ja,EXPORT_PHP:({closeHandler:e})=>{const t=Object(m.d)();return(c.a.createElement(St,{title:c.a.createElement("span",null,"Export with ",c.a.createElement("code",null,"PHP")," backend"),confirmLabel:"Continue to download",confirmHandler:()=>{var a;a=t.getState(),na(a,Na,{additionalFiles:ka}),e()},closeHandler:e},c.a.createElement("p",null,c.a.createElement("strong",null,"You are about to download the study with a ",c.a.createElement("code",null,"PHP")," backend.")," It contains code that will run on your server and collect the data as it accumulates."),c.a.createElement(ee.a,{color:"danger"},c.a.createElement("strong",null,"Though we do our best, we cannot take responsibility for code the runs on your server.")," Please make sure to ",c.a.createElement("a",{href:"http://labjs.readthedocs.io/en/latest/learn/deploy/",className:"alert-link font-weight-bold",target:"_blank",rel:"noopener noreferrer"},"consult the documentation on how to set up data collection correctly"),", and ask your friendly neighborhood IT staff if you're unsure.")))},EXPORT_PM:({closeHandler:e})=>{const t=Object(m.d)();return(c.a.createElement(St,{title:c.a.createElement("span",null,"Export for ",c.a.createElement("strong",null,"generic survey software")),confirmLabel:"Continue to download",confirmHandler:()=>{var a;a=t.getState(),na(a,Ca),e()},closeHandler:e},c.a.createElement("p",null,c.a.createElement("strong",null,"The copy you're about to download is set up to work with most third-party survey tools")," (e.g. ",c.a.createElement("a",{href:"https://www.limesurvey.org/",target:"_blank",rel:"noopener noreferrer"},"LimeSurvey"),", ",c.a.createElement("a",{href:"https://qualtrics.com/",target:"_blank",rel:"noopener noreferrer"},"Qualtrics")," or ",c.a.createElement("a",{href:"https://www.soscisurvey.com/",target:"_blank",rel:"noopener noreferrer"},"SoSci"),"). This is useful if you're planning to run the study you're building as part of a survey or a larger questionnaire."),c.a.createElement("p",null,"Please check out our documentation to ",c.a.createElement("a",{href:"https://labjs.readthedocs.io/en/latest/learn/deploy/3-third-party.html",target:"_blank",rel:"noopener noreferrer"},"find out how to use ",c.a.createElement("code",null,"lab.js")," in combination with third-party software"),".")))},LEGAL:({closeHandler:e})=>c.a.createElement(St,{title:c.a.createElement("span",null,"Legal"),closeLabel:"Done",closeHandler:e},c.a.createElement(Ta,{url:"/content/legal.html"}))},Pa={OPTIONS:"xl"};var Aa=Object(m.c)(e=>e.modal,{hideModal:()=>({type:"HIDE_MODAL"})})(({modalType:e,modalProps:t,hideModal:a})=>{const n=Sa[e];return(c.a.createElement(Ce.a,{isOpen:null!==e,onRequestClose:a,modalProps:Object(h.a)({size:Pa[e]||"md"},t)},void 0!==n?c.a.createElement(n,Object.assign({},t,{closeHandler:a})):""))});const _a=navigator.platform.startsWith("Mac")?"metaKey":"ctrlKey";class Da extends o.Component{constructor(e){super(e),this.handleKeyDown=this.handleKeyDown.bind(this)}handleKeyDown(e){e[_a]&&"s"===e.key?(e.preventDefault(),e.repeat||ue(this.context.store.getState(),{removeInternals:e.shiftKey})):e[_a]&&"p"===e.key?(window.dispatchEvent(new Event("preview:preempt")),e.preventDefault(),window.dispatchEvent(new Event("preview:show"))):"Backspace"===e.key&&e.target===document.body&&e.preventDefault()}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){return null}}Da.contextType=m.b;var Ia=Da;const Fa=c.a.createContext({previewState:void 0}),Ha=({value:e,children:t})=>c.a.createElement(Fa.Provider,{value:e},t),La=["lib/lab.css","lib/lab.dev.js","lib/lab.js","lib/lab.js.map","lib/lab.legacy.js","lib/lab.legacy.js.map","lib/lab.fallback.js","lib/loading.svg"],Ma=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open("labjs-preview");case 2:return t=e.sent,e.next=5,t.addAll(La.map(e=>"".concat("","/api/_defaultStatic/").concat(e)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ra=function(){var e=Object(l.a)(r.a.mark((function e(t,[a,{content:n,type:l}],o){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.put(new Request("/api/".concat(o,"/").concat(a)),new Response(Object(T.a)(n)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Wa=function(){var e=Object(l.a)(r.a.mark((function e(t,[a,n],l){var o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.match("/api/_defaultStatic/".concat(a));case 2:if(e.t1=o=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==o;case 6:if(!e.t0){e.next=10;break}e.t2=o,e.next=13;break;case 10:return e.next=12,fetch("/api/_defaultStatic/".concat(a));case 12:e.t2=e.sent;case 13:return c=e.t2,e.next=16,t.put(new Request("/api/".concat(l,"/").concat(a)),c);case 16:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Va=function(){var e=Object(l.a)(r.a.mark((function e(t,a,n={},l="labjs_preview"){var o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open("labjs-preview");case 2:return o=e.sent,e.next=5,o.keys().then(e=>Promise.all(e.map(e=>e.url.includes("_defaultStatic")?null:o.delete(e))));case 5:return e.prev=5,c=$t(t,a,n),e.next=9,Promise.all([...Object.entries(c.files).map(e=>Ra(o,e,l)),...Object.entries(c.bundledFiles).map(e=>Wa(o,e,l)),Wa(o,["lib/lab.dev.js",{type:"application/javascript"}],l)]);case 9:console.log("Preview cache updated successfully"),e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(5),console.log("Error during preview cache update: ".concat(e.t0)),!W.some(t=>e.t0.message.includes(t))){e.next=18;break}e.next=20;break;case 18:throw X.b(t=>{t.setTag("scope","preview-cache"),X.a(e.t0)}),e.t0;case 20:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,a){return e.apply(this,arguments)}}(),Ba=e=>(e.components.root.plugins=[...e.components.root.plugins,{type:"lab.plugins.Debug",filePrefix:"".concat(me(e),"-preview")}],e),Ua=e=>(e.components.root.plugins=[...e.components.root.plugins,{type:"lab.plugins.Download",filePrefix:me(e)}],e);class za{constructor(e,t){this.url=e,this.stateChangeCallback=t,this.window=null,window.addEventListener("beforeunload",()=>{this.close()})}open(){this.window=window.open("".concat("","/api/_defaultStatic/empty.html"),"labjs_preview","menubar=no,location=no,resizable=yes,scrollbars=yes,status=no"),this.window.addEventListener("unload",()=>this.checkWindow(),{once:!0}),this.stateChangeCallback("opened")}close(){this.window&&this.window.close()}reload(e){this.window&&(this.window.location.href=e||this.url)}focus(){this.window.focus()}openOrFocus(){null===this.window||this.window.closed?this.open():this.focus()}checkWindow(){window.setTimeout(()=>{null===this.window||this.window.closed?(this.window=null,this.stateChangeCallback("closed")):this.window.addEventListener("unload",()=>this.checkWindow(),{once:!0})},25)}}class qa extends o.Component{constructor(e){super(e),this.state={windowState:"closed"},this.previewWindow=new za("".concat("","/api/labjs_preview/index.html"),e=>this.setState({windowState:e})),this.button=c.a.createRef(),this.openPreview=this.openPreview.bind(this),this.simulateClick=this.simulateClick.bind(this)}componentDidMount(){window.addEventListener("preview:show",this.simulateClick)}componentWillUnmount(){window.removeEventListener("preview:show",this.simulateClick)}simulateClick(){this.button.current.onClick()}openPreview(e){var t=this;return Object(l.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.previewWindow.openOrFocus(),a.prev=1,a.next=4,Va(e.getState(),e=>Ua(Ba(e)),{headerOptions:{dev:!0}});case 4:t.previewWindow.reload(),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(1),t.previewWindow.close(),"QuotaExceededError"===a.t0.name?alert("Sorry, we couldn't generate the preview because the browser wouldn't allow us to use storage space. Could you check whether there's room on your hard drive?"):(console.log("Received error while generating preview: ".concat(a.t0)),X.b(e=>{e.setTag("scope","preview"),X.a(a.t0)}),alert("Sorry, an error occured while we were trying "+"to put together the study preview: ".concat(a.t0)));case 11:case"end":return a.stop()}}),a,null,[[1,7]])})))()}render(){const e=this.state.windowState;return(c.a.createElement(Fa.Consumer,null,({previewActive:t})=>c.a.createElement(m.b.Consumer,null,({store:a})=>c.a.createElement(te.a,{color:"primary",ref:this.button,onClick:()=>this.openPreview(a),onMouseEnter:()=>{if(t){const e=new Event("preview:preempt");window.dispatchEvent(e)}},disabled:!t},c.a.createElement(_e.a,{icon:"closed"===e?"play":"sync-alt",weight:"s"})))))}}var Ya=a(737),Ga=a(785),Ka=a(774),Xa=a(775),Qa=a(285),Ja=a.n(Qa);function $a(){const e=Object(b.a)(["\n      var resultJson = study.options.datastore.exportJson();\n      jatos.submitResultData(resultJson, jatos.startNextComponent);\n    "]);return $a=function(){return e},e}const Za=e=>{const t=e.components.root.metadata,a=me(e),n={version:"3",data:{uuid:Ja()(),title:t.title||"Unnamed study",description:t.description||"",groupStudy:!1,dirName:a,comments:"",jsonData:null,componentList:[{uuid:Ja()(),title:t.title||"Unamed study",htmlFilePath:"index.html",reloadable:!0,active:!0,comments:"",jsonData:null}],batchList:[{uuid:Ja()(),title:"Default",active:!0,maxActiveMembers:null,maxTotalMembers:null,maxTotalWorkers:null,allowedWorkerTypes:null,comments:null,jsonData:null}]}};return Object(T.b)(JSON.stringify(n,null,2))},en=(e,t)=>e=(e=(e=(e=e.replace(/^(\s*)<script src="[\d\w\/\.]+" data-labjs-script="library"><\/script>/gm,'$&\n$1<script src="/assets/javascripts/jatos.js"><\/script>')).replace(/lib\/lab/g,"/study_assets/".concat(t,"/lib/lab"))).replace("script.js","/study_assets/".concat(t,"/script.js"))).replace("style.css","/study_assets/".concat(t,"/style.css")),tn=e=>e.replace("study.run()","jatos.onLoad(() => study.run())"),an=e=>(e.components.root.messageHandlers=e.components.root.messageHandlers||{rows:[]},e.components.root.messageHandlers.push([{title:"JATOS integration",message:"epilogue",code:Object(E.a)($a())}]),e);const nn=e=>(e.components.root.plugins=[...e.components.root.plugins,{type:"global.Pavlovia"}],e),rn={beforeHeader:[["comment",{content:"pavlovia.org dependencies"}],["script",{type:"text/javascript",src:"lib/vendors/jquery-2.2.0.min.js"}],["script",{type:"text/javascript",src:"lib/labjs-pavlovia-3.0.0.js"}]],libraryPath:"lab.js"};const ln=e=>e.contributors.split("\n").map(e=>Dt()(e)).filter(e=>e.name&&""!==e.name).map(e=>Object(h.a)({"@type":"Person"},e)),on=[{"@type":"PropertyValue",name:"sender",description:"Name of component or screen in the study that generated the current data row"},{"@type":"PropertyValue",name:"sender_type",description:"Type of component that generated the current data row"},{"@type":"PropertyValue",name:"sender_id",description:"Position of component in the study hierarchy"},{"@type":"PropertyValue",name:"timestamp",description:"Time and date of data storage"},{"@type":"PropertyValue",name:"meta",description:"Technical browser metadata"},{"@type":"PropertyValue",name:"correct",description:"Response veracity"},{"@type":"PropertyValue",name:"duration",description:"Component presentation duration",unitCode:"C26",unitText:"milliseconds",minValue:0},{"@type":"PropertyValue",name:"ended_on",description:"Reason for component end",levels:["response","timeout","skipped"]},{"@type":"PropertyValue",name:"response",description:"Participant response"},{"@type":"PropertyValue",name:"time_commit",description:"Timestamp of data logging",unitCode:"C26",unitText:"milliseconds",minValue:0},{"@type":"PropertyValue",name:"time_end",description:"Frame timestamp at which component presentation ended",unitCode:"C26",unitText:"milliseconds",minValue:0},{"@type":"PropertyValue",name:"time_render",description:"Frame timestamp at which component was rendered",unitCode:"C26",unitText:"milliseconds",minValue:0},{"@type":"PropertyValue",name:"time_run",description:"Timestamp at which component was initialized",unitCode:"C26",unitText:"milliseconds",minValue:0},{"@type":"PropertyValue",name:"time_show",description:"Frame timestamp at which component was shown on screen",unitCode:"C26",unitText:"milliseconds",minValue:0},{"@type":"PropertyValue",name:"time_switch",description:"Frame timestamp at which the next component was shown",unitCode:"C26",unitText:"milliseconds",minValue:0},{"@type":"PropertyValue",name:"url",description:"Page URL from which study was loaded"}],cn=e=>JSON.stringify((e=>{const t=e.components.root.metadata;return{"@context":"http://schema.org","@type":"Dataset",schemaVersion:"Psych-DS 0.1.0",name:"".concat(t.title||"Study"," dataset"),description:t.description,creator:ln(t),variableMeasured:on}})(e),null,2);var sn=()=>{const e=Object(o.useState)(!1),t=Object(Q.a)(e,2),a=t[0],n=t[1],r=Object(m.d)();return c.a.createElement(Ya.a,{isOpen:a,toggle:()=>n(!a)},c.a.createElement(te.a,{id:"caret",outline:!0,color:"secondary",onClick:e=>ue(r.getState(),{removeInternals:e.shiftKey})},c.a.createElement(_e.a,{icon:"save",weight:"l",fallbackWeight:"r"})),c.a.createElement(Ga.a,{caret:!0,split:!0,outline:!0,color:"secondary"}),c.a.createElement(Ka.a,null,c.a.createElement(Xa.a,{header:!0},"Study"),c.a.createElement(Xa.a,{onClick:()=>{window.confirm("Are you sure you want to reset the study?")&&r.dispatch({type:"RESET_STATE"})}},"New"),c.a.createElement(Qe.a,{accept:"application/json",multiple:!1,maxSize:255*Math.pow(1024,2),onUpload:([[e]])=>{try{const t=R(e);r.dispatch({type:"HYDRATE",state:t})}catch(t){alert("Couldn't load file, found error",t)}finally{n(!1)}},className:"dropdown-item"},"Open"),c.a.createElement(Xa.a,{onClick:e=>ue(r.getState(),{removeInternals:e.shiftKey})},"Save"),c.a.createElement(Xa.a,{divider:!0}),c.a.createElement(Xa.a,{header:!0},"Export for local use"),c.a.createElement(Xa.a,{onClick:()=>{return e=r.getState(),na(e,Ua);var e}},"Offline data collection"),c.a.createElement(Xa.a,{divider:!0}),c.a.createElement(Xa.a,{header:!0},"Deploy study online"),c.a.createElement(Xa.a,{onClick:()=>r.dispatch({type:"SHOW_MODAL",modalType:"EXPORT_PHP",modalProps:{}})},"Generic web host\u2026 ",c.a.createElement("span",{className:"text-muted"},"(PHP backend)")),c.a.createElement(Xa.a,{onClick:()=>r.dispatch({type:"SHOW_MODAL",modalType:"EXPORT_NETLIFY",modalProps:{}})},"Upload to Netlify\u2026 ",c.a.createElement("span",{className:"text-muted"},"(cloud provider)")),c.a.createElement(Xa.a,{onClick:()=>r.dispatch({type:"SHOW_MODAL",modalType:"EXPORT_OPENLAB",modalProps:{}})},"Upload to Open Lab\u2026"),c.a.createElement(Xa.a,{divider:!0}),c.a.createElement(Xa.a,{header:!0},"Export as integration"),c.a.createElement(Xa.a,{onClick:()=>r.dispatch({type:"SHOW_MODAL",modalType:"EXPORT_PM",modalProps:{}})},"Generic survey tools\u2026 ",c.a.createElement("span",{className:"text-muted"},"(Qualtrics, etc.)")),c.a.createElement(Xa.a,{onClick:()=>(e=>{const t=$t(e,an),a=me(e);t.files["index.html"].content=Object(T.f)(t.files["index.html"].content,en,a),t.files["script.js"].content=Object(T.f)(t.files["script.js"].content,tn);const n=(e,t,n)=>(e["".concat(a,"/").concat(n)]=t,e);t.bundledFiles=Object(j.transform)(t.bundledFiles,n,{}),t.files=Object(j.transform)(t.files,n,{}),t.files["".concat(a,".jas")]={content:Za(e)},aa(t)})(r.getState())},"JATOS ",c.a.createElement("span",{className:"text-muted"},"(Just Another Tool for Online Studies)")),c.a.createElement(Xa.a,{onClick:()=>(e=>{const t=$t(e,nn,{headerOptions:rn}),a=me(e)+"-pavlovia.zip";return t.bundledFiles=Object(j.transform)(t.bundledFiles,(e,t,a)=>(e[a.replace(/^lib/,rn.libraryPath)]=t,e),{}),aa(t,a)})(r.getState())},"Pavlovia"),c.a.createElement(Xa.a,{onClick:()=>r.dispatch({type:"SHOW_MODAL",modalType:"EXPORT_EXPFACTORY",modalProps:{}})},"The Experiment Factory\u2026 ",c.a.createElement("span",{className:"text-muted"},"(v3)")),c.a.createElement(Xa.a,{divider:!0}),c.a.createElement(Xa.a,{header:!0},"Generate metadata"),c.a.createElement(Xa.a,{onClick:()=>(e=>{const t=new Blob([cn(e)],{type:"application/ld+json;charset=utf-8"});return Object(le.saveAs)(t,"dataset_description.json")})(r.getState())},"Psych-DS sidecar template"," ",c.a.createElement("span",{className:"text-muted"},"(JSON-LD)"))))};a(701);var mn=Object(m.c)(null,{showModal:e=>({type:"SHOW_MODAL",modalType:e})})(({showModal:e})=>c.a.createElement("div",{className:"toolbar"},c.a.createElement(ae.a,null,c.a.createElement(qa,null))," ",c.a.createElement(ae.a,null,c.a.createElement(sn,null))," ",c.a.createElement(ae.a,null,c.a.createElement(te.a,{outline:!0,color:"secondary",onClick:()=>e("OPTIONS")},c.a.createElement(_e.a,{icon:"sliders-h",weight:"l"}))))),dn=a(92),pn=a.n(dn);class un extends o.Component{getChildContext(){return{onNodeClick:this.props.onNodeClick,onNodeAdd:this.props.onNodeAdd,onNodeDelete:this.props.onNodeDelete,onNodeDuplicate:this.props.onNodeDuplicate}}render(){const e=this.props,t=e.Node,a=e.rootId;return(c.a.createElement(t,{id:a,renderBody:!1,parentId:null}))}}un.childContextTypes={onNodeClick:pn.a.func,onNodeAdd:pn.a.func,onNodeDelete:pn.a.func,onNodeDuplicate:pn.a.func};var hn=un,bn=(a(704),({pinned:e,onClick:t})=>c.a.createElement("div",{className:"addButton ".concat(e?"addButton-pinned":""),onClick:t},c.a.createElement(_e.a,{icon:"plus"}))),En=a(324);a(705);const fn=(e,t)=>Object(oe.c)(t.id,e.components),gn=Object(En.a)(En.b,j.isEqual);var yn=Object(j.flow)(Object(Y.DropTarget)("node",{drop:(e,t,a)=>{const n=t.getItem(),r=n.id,l=n.parentId,o=n.index,c=e.id,s=e.index;e.dispatch({type:"MOVE_COMPONENT",id:r,oldParent:l,oldIndex:o,newParent:c,newIndex:s})},canDrop:(e,t)=>{const a=t.getItem();return!(a.parentId===e.id&&(a.index===e.index||a.index===e.index-1)||[e.id,...e.parentIds].includes(a.id))}},(e,t)=>({connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop(),validTarget:t.canDrop()&&t.isOver({shallow:!0})})),Object(m.c)(()=>{const e=gn([fn],e=>e);return(t,a)=>({parentIds:e(t,a)})}))(e=>e.connectDropTarget(c.a.createElement("div",{className:ye()({dropTarget:!0,"dropTarget-available":e.canDrop,"dropTarget-hover":e.validTarget&e.canDrop,"dropTarget-children":e.children})},e.children||c.a.createElement("div",{className:"dropTargetButton"})))),vn=a(776);a(706);var wn=Object(m.c)(null,{collapseComponent:e=>({type:"COLLAPSE_COMPONENT",id:e})})(({id:e,parent:t,index:a,collapsed:n,hasChildren:r,onDelete:l,onDuplicate:o,collapseComponent:s})=>{const i=Object(m.d)();return(c.a.createElement(vn.a,null,c.a.createElement(Ga.a,{caret:!0,size:"sm",outline:!0,color:"secondary"}),c.a.createElement(Ka.a,{right:!0},c.a.createElement(Xa.a,{header:!0},"Actions"),c.a.createElement(Xa.a,{onClick:()=>ue(i.getState(),{exportedComponent:e})},"Export"),c.a.createElement(Xa.a,{onClick:()=>o(e,t,a)},"Duplicate"),c.a.createElement(Xa.a,{onClick:()=>l(e,t,a)},"Delete"),r?c.a.createElement("div",null,c.a.createElement(Xa.a,{divider:!0}),c.a.createElement(Xa.a,{header:!0},"View"),c.a.createElement(Xa.a,{onClick:()=>s(e)},n?"Expand":"Collapse")):null)))});a(707);const xn=({id:e,parent:t,index:a,children:n,active:r,collapsed:l,skipped:o,tardy:s,isDragging:i,hasChildren:m},{onNodeClick:d,onNodeDelete:p,onNodeDuplicate:u})=>c.a.createElement(pa.a,{href:"#",active:r,className:ye()({isDragging:i,"text-muted":o})},c.a.createElement("div",{className:"nav-link-main",onClick:t=>d(t,e)},n,l?c.a.createElement(_e.a,{icon:"plus"}):null,o?c.a.createElement(_e.a,{icon:"minus-circle"}):null,s?c.a.createElement(_e.a,{icon:"alarm-clock"}):null),c.a.createElement("div",{className:"nav-link-tools"},c.a.createElement(wn,{id:e,parent:t,index:a,collapsed:l,hasChildren:m,onDelete:p,onDuplicate:u})));xn.contextTypes={onNodeClick:pn.a.func,onNodeDelete:pn.a.func,onNodeDuplicate:pn.a.func};const On=({id:e,index:t,onNodeAdd:a,pinned:n})=>c.a.createElement("div",{className:"nodeGap"},n?c.a.createElement(yn,{id:e,index:t},c.a.createElement(bn,{id:e,index:t,onClick:()=>a(e,t),pinned:n})):c.a.createElement("div",null,c.a.createElement(yn,{id:e,index:t}),c.a.createElement(bn,{id:e,index:t,onClick:()=>a(e,t)}))),jn=({id:e,children:t,pinned:a,vacancies:n},{onNodeAdd:r})=>c.a.createElement(Se.a,{pills:!0,className:"flex-column"},n?c.a.createElement(On,{id:e,index:0,pinned:a,onNodeAdd:r}):null,t.map((t,a)=>c.a.createElement(da.a,{key:"".concat(e,"_").concat(a,"_").concat(t)},c.a.createElement(Cn,{id:t,parentId:e,index:a}),n?c.a.createElement(On,{id:e,index:a+1,onNodeAdd:r}):null)));jn.contextTypes={onNodeAdd:pn.a.func};const kn=Object(m.c)((e,t)=>({data:e.components[t.id],active:t.id===e.componentDetail.viewProps.id}))(({id:e,parentId:t,index:a,data:n,active:r,renderBody:l,isDragging:o,connectDragSource:s})=>{const i=n.type,m=n._collapsed,d=n._template,p=w[i],u=p.minChildren,h=p.maxChildren,b=n.children||[],E=b.length<u&&b.length<h,f=b.length<h;return c.a.createElement("div",{className:"tree-node"},!1!==l?s(c.a.createElement("div",null,c.a.createElement(xn,{id:e,parent:t,index:a,hasChildren:(b||[]).length>0,active:r,collapsed:m,skipped:n.skip,tardy:n.tardy,isDragging:o},n.title))):null,m||d?null:c.a.createElement(jn,{id:e,children:b||[],pinned:E,vacancies:f}))}),Nn={beginDrag:e=>({id:e.id,parentId:e.parentId,index:e.index})};const Cn=Object(Y.DragSource)("node",Nn,(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(kn);var Tn=Cn;var Sn=Object(m.c)(null,{collapseComponent:e=>({type:"COLLAPSE_COMPONENT",id:e}),deleteComponent:(e,t,a)=>({type:"DELETE_COMPONENT",id:e,parent:t,index:a}),duplicateComponent:(e,t,a)=>({type:"COPY_COMPONENT",id:e,parent:t,index:a+1}),showComponentDetail:e=>({type:"SHOW_COMPONENT_DETAIL",id:e}),showAddModal:(e,t)=>({type:"SHOW_MODAL",modalType:"ADD_COMPONENT",modalProps:{parent:e,index:t}})})(({collapseComponent:e,deleteComponent:t,duplicateComponent:a,showComponentDetail:n,showAddModal:r})=>c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement(mn,null)),c.a.createElement("hr",{style:{marginBottom:"14px"}}),c.a.createElement(hn,{Node:Tn,rootId:"root",onNodeClick:(t,a)=>{t.shiftKey?e(a):n(a)},onNodeDelete:(e,a,n)=>{window.confirm("Do you really want to delete this component?")&&t(e,a,n)},onNodeDuplicate:a,onNodeAdd:r}))),Pn=a(777),An=a(778),_n=a(779);a(708);const Dn=({id:e,onClick:t})=>c.a.createElement("span",{id:e,onClick:t},c.a.createElement(_e.a,{icon:"info-circle",className:"hint-icon",title:"More information"}),c.a.createElement("span",{className:"sr-only"},"More information"));class In extends o.Component{constructor(e){super(e),this.id=this.props.id||Object(j.uniqueId)("hint_"),this.target=this.props.target||Dn,this.toggle=this.toggle.bind(this),this.state={isOpen:!1}}toggle(e){e&&e.preventDefault(),this.setState({isOpen:!this.state.isOpen})}render(){const e=this.target;return(c.a.createElement("span",{className:this.props.className,style:this.props.style}," ",c.a.createElement(e,{id:this.id,onClick:this.toggle}),c.a.createElement(Pn.a,{target:this.id,placement:this.props.placement||"bottom",trigger:"legacy",delay:0,isOpen:this.state.isOpen,toggle:this.toggle},c.a.createElement(An.a,null,this.props.title),c.a.createElement(_n.a,null,this.props.children))))}}const Fn=()=>c.a.createElement(In,{target:({id:e,onClick:t})=>c.a.createElement("span",{id:e,onClick:t,style:{cursor:"pointer"}},"Help"),title:"Finding help"},c.a.createElement("p",{className:"mt-1"},c.a.createElement("strong",null,"We would love to help you build your research!")," ","Here are some resources to get you started and assist you while you're using ",c.a.createElement("code",null,"lab.js"),":"),c.a.createElement("p",null,"The ",c.a.createElement("a",{className:"font-weight-bold",target:"_blank",rel:"noopener noreferrer",href:"https://labjs.readthedocs.io"},"online documentation")," provides tutorials, useful tricks, and detailed technical reference. It is probably the best place to gain an overview."),c.a.createElement("p",null,"You're always welcome to ",c.a.createElement("a",{className:"font-weight-bold",target:"_blank",rel:"noopener noreferrer",href:"https://slackin-nmbrcrnchrs.herokuapp.com/"},"join the project chat"),", where fellow users will answer questions and help you get unstuck. If you can, please pay it forward by helping in turn."),c.a.createElement("p",null,"You've probably already spotted the ",c.a.createElement(_e.a,{icon:"info-circle",className:"text-muted"})," symbols in the interface; they provide further ",c.a.createElement("strong",null,"contextual information"),", which you can access by clicking on them."),c.a.createElement("p",null,"As always, if something isn't working as you'd expect, please ",c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://labjs.readthedocs.io/en/latest/meta/contribute/ways.html"},"let us know"),"!")),Hn=Object(m.c)(null,{showModal:(e,t)=>({type:"SHOW_MODAL",modalType:e,modalProps:t})})(({showModal:e})=>c.a.createElement(In,{target:({id:e,onClick:t})=>c.a.createElement("span",{id:e,onClick:t,style:{cursor:"pointer"}},"Imprint"),title:"Imprint"},c.a.createElement("p",null,c.a.createElement("strong",null,"Thank you for using ",c.a.createElement("a",{href:"https://felixhenninger.github.io/lab.js",className:"font-weight-bold",target:"_blank",rel:"noopener noreferrer"},c.a.createElement("code",null,"lab.js"))," \u2014 ",c.a.createElement("br",null),"It's a pleasure to have you around!"),c.a.createElement("br",null),"Here's some information to help keep our lawyers happy, too."),c.a.createElement("h6",null,"Authors"),c.a.createElement("p",null,"This software is developed by ",c.a.createElement("a",{href:"http://felixhenninger.com",target:"_blank",rel:"noopener noreferrer"},"Felix Henninger"),", with help from many awesome ",c.a.createElement("a",{href:"https://github.com/felixhenninger/lab.js#contributors",target:"_blank",rel:"noopener noreferrer"},"contributors"),". Felix is a member of the ",c.a.createElement("a",{href:"https://www.cognition.uni-landau.de/",target:"_blank",rel:"noopener noreferrer"},"University of Landau Cognition Lab")," and a student at the ",c.a.createElement("a",{href:"http://gess.uni-mannheim.de/"},"University of Mannheim"),"."),c.a.createElement(te.a,{size:"sm",block:!0,color:"primary",outline:!0,className:"mb-2",onClick:()=>e("LEGAL",{large:"true"})},"Legal"))),Ln=()=>c.a.createElement("small",{className:"text-muted"},c.a.createElement(Fn,null)," \xb7"," ",c.a.createElement(Hn,null));a(709);var Mn=a(402),Rn=a.n(Mn);const Wn=Object(j.sample)(["built with \u2665\ufe0e"]);var Vn=()=>c.a.createElement("footer",null,c.a.createElement("hr",null),c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("a",{className:"text-muted text-decoration-none logo",href:"https://lab.js.org/",target:"_blank",rel:"noopener noreferrer"},c.a.createElement("img",{alt:"lab.js logo",src:Rn.a})," ",c.a.createElement("small",null,Wn)),c.a.createElement(Ln,null))),Bn=a(736),Un=a(405),zn=a(786);const qn={Files:"folder",Parameters:"box-open",Plugins:"plug",More:"ellipsis-h"},Yn=({title:e,typeCategory:t,typeName:a,template:n,icon:r,iconWeight:l,iconFallbackWeight:o,onChange:s})=>c.a.createElement(lt.e,{initialValues:{title:e},enableReinitialize:!0},c.a.createElement(ot.a,{className:"mr-sm-2",style:{width:"40%"}},c.a.createElement(Bn.a,null,c.a.createElement(lt.b,{name:"title",component:it.c,bsSize:"lg",className:"font-weight-bold",style:{padding:"0.5rem 0.75rem",height:"42px"}}),c.a.createElement(Un.a,{addonType:"append"},c.a.createElement("span",{className:"input-group-text"},c.a.createElement(_e.a,{id:"typeIcon",icon:r,fixedWidth:!0,weight:l,fallbackWeight:o})),c.a.createElement(zn.a,{placement:"right",target:"typeIcon"},n?"Template":c.a.createElement("span",null,a,c.a.createElement("span",{className:"text-muted"}," \xb7 ",t))))),c.a.createElement(it.a,{onSave:e=>s(e)}))),Gn=({tabs:e,tab:t,onChange:a})=>c.a.createElement(Se.a,{pills:!0}," ",e.map(e=>c.a.createElement(da.a,{key:e},c.a.createElement(pa.a,{href:"#",className:ye()({active:t===e}),style:{height:"42px",padding:"9px 16px 7px",minWidth:"2.8rem",textAlign:"center"},onClick:()=>a(e)},qn[e]?c.a.createElement(_e.a,{icon:qn[e],weight:"s",fixedWidth:!0}):e)))," "),Kn={updateComponent:mt};var Xn=Object(m.c)(e=>{const t=e.componentDetail.viewProps.id;if(e.components[t]){const a=e.components[t],n=a.type,r=a.title,l=a._tab;return{key:t,id:t,type:n,title:r,template:a._template,tab:x(l,n)}}return{id:void 0}},Kn)(({id:e,type:t,title:a,tab:n,template:r,updateComponent:l})=>{if(e){const o=w[t].tabs.filter(e=>!r||e===n||["Parameters","More"].includes(e));return(c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement(Yn,{id:e,title:a,typeName:w[t].name,typeCategory:w[t].category,template:r,icon:r?"box-open":w[t].icon,iconWeight:w[t].iconWeight,iconFallbackWeight:w[t].iconFallbackWeight,onChange:t=>l(e,t)}),c.a.createElement(Gn,{tabs:o,tab:n,onChange:t=>l(e,{_tab:t})})))}return null}),Qn=a(780);a(710);const Jn=()=>c.a.createElement(he.a,{style:{textAlign:"center"}},c.a.createElement("h2",{style:{margin:"2rem 0 1rem"}},"Welcome!"),c.a.createElement(ze.a,{className:"mb-3"},c.a.createElement("strong",null,"Thank you for using ",c.a.createElement("code",null,"lab.js"),"!"),c.a.createElement("br",null),"We hope you find it useful, and that",c.a.createElement("br",null),"you enjoy using it as much as we did building it.")),$n=({icon:e,children:t,active:a,borderRight:n,borderBottom:r,onClick:l})=>c.a.createElement(Z.a,{className:ye()("splash-tab-icon","pt-4 pb-3",{active:a,"border-right":n,"border-bottom":r}),style:{cursor:a?"default":"pointer"},onClick:a?void 0:l},c.a.createElement(_e.a,{icon:e,className:"fa-2x d-block mt-2 mb-3"}),t,c.a.createElement(_e.a,{icon:"angle-down",className:ye()("d-block",a?"visible":"invisible","text-muted","mt-1")})),Zn=({icon:e,onClick:t,children:a})=>c.a.createElement(Z.a,{className:"pt-3 pb-4",style:{cursor:"pointer"},onClick:t},c.a.createElement(_e.a,{icon:e,className:"fa-2x d-block mt-2 mb-3"}),a),er={start:{title:c.a.createElement("p",{className:"mb-1"},c.a.createElement("strong",null,"Get started")),icon:"map",content:e=>c.a.createElement(J.a,null,c.a.createElement($.a,{className:"text-center pt-3 pb-2"},c.a.createElement(Zn,{icon:"shoe-prints",onClick:()=>alert("Sorry, but this isn't quite ready yet. Please join us on Slack and we'd be happy to give you a personal tour!")},c.a.createElement("p",{className:"mb-1"},"Take a ",c.a.createElement("strong",null,"tour")),c.a.createElement("p",{className:"mb-0 text-muted"},c.a.createElement("small",null,"We'd love to",c.a.createElement("br",null),"show you around!")),c.a.createElement(fe.a,null,"Alpha")),c.a.createElement(Zn,{icon:"book-open",onClick:()=>window.open("https://lab.js.org/docs/en/latest/learn/builder/","_blank")},c.a.createElement("p",{className:"mb-1"},"Watch the",c.a.createElement("br",null),c.a.createElement("strong",null,"tutorial")),c.a.createElement("p",{className:"mb-0 text-muted"},c.a.createElement("small",null,"... and build a study step by step"))),c.a.createElement(Zn,{icon:"rocket",onClick:()=>e("examples")},c.a.createElement("p",{className:"mb-1"},"Browse some",c.a.createElement("br",null),c.a.createElement("strong",null,"examples")))))},learn:{title:c.a.createElement("p",{className:"mb-1"},c.a.createElement("strong",null,"Learn")," more"),icon:"graduation-cap",content:e=>c.a.createElement(J.a,{className:"py-4"},c.a.createElement("p",null,c.a.createElement("strong",null,"Wow, it's cool that you're interested!")," Here are some things we hope you'll find helpful:"),c.a.createElement("ul",null,c.a.createElement("li",null,"We've collected ",c.a.createElement("a",{href:"https://lab.js.org/docs/en/latest/recipes/",target:"_blank",rel:"noopener noreferrer"},"tips, tricks and recipes")," for common use cases."),c.a.createElement("li",null,"Maybe the paradigm you're looking for is already among the"," ",c.a.createElement("a",{href:"#example-tab",onClick:t=>{t.preventDefault(),e("examples")}},"examples"),"?"),c.a.createElement("li",null,"The ",c.a.createElement("a",{href:"https://lab.js.org/docs/en/latest/reference/",target:"_blank",rel:"noopener noreferrer"},"reference documentation")," covers the nitty-gritty library internals.")))},support:{title:c.a.createElement("p",{className:"mb-1"},"Find ",c.a.createElement("strong",null,"support")),icon:"life-ring",content:()=>c.a.createElement(J.a,{className:"py-4"},c.a.createElement("p",null,c.a.createElement("strong",null,"We'd love to support you!")," Please don't hesitate to reach out if there's anything we can do to help, we'd be glad to."),c.a.createElement("p",null,"The easiest way to find help is our ",c.a.createElement("a",{href:"https://lab.js.org/resources/support/",target:"_blank",rel:"noopener noreferrer"},c.a.createElement("strong",null,"support channel")),", where there's usually someone around to chat and provide information. You can ",c.a.createElement("a",{href:"https://lab.js.org/resources/support/",target:"_blank",rel:"noopener noreferrer"},"join by providing your email address")," \u2014 you'll receive access in seconds."),c.a.createElement("div",{className:"text-center"},c.a.createElement(_e.a,{icon:"heart-circle"})))}},tr=({switchTab:e})=>{const t=Object(o.useState)(void 0),a=Object(Q.a)(t,2),n=a[0],r=a[1];return(c.a.createElement(c.a.Fragment,null,c.a.createElement(J.a,{className:"border-top text-center"},c.a.createElement($.a,null,Object.entries(er).map(([e,t],a)=>c.a.createElement($n,{key:"splash-tab-".concat(e),icon:t.icon,onClick:()=>r(e),active:n===e,borderRight:a!==Object.entries(er).length-1,borderBottom:void 0!==n&&n!==e},t.title)))),c.a.createElement(Qn.a,{isOpen:void 0!==n},void 0!==n?er[n].content(e):"")))};var ar=({switchTab:e})=>c.a.createElement(c.a.Fragment,null,c.a.createElement(Jn,null),c.a.createElement(tr,{switchTab:e}));const nr=({tab:e,setTab:t})=>{switch(e){case"splash":return c.a.createElement(ar,{switchTab:e=>t(e)});case"examples":return c.a.createElement(Xe,null);default:return c.a.createElement("div",null,"Requested tab not found")}};var rr=()=>{const e=Object(o.useState)("splash"),t=Object(Q.a)(e,2),a=t[0],n=t[1];return(c.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},c.a.createElement(be.a,{style:{width:"500px"}},c.a.createElement(Ee.a,null,c.a.createElement(Se.a,{tabs:!0,className:"card-header-tabs justify-content-center"},c.a.createElement(De.b,{id:"splash",activeId:a,setId:n},c.a.createElement(_e.a,{icon:"heart"})),c.a.createElement(da.a,null,c.a.createElement(pa.a,{id:"splash-tab-examples",className:ye()({active:"examples"===a}),onClick:()=>n("examples")},c.a.createElement(_e.a,{icon:"rocket"})),c.a.createElement(zn.a,{target:"splash-tab-examples",placement:"bottom",delay:{show:0,hide:100}},"Examples")))),c.a.createElement(nr,{tab:a,setTab:n}))))},lr=()=>c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement(_e.a,{icon:"exclamation-circle",weight:"s",style:{fontSize:"5rem",color:"var(--gray)",marginTop:"3rem"}}),c.a.createElement("h2",{style:{margin:"2rem 0 1rem"}},"No component selected"),c.a.createElement("p",null,c.a.createElement("strong",null,"Please select a component on the left to get started"),",",c.a.createElement("br",null),"or add a new one via the plus button if you haven't already.")),or=()=>c.a.createElement("div",{className:"text-center"},c.a.createElement("i",{className:"fas fa-spinner-third fa-spin my-3"})),cr=a(265);const sr=Object(o.lazy)(()=>Promise.all([a.e(3),a.e(6)]).then(a.bind(null,923)));var ir=()=>{const e=Object(lt.i)();return(c.a.createElement(we,{title:"Timeline",badge:"Beta",wrapContent:!1},c.a.createElement(o.Suspense,{fallback:c.a.createElement(or,null)},c.a.createElement(sr,{data:e.values.timeline||[],formikContext:e})),c.a.createElement("hr",null),c.a.createElement(he.a,null,c.a.createElement(ot.a,{row:!0},c.a.createElement(ct.a,{for:"timeout",xs:"2"},"Timeout",c.a.createElement(In,{title:"Timeout",className:"float-right"},c.a.createElement("p",{className:"font-weight-bold"},"End component automatically after a given number of milliseconds."),c.a.createElement("p",{className:"text-muted"},"If responses are defined alongside a timeout, whichever comes first will end the component."))),c.a.createElement(Z.a,{xs:"10"},c.a.createElement(Bn.a,null,c.a.createElement(lt.b,{name:"timeout",id:"timeout",placeholder:"Never",pattern:cr.b,component:it.c,className:"text-monospace"}),c.a.createElement(Un.a,{addonType:"append"},c.a.createElement("span",{className:"input-group-text text-muted"},"ms"))))))))};a(711);const mr=Object(o.createContext)({}),dr=e=>{let t=e.name,a=e.values,n=e.arrayHelpers,r=e.setValues,l=e.setFieldValue,o=Object(Te.a)(e,["name","values","arrayHelpers","setValues","setFieldValue"]);const s=()=>{var e;return null!==(e=Object(lt.g)(a,t))&&void 0!==e?e:[]},i=(e,n)=>{const l=t.replace(".rows","");r({[l]:Object(h.a)({},Object(lt.g)(a,l),{rows:e,columns:n})})},m=e=>{var n,r;const l=t.replace(".rows",".columns");i(...e(null!==(n=Object(lt.g)(a,t))&&void 0!==n?n:[],null!==(r=Object(lt.g)(a,l))&&void 0!==r?r:[]))},d=e=>{return a=s().map(e),l(t,a);var a};return c.a.createElement(mr.Provider,Object.assign({value:{setValues:r,setFieldValue:l,dispatch:m,overwriteAll:i,addRow:()=>n.push([]),addColumn:(e,t)=>m((a,n)=>[a.map(t=>[...t,e]),[...n,t]]),clearColumn:e=>d(t=>{const a=[...t];return a[e]="",a}),fillColumn:e=>{const t=s().map(t=>t[e]).filter(e=>""!==e);return d((a,n)=>{const r=[...a];return r[e]=r[e]||t[n%t.length],r})},deleteColumn:e=>m((t,a)=>[t.map(t=>t.filter((t,a)=>a!==e)),a.filter((t,a)=>a!==e)])}},o))},pr=()=>Object(o.useContext)(mr),ur=({name:e,item:t,header:a,footer:n,wrapper:r=o.Fragment,wrapperProps:l,bodyWrapper:s=o.Fragment,defaultItem:i={}})=>{const m=Object(lt.i)(),d=m.values,p=m.setFieldValue,u=m.setValues,h=Object(lt.g)(d,e);return c.a.createElement(lt.c,{name:e},o=>c.a.createElement(r,l,c.a.createElement(dr,{name:e,values:d,arrayHelpers:o,setValues:u,setFieldValue:p},a&&c.a.createElement(a,{name:e}),c.a.createElement(s,null,(h||[]).map((a,n)=>c.a.createElement(t,{key:"".concat(e,"[").concat(n,"]"),name:"".concat(e,"[").concat(n,"]"),index:n,isLastItem:n===h.length-1,data:a,arrayHelpers:o}))),n&&c.a.createElement(n,{addItem:e=>o.push(e||i)}))))},hr=({icon:e,onClick:t,style:a,disabled:n=!1,type:r})=>{const l=null!==r&&void 0!==r?r:"td";return(c.a.createElement(l,null,c.a.createElement(te.a,{block:!0,outline:!0,color:"muted",onClick:t,style:a,disabled:n},c.a.createElement(_e.a,{icon:e}))))},br=({name:e,columns:t=1})=>c.a.createElement("colgroup",null,c.a.createElement("col",{style:{width:"5%"}}),new Array(t).fill(null).map((a,n)=>c.a.createElement("col",{key:"table-".concat(e,"-colgroup-").concat(n),style:{width:"".concat(90/t,"%")}})),c.a.createElement("col",{style:{width:"5%"}})),Er=({index:e,name:t,children:a,arrayHelpers:n,isLastItem:r,leftColumn:l,rightColumn:o,wrapper:s="td"})=>c.a.createElement("tr",null,l?c.a.createElement(l,{name:t,index:e,arrayHelpers:n,isLastItem:r}):c.a.createElement(hr,{icon:"bars"}),c.a.createElement(s,null,a),o?c.a.createElement(o,{name:t,index:e,arrayHelpers:n,isLastItem:r}):c.a.createElement(hr,{icon:"trash",onClick:()=>n.remove(e)})),fr=({addItem:e,columns:t})=>c.a.createElement("tfoot",null,c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",{colSpan:t},c.a.createElement(te.a,{block:!0,size:"sm",outline:!0,color:"muted",className:"hover-target",onClick:()=>e()},c.a.createElement(_e.a,{icon:"plus"}))),c.a.createElement("td",null))),gr=e=>{let t=e.header,a=e.row,n=e.footer,r=void 0===n?fr:n,l=e.columns,o=void 0===l?1:l,s=e.className,i=Object(Te.a)(e,["header","row","footer","columns","className"]);return(c.a.createElement(ur,Object.assign({wrapper:"table",wrapperProps:{className:"table grid ".concat(s)},header:({name:e})=>c.a.createElement(c.a.Fragment,null,c.a.createElement(br,{name:i.name,columns:o}),t&&c.a.createElement(t,{name:e,columns:o})),bodyWrapper:"tbody",item:a,footer:e=>c.a.createElement(r,Object.assign({columns:o},e))},i)))},yr=()=>c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null),c.a.createElement("th",{className:"px-2 pt-3"},"label",c.a.createElement(In,{className:"ml-2"},c.a.createElement("p",{className:"font-weight-bold"},c.a.createElement("code",null,"label")," assigned to a particular response action on part of the participant."),c.a.createElement("p",{className:"text-muted"},"The label reflects the ",c.a.createElement("em",null,"meaning")," of participants' responses. We save the label corresponding to the recorded action in the data."),c.a.createElement("p",{className:"text-muted"},"It is possible to have multiple alternative response actions with the same label, for example if participants can use one of several response modalities to indicate their response."))),c.a.createElement("th",{className:"px-2 pt-3"},"action",c.a.createElement("span",{className:"text-muted font-weight-normal"}," \xb7 event"),c.a.createElement(In,{className:"ml-2"},c.a.createElement("p",{className:"font-weight-bold"},"Type of ",c.a.createElement("code",null,"action")," participants can take to indicate a response. This corresponds to browser events."),c.a.createElement("dl",{className:"text-muted"},c.a.createElement("dt",null,"keypress"),c.a.createElement("dd",null,"Pushing a key on the keyboard and releasing it."),c.a.createElement("dt",null,"keydown"),c.a.createElement("dd",null,"Holding down a key."),c.a.createElement("dt",null,"keyup"),c.a.createElement("dd",null,"Releasing a key."),c.a.createElement("dt",null,"click"),c.a.createElement("dd",null,"Pressing and releasing a mouse button."),c.a.createElement("dt",null,"mousedown"),c.a.createElement("dd",null,"Holding down a mouse button."),c.a.createElement("dt",null,"mouseup"),c.a.createElement("dd",null,"Releasing a mouse button.")))),c.a.createElement("th",{className:"px-2 pt-3"},"target",c.a.createElement(In,{className:"ml-2"},c.a.createElement("p",{className:"font-weight-bold"},"The ",c.a.createElement("code",null,"target")," of the action. This limits a response to certain parts of the screen \u2013 leave blank to record responses for the entire window."),c.a.createElement("p",null,"The best example for this is if you're looking for clicks on a specific part of the screen rather than anywhere."),c.a.createElement("p",{className:"text-muted"},"On ",c.a.createElement("strong",null,"canvas-based screens"),", ",c.a.createElement("code",null,"AOIs")," can be used as target areas. To do so, please enter the ",c.a.createElement("code",null,"@")," sign followed by the ",c.a.createElement("code",null,"AOI")," label, for example ",c.a.createElement("code",null,"@label"),"."),c.a.createElement("p",{className:"text-muted"},"On ",c.a.createElement("strong",null,c.a.createElement("code",null,"HTML"),"-based screens"),", the target areas are defined by ",c.a.createElement("code",null,"CSS")," selectors, e.g. ",c.a.createElement("code",null,"button#option_a")," corresponds to a ",c.a.createElement("code",null,'<button id="option_a" />')," element on screen."))),c.a.createElement("th",{className:"px-2 pt-3"},"filter",c.a.createElement("span",{className:"text-muted font-weight-normal"}," \xb7 key/button"),c.a.createElement(In,{className:"ml-2"},c.a.createElement("p",{className:"font-weight-bold"},"Additional ",c.a.createElement("code",null,"filter")," applied to the action."),c.a.createElement("p",null,"For the most part, this specifies the key or button corresponding to the response. Leave empty to count any key or button as the corresponding response."),c.a.createElement("p",null,"Multiple options are allowed if seperated by a comma."),c.a.createElement("dl",{className:"text-muted"},c.a.createElement("dt",null,"Keyboard events"),c.a.createElement("dd",null,"Label of the key pressed, e.g. ",c.a.createElement("code",null,"s"),", ",c.a.createElement("code",null,"l"),", ",c.a.createElement("code",null,"Space")," etc. (upper case is available for letters)"),c.a.createElement("dt",null,"Mouse events"),c.a.createElement("dd",null,"Number corresponding to the mouse button, where ",c.a.createElement("code",null,"0")," is the innermost button (to the left on a right-handed mouse and vice-versa).")))),c.a.createElement("th",null))),vr=({index:e,name:t,arrayHelpers:a})=>c.a.createElement(Er,{index:e,arrayHelpers:a,wrapper:o.Fragment},c.a.createElement("td",null,c.a.createElement(lt.b,{name:"".concat(t,".label"),component:it.c,className:"text-monospace"})),c.a.createElement("td",null,c.a.createElement(lt.b,{name:"".concat(t,".event"),as:"select",className:"text-monospace form-control custom-select"},c.a.createElement("option",{value:""},"none (inactive)"),c.a.createElement("option",{value:"keypress"},"keypress"),c.a.createElement("option",{value:"keydown"},"keydown"),c.a.createElement("option",{value:"keyup"},"keyup"),c.a.createElement("option",{value:"click"},"click"),c.a.createElement("option",{value:"mousedown"},"mousedown"),c.a.createElement("option",{value:"mouseup"},"mouseup"))),c.a.createElement("td",null,c.a.createElement(lt.b,{name:"".concat(t,".target"),placeholder:"window",component:it.c,className:"text-monospace"})),c.a.createElement("td",null,c.a.createElement(lt.b,{name:"".concat(t,".filter"),placeholder:"any",component:it.c,className:"text-monospace"})));var wr=()=>c.a.createElement(we,{title:"Responses",wrapContent:!1,className:"mt-4"},c.a.createElement(gr,{name:"responses",columns:4,row:vr,header:yr,className:"grid border-top-0 border-bottom"}),c.a.createElement(he.a,null,c.a.createElement(ot.a,{row:!0},c.a.createElement(ct.a,{for:"correctResponse",xs:"2"},"Correct response",c.a.createElement(In,{title:"Correct response",className:"float-right"},c.a.createElement("p",{className:"font-weight-bold"},"Label of the response classified as correct."),c.a.createElement("p",{className:"text-muted"},"The entry here should correspond to one of the labels assigned to responses in the first column above (placeholders can also be used for varying correct responses)."))),c.a.createElement(Z.a,{xs:"10"},c.a.createElement(lt.b,{name:"correctResponse",placeholder:"Undefined",component:it.c,className:"text-monospace"}))))),xr=a(325),Or=()=>{const e=Object(lt.i)().values;return(c.a.createElement(we,{title:"Meta",className:"mt-4"},c.a.createElement(ot.a,{row:!0},c.a.createElement(ct.a,{for:"skip",xs:"2"},"Skip",c.a.createElement(In,{title:"Skip",className:"float-right"},c.a.createElement("p",{className:"font-weight-bold"},"Don't run the component during the study."),c.a.createElement("p",{className:"text-muted"},"This will cause any component to be prepared, but not run."))),c.a.createElement(Z.a,{xs:"10"},c.a.createElement(Bn.a,null,c.a.createElement(Un.a,{addonType:"prepend"},c.a.createElement(xr.a,null,c.a.createElement(lt.b,{name:"skip",id:"skip",component:it.b,type:"checkbox"}))),c.a.createElement(lt.b,{name:"skipCondition",component:it.c,className:"text-monospace",placeholder:"${ optional condition }",disabled:!0===e.skip})))),c.a.createElement(ot.a,{row:!0},c.a.createElement(ct.a,{for:"tardy",xs:"2"},"Tardy",c.a.createElement(In,{title:"Tardiness",className:"float-right"},c.a.createElement("p",{className:"font-weight-bold"},"Prepare the component at the last possible moment, just before it is run."),c.a.createElement("p",{className:"text-muted"},"This is useful if the component depends on information that becomes available only during the study, for example if a screen's content depends on participant behavior."),c.a.createElement("p",{className:"text-muted"},"Ordinarily, a component is prepared when the page is loaded."))),c.a.createElement(Z.a,{xs:"10",className:"pt-2"},c.a.createElement(lt.b,{name:"tardy",id:"tardy",component:it.b,type:"checkbox"})))))};const jr={updateComponent:mt};var kr=Object(m.c)(null,jr)(e=>{let t=e.id,a=e.data,n=e.keys,r=e.updateComponent,l=e.postProcess,o=void 0===l?e=>e:l,s=e.children,i=Object(Te.a)(e,["id","data","keys","updateComponent","postProcess","children"]);return(c.a.createElement(lt.e,Object.assign({initialValues:Object(j.pick)(a,n),enableReinitialize:!0},i),c.a.createElement(c.a.Fragment,null,s,c.a.createElement(it.a,{onSave:e=>r(t,o(e))}))))}),Nr=({id:e,data:t})=>c.a.createElement(kr,{id:e,data:t,keys:["responses","correctResponse","skip","skipCondition","tardy","timeline","timeout"]},c.a.createElement(ir,null),c.a.createElement(wr,null),c.a.createElement(Or,null)),Cr=a(781);a(712);const Tr=({name:e})=>{const t=Object(lt.h)(e),a=Object(Q.a)(t,3),n=a[0].value,r=a[2].setValue,l=Object(o.useMemo)(()=>Sr(n),[n]);return c.a.createElement(be.a,{outline:!0,color:l?"warning":"secondary",className:"editor-field"},c.a.createElement(kt,{height:600,language:"javascript",value:n,onChange:e=>r(e)}),l?c.a.createElement(Cr.a,null,c.a.createElement("strong",null,l&&l.name,":"),"\xa0",l&&l.message):null)},Sr=e=>{try{return Bt(e),null}catch(t){return{name:t.name,message:t.message}}},Pr=({name:e,arrayHelpers:t})=>c.a.createElement(Er,{name:e,arrayHelpers:t},c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,{xs:"6"},c.a.createElement(lt.b,{name:"".concat(e,".name"),component:it.c,placeholder:"parameter",className:"text-monospace"})),c.a.createElement(Z.a,{xs:"6"},c.a.createElement(lt.b,{name:"".concat(e,".message"),as:"select",className:"text-monospace form-control custom-select"},c.a.createElement("option",{value:""},"event"),c.a.createElement("option",{value:"before:prepare"},"before:prepare"),c.a.createElement("option",{value:"after:prepare"},"after:prepare"),c.a.createElement("option",{value:"run"},"run"),c.a.createElement("option",{value:"end"},"end"),c.a.createElement("option",{value:"after:end"},"after:end"),c.a.createElement("option",{value:"commit"},"commit")))),c.a.createElement(Tr,{name:"".concat(e,".code")}));var Ar=({id:e,data:t})=>c.a.createElement(we,{title:"Scripts",wrapContent:!1},c.a.createElement(kr,{id:e,data:t,keys:["messageHandlers"]},c.a.createElement(gr,{name:"messageHandlers",defaultItem:{title:"",message:"",code:""},row:Pr,className:"no-header"}))),_r=a(266);const Dr=({addItem:e},{id:t})=>{let a=c.a.createRef();return(c.a.createElement("tfoot",null,c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",null,c.a.createElement(_r.a,{ref:a,component:t}),c.a.createElement(te.a,{size:"sm",block:!0,outline:!0,color:"muted",className:"hover-target",onClick:Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.current.select();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error while adding file",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),onMouseUp:e=>e.target.blur()},c.a.createElement(_e.a,{icon:"plus"}))),c.a.createElement("td",null))))};Dr.contextTypes={id:pn.a.oneOfType([pn.a.string,pn.a.number])};var Ir=Dr;const Fr=Object(m.c)((e,{poolPath:t})=>{const a=e.files.files[t];return{icon:a?Object(ht.a)(a.content):"file-exclamation"}})(hr),Hr=({index:e,name:t,data:a,arrayHelpers:n})=>c.a.createElement(Er,{index:e,arrayHelpers:n,leftColumn:()=>c.a.createElement(Fr,{poolPath:a.poolPath})},c.a.createElement(lt.b,{name:"".concat(t,".localPath"),placeholder:"filename",component:it.c,className:"text-monospace"}));var Lr=({id:e,data:t})=>c.a.createElement(we,{title:"Files",wrapContent:!1},c.a.createElement(kr,{id:e,data:t,keys:["files"]},c.a.createElement(gr,{name:"files",row:Hr,footer:Ir,className:"no-header"}))),Mr=({isOpen:e,onRequestClose:t,onAdd:a})=>c.a.createElement(Ce.a,{isOpen:e,onRequestClose:t},c.a.createElement(St,{title:"Plugins",closeHandler:t},c.a.createElement("p",null,c.a.createElement("strong",null,"Plugins change the behavior of a component"),", and can add further functionality. Please select one to include it."),c.a.createElement(be.a,{className:"card-flush"},c.a.createElement(Ie.a,{className:"list-group-flush"},Object.entries(It).map(([e,n],r)=>c.a.createElement(Fe.a,{key:"plugin-available-".concat(r),action:!0,style:{cursor:"pointer"},onClick:()=>{a(e),t()}},c.a.createElement("strong",null,n.title))))),c.a.createElement("div",{className:"mt-3"},c.a.createElement("small",{className:"text-muted"},"Missing something? Ideas for improving things? Please ",c.a.createElement("a",{href:"https://labjs.readthedocs.io/en/latest/meta/contribute/index.html",target:"_blank",rel:"noopener noreferrer"},"suggest or contribute"),"!"))));const Rr=({metadata:e})=>c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",{className:"h5 mt-2"},e.title,e.description&&c.a.createElement("small",{className:"text-muted"}," \xb7 ",e.description)),c.a.createElement("hr",{className:"my-3"})),Wr=({visible:e})=>e?c.a.createElement("div",{className:"text-center p-5 pb-2"},c.a.createElement(_e.a,{icon:"plug",className:"d-block text-muted p-3",style:{fontSize:"3.5rem"}}),c.a.createElement("div",{className:"text-muted"},c.a.createElement("strong",null,"Plugins extend components' functionality"),c.a.createElement("br",null),c.a.createElement("small",null,"Please click below to add one."))):null,Vr=({name:e,type:t,options:a=[],placeholder:n})=>{switch(t){case"select":return c.a.createElement(lt.b,{name:e,as:"select",className:"form-control custom-select text-monospace"},a.map(t=>c.a.createElement("option",{key:"".concat(e,"-").concat(t.coding),value:t.coding},t.label)));default:return c.a.createElement(lt.b,{name:e,component:it.c,placeholder:n,className:"text-monospace"})}},Br=e=>c.a.createElement(ot.a,{row:!0},c.a.createElement(ct.a,{for:e.option,sm:3},e.label),c.a.createElement(Z.a,{sm:9},c.a.createElement(Vr,e),e.help&&c.a.createElement("small",{className:"form-text text-muted"},e.help))),Ur=({name:e,index:t,metadata:a})=>c.a.createElement(c.a.Fragment,null,Object.entries(a.options).map(([a,n])=>{let r=n.default,l=Object(Te.a)(n,["default"]);return(c.a.createElement(Br,Object.assign({key:"plugin-".concat(t,"-").concat(a),name:"".concat(e,".").concat(a),defaultValue:r},l)))})),zr=({index:e,name:t,data:a,arrayHelpers:n})=>{const r=Ft(a.type);return(c.a.createElement(Er,{index:e,arrayHelpers:n},c.a.createElement(Rr,{metadata:r}),c.a.createElement(Ur,{name:t,index:e,data:a,metadata:r})))},qr=({addItem:e})=>{const t=Object(o.useState)(!1),a=Object(Q.a)(t,2),n=a[0],r=a[1];return(c.a.createElement("tfoot",null,c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",null,c.a.createElement(Mr,{isOpen:n,onRequestClose:()=>r(!1),onAdd:t=>e((e=>{const t=Ft(e);return Object(h.a)({type:e},Object(j.fromPairs)(Object.entries(t.options).map(([e,t])=>[e,t.default||""])))})(t))}),c.a.createElement(te.a,{size:"sm",block:!0,outline:!0,color:"muted",className:"hover-target",onClick:()=>r(!0),onMouseUp:e=>e.target.blur()},c.a.createElement(_e.a,{icon:"plus"}))),c.a.createElement("td",null))))};var Yr=({id:e,data:t})=>c.a.createElement(we,{title:"Plugins",badge:"Beta",wrapContent:!1},c.a.createElement(kr,{id:e,data:t,keys:["plugins"]},c.a.createElement(Wr,{visible:!t.plugins||Array.isArray(t.plugins)&&0===t.plugins.length}),c.a.createElement(gr,{name:"plugins",row:zr,footer:qr,className:"no-header"}))),Gr=a(782);const Kr=({name:e,disabled:t})=>{const a=Object(lt.h)(e),n=Object(Q.a)(a,3),r=n[1],l=n[2],s=r.value,i=l.setValue,m=Object(o.useState)(!1),d=Object(Q.a)(m,2),p=d[0],u=d[1];return c.a.createElement(Gr.a,{addonType:"append",disabled:t,isOpen:p,toggle:()=>u(!p)},c.a.createElement(Ga.a,{caret:!t,disabled:t,outline:!0,color:"secondary",className:"rounded-right"},c.a.createElement(_e.a,{icon:{string:"font",number:"tachometer",boolean:"adjust"}[s],fixedWidth:!0})),c.a.createElement(Ka.a,{right:!0},c.a.createElement(Xa.a,{header:!0},"Data type"),c.a.createElement(Xa.a,{className:ye()({"dropdown-item-active":"string"===s}),onClick:()=>i("string")},"Text ",c.a.createElement("span",{className:"text-muted"},"(categorical)")),c.a.createElement(Xa.a,{className:ye()({"dropdown-item-active":"number"===s}),onClick:()=>i("number")},"Numerical ",c.a.createElement("span",{className:"text-muted"},"(continuous)")),c.a.createElement(Xa.a,{className:ye()({"dropdown-item-active":"boolean"===s}),onClick:()=>i("boolean")},"Boolean ",c.a.createElement("span",{className:"text-muted"},"(binary)"))))},Xr=({index:e,name:t,arrayHelpers:a,readOnly:n})=>c.a.createElement(Er,{index:e,arrayHelpers:a},c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,{xs:"6"},c.a.createElement(lt.b,{name:"".concat(t,".name"),component:it.c,placeholder:"parameter",disabled:n,className:"text-monospace"})),c.a.createElement(Z.a,{xs:"6"},c.a.createElement(Bn.a,null,c.a.createElement(lt.b,{name:"".concat(t,".value"),component:it.c,placeholder:"value",className:"text-monospace"}),c.a.createElement(Kr,{name:"".concat(t,".type")})))));var Qr=({id:e,data:t})=>c.a.createElement(we,{title:"Template",wrapContent:!1},c.a.createElement(kr,{id:e,data:t,keys:["notes","parameters"]},c.a.createElement(he.a,{className:"border-bottom"},c.a.createElement(ot.a,null,c.a.createElement(lt.b,{name:"notes",component:"textarea",rows:"5",placeholder:"Notes",className:"form-control form-control-sm",style:{padding:"0.5rem 0.75rem"}}))),c.a.createElement(gr,{name:"parameters",defaultItem:{name:"",value:"",type:"string"},row:Xr,className:"no-header"}))),Jr=({id:e,data:t})=>c.a.createElement(we,{title:"Advanced options"},c.a.createElement(kr,{id:e,data:t,keys:["scrollTop","_template"]},c.a.createElement(ot.a,{row:!0},c.a.createElement(Z.a,{xs:2},c.a.createElement(ct.a,null,"Run")),c.a.createElement(Z.a,{xs:10},c.a.createElement(ot.a,{check:!0},c.a.createElement(lt.b,{name:"scrollTop",component:it.b,id:"scrollTop",type:"checkbox",inline:!0,label:"Scroll to top before running"}),c.a.createElement(In,{title:"Scroll to Top",style:{marginLeft:"1rem"}},c.a.createElement("p",{className:"font-weight-bold"},"Reset scroll position to the top of the page when showing content"),c.a.createElement("p",{className:"text-muted"},"This is useful if the preceding and current screen both occupy a lot of vertical space, as it saves participants from having to scroll back upwards manually between pages."))))),c.a.createElement(ot.a,{row:!0},c.a.createElement(Z.a,{xs:2},c.a.createElement(ct.a,null,"Display")),c.a.createElement(Z.a,{xs:10},c.a.createElement(ot.a,{check:!0},c.a.createElement(lt.b,{name:"_template",component:it.b,id:"_template",type:"checkbox",inline:!0,label:"Template"}),c.a.createElement(In,{title:"Template",style:{marginLeft:"1rem"}},c.a.createElement("p",{className:"font-weight-bold"},"Reduce visible settings so that only parameters can be changed."),c.a.createElement("p",{className:"text-muted"},"Making a component a template simplifies complex components and bundle nested hierarchies into a single module. This creates reusable components that are defined only by their parameters."),c.a.createElement("p",{className:"text-muted"},"Making a component a template prevents direct modification of all component details, and hides nested components.")))))));const $r=Object(o.lazy)(()=>Promise.all([a.e(7),a.e(5)]).then(a.bind(null,924))),Zr={updateComponent:mt};var el=Object(m.c)(null,Zr)(({id:e,data:t,updateComponent:a})=>c.a.createElement(we,{title:"Content"},c.a.createElement(o.Suspense,{fallback:c.a.createElement(or,null)},c.a.createElement($r,{id:e,data:t.content,onChange:t=>a(e,{content:t})})))),tl=e=>{let t=e.name,a=Object(Te.a)(e,["name"]);const n=Object(lt.h)(t),r=Object(Q.a)(n,3),l=r[0],o=r[2];return(c.a.createElement(kt,Object.assign({value:l.value,onChange:o.setValue},a)))},al=({id:e,data:t})=>c.a.createElement(we,{title:"Content",className:"flex-grow-1",wrapContent:!1},c.a.createElement(he.a,{className:"h-100 d-flex flex-column"},c.a.createElement(kr,{id:e,data:t,keys:["content"],className:"flex-grow-1 d-flex flex-column"},c.a.createElement(tl,{name:"content",language:"html"})))),nl=({id:e,data:t})=>c.a.createElement(we,{title:"Content",wrapContent:!1,className:"flex-grow-1 d-flex flex-column"},c.a.createElement(kr,{id:e,data:t,keys:["context","contextSelector"],className:"flex-grow-1 d-flex flex-column"},c.a.createElement(he.a,{className:"flex-grow-1 d-flex flex-column"},c.a.createElement(tl,{name:"context",language:"html"})),c.a.createElement(he.a,{className:"flex-grow-0",style:{borderTop:"1px solid rgba(0, 0, 0, 0.125)"}},c.a.createElement(ot.a,null,c.a.createElement(ct.a,{for:"contextSelector"},"Context selector"),c.a.createElement(lt.b,{name:"contextSelector",id:"contextSelector",component:it.c,className:"text-monospace"}),c.a.createElement(st.a,{color:"muted"},"This CSS selector defines where nested components get to insert their content.")))));const rl=({name:e,index:t,actions:a,disabled:n=!1})=>{const r=Object(lt.h)(e),l=Object(Q.a)(r,3),s=l[0],i=l[2],m=Object(o.useState)(!1),d=Object(Q.a)(m,2),p=d[0],u=d[1];return c.a.createElement(Gr.a,{addonType:"append",disabled:n,isOpen:p,toggle:()=>u(!p)},c.a.createElement(Ga.a,{caret:!n,disabled:n,outline:!0,color:"secondary",className:"rounded-right"},c.a.createElement(_e.a,{icon:{string:"font",number:"tachometer",boolean:"adjust"}[s.value],fixedWidth:!0})),c.a.createElement(Ka.a,{right:!0},c.a.createElement(Xa.a,{header:!0},"Data type"),c.a.createElement(Xa.a,{className:ye()({"dropdown-item-active":"string"===s.value}),onClick:()=>i.setValue("string")},"Text ",c.a.createElement("span",{className:"text-muted"},"(categorical)")),c.a.createElement(Xa.a,{className:ye()({"dropdown-item-active":"number"===s.value}),onClick:()=>i.setValue("number")},"Numerical ",c.a.createElement("span",{className:"text-muted"},"(continuous)")),c.a.createElement(Xa.a,{className:ye()({"dropdown-item-active":"boolean"===s.value}),onClick:()=>i.setValue("boolean")},"Boolean ",c.a.createElement("span",{className:"text-muted"},"(binary)")),a?c.a.createElement("div",null,c.a.createElement(Xa.a,{divider:!0}),c.a.createElement(Xa.a,{header:!0},"Actions"),Object.entries(a).map(([e,a],n)=>c.a.createElement(Xa.a,{onClick:()=>a(t),key:n},e))):c.a.createElement("div",null)))},ll=({index:e,actions:t})=>c.a.createElement(Bn.a,null,c.a.createElement(lt.a,{name:"templateParameters.columns[".concat(e,"].name"),placeholder:"parameter".concat(e),className:"form-control text-monospace font-weight-bolder",style:{height:"42px"}}),c.a.createElement(rl,{name:"templateParameters.columns[".concat(e,"].type"),index:e,actions:t}));var ol=({name:e,columns:t})=>{const a=pr(),n=a.addColumn,r=a.fillColumn,l=a.clearColumn,o=a.deleteColumn;return(c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null),Array(t).fill(null).map((t,a)=>c.a.createElement("th",{key:"".concat(e,"-header-").concat(a)},c.a.createElement(ll,{index:a,actions:{Fill:r,Clear:l,Delete:o}}))),c.a.createElement(hr,{type:"th",icon:"plus",style:{height:"42px"},onClick:()=>n("",{name:"",type:"string"}),disabled:t>=12}))))};const cl=r.a.mark((function e(...t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.map(e=>Math.max(e.length,1)).reverse().reduce((e,t,a)=>e.concat([(e[a-1]||1)*t]),[]).reverse(),n=0;case 2:if(!(n<a[0])){e.next=8;break}return e.next=5,t.map((e,t)=>e[Math.floor(n/(a[t+1]||1))%e.length]);case 5:n++,e.next=2;break;case 8:case"end":return e.stop()}}),e)})),sl=({name:e,arrayHelpers:t})=>c.a.createElement(Er,{name:e,arrayHelpers:t,wrapper:o.Fragment},c.a.createElement("td",null,c.a.createElement(lt.b,{name:"".concat(e,".name"),component:it.c,placeholder:"Parameter name",className:"text-monospace"})),c.a.createElement("td",null,c.a.createElement(lt.b,{name:"".concat(e,".levels"),component:"textarea",placeholder:"Levels (one line each)",className:"form-control text-monospace",style:{height:"".concat(3.5*1.6,"em"),minHeight:"80px",maxHeight:"150px"}}))),il=()=>c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null),c.a.createElement("th",{className:"px-2 pt-3"},"Factor"),c.a.createElement("th",{className:"px-2 pt-3"},"Levels"),c.a.createElement("th",null)));class ml extends o.Component{constructor(e){super(e),this.state={isOpen:!1},this.promiseHandlers={}}toggle(){this.setState({isOpen:!this.state.isOpen})}show(){var e=this;return Object(l.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.toggle(),t.abrupt("return",new Promise((t,a)=>{e.promiseHandlers={resolve:a=>(e.setState({isOpen:!1}),t(a)),reject:a}}));case 2:case"end":return t.stop()}}),t)})))()}render(){return c.a.createElement(Ce.a,{isOpen:this.state.isOpen,modalProps:{size:"lg"}},c.a.createElement(lt.e,{initialValues:{factors:[{name:"Factor A",levels:"Level A1\nLevel A2"},{name:"Factor B",levels:"Level B1\nLevel B2"}]},onSubmit:e=>{console.log("in Onsubmit");const t=(e=>{const t=e.map(e=>e.name),a=e.map(e=>e.levels.split("\n").filter(e=>""!==e));return{columns:t.map(e=>({name:e,type:"string"})),rows:Array.from(cl(...a))}})(e.factors);this.promiseHandlers.resolve&&this.promiseHandlers.resolve(t)}},c.a.createElement(lt.d,null,c.a.createElement("div",{className:"modal-content"},c.a.createElement(Tt.a,{toggle:this.toggle},"Generate factorial design"),c.a.createElement(Pe.a,null,c.a.createElement("p",null,c.a.createElement("strong",null,"Please specify the factors in your design, as well as their levels.")," ",c.a.createElement("span",{className:"text-muted"},"The resulting design is fully crossed, meaning that in the loop, every level of a factor is combined with every level of every other factor.")),c.a.createElement("hr",{style:{marginBottom:"0"}})),c.a.createElement(gr,{name:"factors",columns:2,row:sl,header:il,defaultItem:{name:"",levels:""},className:"grid border-top-0 mb-0"}),c.a.createElement(Ae.a,null,c.a.createElement(te.a,{outline:!0,color:"secondary",onClick:this.toggle},"Close"),c.a.createElement(te.a,{outline:!0,color:"primary",type:"submit"},"Generate"))))))}}var dl=ml,pl=a(326);var ul=({addItem:e,columns:t})=>{const a=Object(o.useState)(!1),n=Object(Q.a)(a,2),r=n[0],l=n[1],s=Object(o.createRef)(),i=pr(),m=i.dispatch,d=i.overwriteAll;return c.a.createElement("tfoot",null,c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",{colSpan:t},c.a.createElement(dl,{ref:s}),c.a.createElement(Ya.a,{size:"sm",className:"w-100",isOpen:r,toggle:()=>l(!r)},c.a.createElement(te.a,{block:!0,size:"sm",outline:!0,color:"muted",className:"hover-target",onClick:()=>e(Array(t).fill("")),onMouseUp:e=>e.target.blur(),style:{paddingLeft:"32px"}},c.a.createElement(_e.a,{icon:"plus"})),c.a.createElement(Ga.a,{caret:!0,split:!0,size:"sm",outline:!0,color:"muted",className:"hover-target",style:{width:"24px"}}),c.a.createElement(Ka.a,{right:!0},c.a.createElement(Xa.a,{header:!0},"Generate"),c.a.createElement(Xa.a,{onClick:()=>s.current.show().then(e=>{d(e.rows,e.columns)})},"Factorial design"),c.a.createElement(Xa.a,{divider:!0}),c.a.createElement(Xa.a,{header:!0},"Repeat"),c.a.createElement(Xa.a,{onClick:()=>{const e=window.prompt("How many times?");e&&m((t,a)=>[t.flatMap(t=>Object(j.range)(e).map(()=>t)),a])}},"Each row"),c.a.createElement(Xa.a,{onClick:()=>{const e=window.prompt("How many times?");e&&m((t,a)=>[Object(j.range)(e).flatMap(()=>t),a])}},"Entire grid"),c.a.createElement(Xa.a,{divider:!0}),c.a.createElement(Xa.a,{header:!0},"CSV / TSV"),c.a.createElement(Qe.a,{accept:"text/csv,text/tab-separated-values,.csv,.tsv",multiple:!1,onUpload:([[e]])=>{l(!1);const t=Object(pl.parse)(e.trim(),{header:!0});0===t.errors.length||t.data&&1===t.errors.length&&"UndetectableDelimiter"===t.errors[0].code?d(t.data.map(e=>Object.values(e)),Object.keys(t.data[0]).map(e=>({name:e,type:"string"}))):(console.log("CSV import found errors: ",t.errors),alert("Sorry, I couldn't parse that CSV file. There seems to be an error. Could you check it, please?"))}},c.a.createElement("div",{className:"dropdown-item"},"Import")),c.a.createElement(Xa.a,{onClick:()=>m((e,t)=>(((e,t)=>{const a=Object(pl.unparse)({fields:t.map(e=>e.name),data:e});Object(le.saveAs)(new Blob([a],{type:"text/csv;charset=utf-8"}),"loop.csv")})(e,t),[e,t]))},"Export")))),c.a.createElement("td",null)))};a(713);const hl=({index:e,name:t,data:a,arrayHelpers:n})=>c.a.createElement(Er,{index:e,arrayHelpers:n,wrapper:o.Fragment},a.map((e,a)=>c.a.createElement("td",{key:"".concat(t,"[").concat(a,"]")},c.a.createElement(lt.a,{name:"".concat(t,"[").concat(a,"]"),className:"form-control text-monospace"}))));var bl=()=>{const e=Object(lt.i)().values.templateParameters.columns.length;return c.a.createElement(gr,{name:"templateParameters.rows",row:hl,columns:e,header:ol,footer:ul,defaultItem:Array(e).fill(""),className:ye()({table:!0,grid:!0,"grid-slim":e>5,"border-top-0 border-bottom":!0})})};var El=()=>{const e=Object(lt.i)().values;return(c.a.createElement(ot.a,{row:!0},c.a.createElement(ct.a,{xs:2,for:"sampleN"},"Sample",c.a.createElement(In,{title:"Sampling",className:"float-right",placement:"left"},c.a.createElement("p",{className:"font-weight-bold"},"Control how many, and which of the above parameter sets are used."),c.a.createElement("p",{className:"text-muted"},"The ",c.a.createElement("strong",null,"sample size")," defines the number of loop iterations. The ",c.a.createElement("strong",null,"mode")," determines how the iterations are drawn from the entries above."),c.a.createElement("dl",{className:"text-muted"},c.a.createElement("dt",null,"Sequential"),c.a.createElement("dd",null,"Proceed in order, starting from the top. If more samples are requested than entries are available, start over."),c.a.createElement("dt",null,"Random order"),c.a.createElement("dd",null,"Present entries in shuffled order",c.a.createElement("br",null)," (only available without sampling)."),c.a.createElement("dt",null,"Sample without replacement"),c.a.createElement("dd",null,"Draw entries at random, starting over when all are exhausted. Shuffles the result for a completely random order."),c.a.createElement("dt",null,"Sample w/o replacement (in blocks)"),c.a.createElement("dd",null,"As above, but without shuffling.",c.a.createElement("br",null)," If the number of samples exceeds the number of entries, this results in blocks of all entries in random order."),c.a.createElement("dt",null,"Sample with replacement"),c.a.createElement("dd",null,"Draw entries without regard to which have been selected before.")))),c.a.createElement(Z.a,{xs:10},c.a.createElement(Bn.a,null,c.a.createElement(lt.b,{name:"sample.n",component:it.c,pattern:cr.a,placeholder:"draw-replace"===(e.sample||{}).mode?"As many as rows above":"Use all",className:"text-monospace"}),c.a.createElement(lt.b,{name:"sample.mode",as:"select",className:"form-control custom-select text-monospace"},c.a.createElement("option",{value:"sequential"},"In sequence"),c.a.createElement("option",{value:"draw-shuffle"},(({templateParameters:e={rows:[]},sample:t={n:void 0}},a)=>{const n=parseInt(t.n),r=e.rows.length;return n<r?a[0]:isNaN(n)||n===r?a[1]:a[2]})(e,["Sampled without replacement","In random order","Sampled without replacement (then shuffled)"])),c.a.createElement("option",{value:"draw"},"Sampled without replacement (in blocks)"),c.a.createElement("option",{value:"draw-replace"},"Sampled with replacement"))))))};var fl=Object(Y.DragSource)("item",{beginDrag:({column:e})=>({column:e})},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(({name:e,connectDragSource:t,isDragging:a})=>t(c.a.createElement("div",{className:"d-inline-block m-1 mr-2 p-2 px-4 border rounded-pill",style:{opacity:a?.4:1,transform:"translate(0, 0)",cursor:a?"grabbing":"grab"}},c.a.createElement("span",{style:{position:"relative",top:"1px"}},e))));var gl=Object(Y.DropTarget)("item",{drop:(e,t)=>{const a=t.getItem().column;e.move(a,e.groupId)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(({columns:e=[],title:t,connectDropTarget:a,isOver:n,children:r})=>a(c.a.createElement("tr",{className:ye()({"bg-light":n})},c.a.createElement("td",{style:{padding:"0.75rem 1.25rem",width:"8rem"}},c.a.createElement("small",{className:"text-muted"},t)),c.a.createElement("td",{className:"text-center",style:{padding:"0.75rem 1.25rem"}},r||e.map((e,t)=>c.a.createElement(fl,{key:t,column:e.id,name:e.name}))),c.a.createElement("td",{style:{padding:"0.75rem 1.25rem",width:"8rem"}})))),yl=()=>{const e=Object(lt.i)(),t=e.values,a=e.setFieldValue,n=t.shuffle,r=Object(j.groupBy)(t.templateParameters.columns.filter(e=>""!==e.name).map((e,t)=>Object(h.a)({},e,{id:t})),"shuffleGroup"),l=Object.entries(r),o=(e,t)=>a("templateParameters.columns[".concat(e,"]['shuffleGroup']"),t),s=Math.max(...Object.keys(r).map(Number).filter(e=>!isNaN(e)),0)+1;return c.a.createElement(ut.a,{className:"border-top-0"},c.a.createElement("tbody",null,c.a.createElement(gl,{title:n?"Default":"Not shuffled",groupId:void 0,key:-1,columns:r[void 0],move:o,children:l.length>0?void 0:c.a.createElement("small",{className:"text-muted font-italic"},"(no columns yet)")}),l.filter(([e])=>"undefined"!==e).map(([e,t])=>c.a.createElement(gl,{groupId:e,key:e,columns:t,move:o})),c.a.createElement(gl,{groupId:s,key:s,move:o},c.a.createElement("small",{className:"text-muted"},c.a.createElement("span",{className:"text-right d-inline d-lg-inline-block",style:{width:"45%"}},"Drag columns into rows"),c.a.createElement(_e.a,{icon:"ellipsis-v",className:"text-muted m-2"}),c.a.createElement("span",{className:"text-left d-inline d-lg-inline-block",style:{width:"45%"}},"to create independently shuffled groups")))))},vl=({id:e,data:t})=>c.a.createElement(kr,{id:e,data:t,keys:["sample","shuffle","templateParameters"]},c.a.createElement(we,{title:"Loop",wrapContent:!1},c.a.createElement(bl,null),c.a.createElement(he.a,null,c.a.createElement(El,null))),c.a.createElement(we,{title:"Further options",open:Object(j.uniqBy)(t.templateParameters.columns,e=>e.shuffleGroup).length>1,collapsable:!0,wrapContent:!1,className:"mt-4"},c.a.createElement(he.a,{className:"pb-0"},c.a.createElement("h2",{className:"h6"},"Parameter groups")),c.a.createElement(yl,null))),wl=({id:e,data:t})=>c.a.createElement(we,{title:"Content"},c.a.createElement(kr,{id:e,data:t,keys:["shuffle","localParameters"]},c.a.createElement(ot.a,{row:!0},c.a.createElement(Z.a,{xs:2},c.a.createElement(ct.a,{style:{paddingTop:"0"}},"Order")),c.a.createElement(Z.a,{xs:10},c.a.createElement(ot.a,{check:!0},c.a.createElement(lt.b,{name:"shuffle",id:"shuffle",component:it.b,type:"checkbox",label:"Shuffle nested components"})))))),xl=({name:e})=>c.a.createElement(c.a.Fragment,null,c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,null,c.a.createElement(lt.b,{name:"".concat(e,".title"),placeholder:"Title",component:it.c,className:"font-weight-bold"}))),c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,null,c.a.createElement(lt.b,{name:"".concat(e,".content"),as:"textarea",placeholder:"Text",className:"form-control mt-2"})))),Ol=a(328);const jl=({name:e,index:t})=>{const a=Object(o.useContext)(Gl).openItem;return(c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,null,c.a.createElement(Qn.a,{isOpen:a===t},c.a.createElement(Bn.a,{className:"mt-2"},c.a.createElement(Un.a,{addonType:"prepend"},c.a.createElement(xr.a,null,c.a.createElement(_e.a,{icon:"arrows-h",fixedWidth:!0}))),c.a.createElement(lt.b,{name:"".concat(e,".width"),defaultValue:"",placeholder:"width",className:"form-control text-monospace"}),c.a.createElement(Un.a,{addonType:"prepend"},c.a.createElement(xr.a,null,c.a.createElement(_e.a,{icon:"arrows-v",fixedWidth:!0}))),c.a.createElement(lt.b,{name:"".concat(e,".height"),defaultValue:"",placeholder:"height",className:"form-control text-monospace"}))))))},kl=({name:e},{id:t})=>c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,null,c.a.createElement(Ol.a,{name:"".concat(e,".src"),accept:"image/*",placeholder:"source",component:t})));kl.contextTypes={id:pn.a.oneOfType([pn.a.string,pn.a.number])};var Nl=({name:e,index:t})=>c.a.createElement(c.a.Fragment,null,c.a.createElement(kl,{name:e}),c.a.createElement(jl,{name:e,index:t})),Cl=()=>c.a.createElement("hr",{style:{position:"relative",top:"2px"}}),Tl=({name:e})=>c.a.createElement(c.a.Fragment,null,c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,null,c.a.createElement("div",{className:"border rounded py-2 pr-2",style:{height:"220px"}},c.a.createElement(tl,{name:"".concat(e,".content"),language:"html",height:"100%",options:{folding:!1,fontSize:16,glyphMargin:!1,lineHeight:24,lineNumbers:"off",minimap:{enabled:!1}}})))));const Sl=({name:e,index:t,children:a,validation:n,shuffle:r=!1,borderTop:l=!0})=>c.a.createElement(c.a.Fragment,null,a&&l&&c.a.createElement("hr",null),a,r&&c.a.createElement(c.a.Fragment,null,c.a.createElement("hr",null),"Display",c.a.createElement(ot.a,{className:"my-2"},c.a.createElement(st.a,{color:"muted",className:"mb-2"},"Randomize item order"),c.a.createElement(lt.b,{name:"".concat(e,".shuffle"),id:"item-shuffle-".concat(t),component:it.b,type:"checkbox",label:"Shuffle items"}))),c.a.createElement("hr",null),c.a.createElement(ot.a,{className:"my-2"},c.a.createElement(ct.a,{for:"page-item-".concat(t,"-help"),className:"mb-0"},"Help & further instructions"),c.a.createElement(st.a,{color:"muted"},"Tell your participants more about the question."),c.a.createElement(lt.b,{name:"".concat(e,".help"),id:"page-item-".concat(t,"-help"),component:it.c,type:"textarea",bsSize:"sm",rows:"3",className:"mt-2 text-muted"})),c.a.createElement("hr",null),c.a.createElement(ot.a,{className:"my-2"},c.a.createElement(ct.a,{for:"page-item-".concat(t,"-name"),className:"mb-0"},"Name"),c.a.createElement(st.a,{color:"muted",className:"mb-2"},"The column in which to save the data"),c.a.createElement(lt.b,{name:"".concat(e,".name"),id:"page-item-".concat(t,"-name"),component:it.c,className:"text-monospace",placeholder:"(auto-generate from question)"})),c.a.createElement("hr",null),"Validation",c.a.createElement(ot.a,{className:"my-2"},c.a.createElement(st.a,{color:"muted",className:"mb-2"},"Checks to run before accepting data"),c.a.createElement(lt.b,{name:"".concat(e,".required"),id:"item-required-".concat(t),component:it.b,type:"checkbox",label:"Require answer"})),n),Pl=e=>{let t=e.name,a=e.index,n=Object(Te.a)(e,["name","index"]);const r=Object(o.useContext)(Gl).openItem;return(c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,null,c.a.createElement(Qn.a,{isOpen:r===a},c.a.createElement(Sl,Object.assign({name:t,index:a},n))))))},Al=({name:e,type:t})=>{switch(t){case"number":return c.a.createElement(c.a.Fragment,null,c.a.createElement(ot.a,null,c.a.createElement(Bn.a,null,c.a.createElement(Un.a,{addonType:"prepend"},c.a.createElement(xr.a,null,c.a.createElement(_e.a,{icon:"arrow-to-bottom",fallback:"arrow-down"}))),c.a.createElement(lt.b,{name:"".concat(e,".attributes.min"),placeholder:"No lower limit",component:it.c,className:"text-monospace"}),c.a.createElement(Un.a,{addonType:"prepend"},c.a.createElement(xr.a,null,c.a.createElement(_e.a,{icon:"arrow-to-top",fallback:"arrow-up"}))),c.a.createElement(lt.b,{name:"".concat(e,".attributes.max"),placeholder:"No upper limit",component:it.c,className:"text-monospace"}),c.a.createElement(Un.a,{addonType:"prepend"},c.a.createElement(xr.a,null,c.a.createElement(_e.a,{icon:"shoe-prints"}))),c.a.createElement(lt.b,{name:"".concat(e,".attributes.step"),placeholder:"Default step (1)",component:it.c,className:"text-monospace"}))));case"date":return c.a.createElement(c.a.Fragment,null,c.a.createElement(ot.a,null,c.a.createElement(Bn.a,null,c.a.createElement(Un.a,{addonType:"prepend"},c.a.createElement(xr.a,null,c.a.createElement(_e.a,{icon:"arrow-to-bottom",fallback:"arrow-down"}))),c.a.createElement(lt.b,{name:"".concat(e,".attributes.min"),placeholder:"No earliest date (yyyy-mm-dd)",component:it.c,className:"text-monospace"}),c.a.createElement(Un.a,{addonType:"prepend"},c.a.createElement(xr.a,null,c.a.createElement(_e.a,{icon:"arrow-to-top",fallback:"arrow-up"}))),c.a.createElement(lt.b,{name:"".concat(e,".attributes.max"),placeholder:"No latest date (yyyy-mm-dd)",component:it.c,className:"text-monospace"}))));default:return null}};var _l=({name:e,index:t,type:a})=>{const n=Object(lt.i)().values,r=Object(lt.g)(n,"".concat(e,".attributes"));return c.a.createElement(c.a.Fragment,null,c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,null,c.a.createElement(lt.b,{name:"".concat(e,".label"),placeholder:"Question",component:it.c}))),c.a.createElement(Pl,{name:e,index:t},"input"===a&&c.a.createElement(c.a.Fragment,null,c.a.createElement(ot.a,{className:"my-2"},c.a.createElement(ct.a,{for:"page-item-".concat(t,"-attrs-type"),className:"mb-1"},"Data type"),c.a.createElement(st.a,{color:"muted",className:"mb-2"},"Check input format, and restrict input"),c.a.createElement(lt.b,{name:"".concat(e,".attributes.type"),index:"page-item-".concat(t,"-attrs-type"),as:"select",className:"form-control custom-select text-monospace"},c.a.createElement("option",{value:"text"},"Text"),c.a.createElement("option",{value:"number"},"Number"),c.a.createElement("option",{value:"email"},"Email"),c.a.createElement("option",{value:"date"},"Date"))),c.a.createElement(Al,{name:e,type:r&&r.type}))))};const Dl=({name:e,icon:t,iconFallbackWeight:a})=>{var n;const r=Object(lt.i)().values;n=Object(lt.g)(r,e)};var Il=({name:e,index:t})=>c.a.createElement(c.a.Fragment,null,c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,null,c.a.createElement(lt.b,{name:"".concat(e,".label"),placeholder:"Question",component:it.c}))),c.a.createElement(Dl,{name:"".concat(e,".options"),icon:"circle"}),c.a.createElement(Pl,{name:e,index:t,shuffle:!0})),Fl=({name:e,index:t})=>c.a.createElement(c.a.Fragment,null,c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,null,c.a.createElement(lt.b,{name:"".concat(e,".label"),placeholder:"Question",component:it.c}))),c.a.createElement(Dl,{name:"".concat(e,".options"),icon:"square"}),c.a.createElement(Pl,{name:e,index:t,shuffle:!0})),Hl=({name:e,index:t})=>c.a.createElement(c.a.Fragment,null,c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,null,c.a.createElement(lt.b,{name:"".concat(e,".label"),placeholder:"Question",component:it.c}))),c.a.createElement(Pl,{name:e,index:t,borderTop:!1},c.a.createElement("div",{className:"mt-2"},c.a.createElement(Al,{name:e,type:"number"})))),Ll=({name:e,index:t})=>{const a=Object(lt.i)().values,n=Object(lt.g)(a,"".concat(e,".width"));return c.a.createElement(c.a.Fragment,null,c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,null,c.a.createElement(lt.b,{name:"".concat(e,".label"),placeholder:"Question",component:it.c}))),c.a.createElement(Dl,{name:"".concat(e,".items"),icon:"ellipsis-h-alt",iconFallbackWeight:"s"}),c.a.createElement(Pl,{name:e,index:t,shuffle:!0},c.a.createElement($.a,null,c.a.createElement(Z.a,null,c.a.createElement(ot.a,{className:"my-2"},c.a.createElement(ct.a,{for:"page-item-".concat(t,"-width"),className:"mb-0"},"Scale width"),c.a.createElement(st.a,{color:"muted"},"How many points to offer"),c.a.createElement(ot.a,null,[5,7,9,11].map(a=>c.a.createElement("div",{key:"page-item-".concat(t,"-width-").concat(a),className:"custom-radio custom-control"},c.a.createElement(lt.b,{name:"".concat(e,".width"),type:"radio",value:"".concat(a),id:"page-item-".concat(t,"-width-").concat(a),className:"custom-control-input"}),c.a.createElement("label",{htmlFor:"page-item-".concat(t,"-width-").concat(a),className:"custom-control-label"},a)))))),c.a.createElement(Z.a,null,c.a.createElement(ot.a,{className:"my-2"},c.a.createElement(ct.a,{for:"page-item-".concat(t,"-anchors"),className:"mb-0"},"Anchors"),c.a.createElement(st.a,{color:"muted"},"Scale anchors"),c.a.createElement("div",{className:"mt-2"},Object(j.range)(n).map(a=>c.a.createElement($.a,{form:!0,className:"my-1",key:"page-item-".concat(t,"-anchors-").concat(a)},c.a.createElement(Z.a,null,c.a.createElement(Bn.a,null,c.a.createElement(Un.a,{addonType:"prepend"},c.a.createElement(xr.a,null,c.a.createElement("small",{className:"text-monospace text-muted"},a+1))),c.a.createElement(lt.a,{name:"".concat(e,".anchors[").concat(a,"]"),component:it.c})))))))))))};var Ml=e=>{const t=(e=>{switch(e){case"text":return xl;case"image":return Nl;case"divider":return Cl;case"html":return Tl;case"input":case"textarea":return _l;case"radio":return Il;case"checkbox":return Fl;case"slider":return Hl;case"likert":return Ll;default:return null}})(e.type);return(c.a.createElement(t,e))};const Rl={text:"info",image:"image",divider:"horizontal-rule",html:"code",input:"comment-alt-minus",textarea:"comment-alt-lines",radio:"list-ul",checkbox:"tasks",slider:"sliders-h",likert:"grip-horizontal"},Wl=({name:e,index:t,arrayHelpers:a,isLastItem:n})=>{const r=Object(o.useContext)(Gl),l=r.openItem,s=r.setOpenItem,i=Object(lt.i)().values,m=Object(lt.g)(i,"".concat(e,".type"));return c.a.createElement("td",null,c.a.createElement("div",{className:"text-center text-black-50",style:{padding:"6px 12px",border:"1px solid transparent",position:"relative",top:"1px"}},c.a.createElement(_e.a,{icon:Rl[m]||"question"})),c.a.createElement(Qn.a,{isOpen:l===t&&"divider"!==m},c.a.createElement(te.a,{block:!0,outline:!0,color:"muted",className:"mt-2"},c.a.createElement(_e.a,{icon:"bars"})),c.a.createElement(te.a,{block:!0,outline:!0,color:"muted",className:"mt-2",onClick:()=>{const e=l;s(void 0),a.swap(t,t-1),s(e-1)},disabled:0===t},c.a.createElement(_e.a,{icon:"arrow-up"})),c.a.createElement(te.a,{block:!0,outline:!0,color:"muted",className:"mt-2",onClick:()=>{const e=l;s(void 0),a.swap(t,t+1),s(e+1)},disabled:n},c.a.createElement(_e.a,{icon:"arrow-down"}))))},Vl=({name:e,index:t,arrayHelpers:a})=>{const n=Object(o.useContext)(Gl),r=n.openItem,l=n.setOpenItem,s=Object(lt.i)().values,i=Object(lt.g)(s,"".concat(e,".type"));return c.a.createElement("td",null,"divider"!==i?c.a.createElement(te.a,{block:!0,outline:!0,color:"muted",onClick:()=>{l(r===t?void 0:t)}},c.a.createElement(_e.a,{icon:"cog"})):null,c.a.createElement(Qn.a,{isOpen:"divider"===i||r===t},c.a.createElement(te.a,{block:!0,outline:!0,color:"muted",className:"divider"!==i?"mt-2":"",onClick:()=>a.remove(t)},c.a.createElement(_e.a,{icon:"trash"}))))},Bl=({onClick:e,disabled:t,children:a})=>c.a.createElement(Xa.a,{onClick:e,disabled:t},a),Ul=({addItem:e})=>{const t=Object(o.useState)(!1),a=Object(Q.a)(t,2),n=a[0],r=a[1],l=t=>e(Object(h.a)({required:!0},t));return(c.a.createElement(Ya.a,{direction:"down",isOpen:n,toggle:()=>r(!n),className:"w-100"},c.a.createElement(Ga.a,{outline:!0,color:"muted",size:"sm",className:"hover-target"},c.a.createElement(_e.a,{icon:"plus",fixedWidth:!0}),c.a.createElement(_e.a,{icon:"caret-down",className:"float-right",weight:"s",style:{position:"relative",top:"3px"}})),c.a.createElement(Ka.a,{className:"p-0 w-100"},c.a.createElement($.a,{noGutters:!0},c.a.createElement(Z.a,{className:"border-right pt-2 pb-3"},c.a.createElement(Xa.a,{header:!0},"Content"),c.a.createElement(Bl,{onClick:()=>l({type:"text"})},"Text ",c.a.createElement("span",{className:"text-muted"},"/ Instructions")),c.a.createElement(Bl,{onClick:()=>l({type:"image"})},"Image"),c.a.createElement(Bl,{onClick:()=>l({type:"divider"})},"Divider"),c.a.createElement(Xa.a,{divider:!0}),c.a.createElement(Xa.a,{header:!0},"Advanced"),c.a.createElement(Bl,{onClick:()=>l({type:"html"})},"Raw ",c.a.createElement("code",{className:"text-body"},"HTML"))),c.a.createElement(Z.a,{className:"border-right pt-2 pb-3"},c.a.createElement(Xa.a,{header:!0},"Free-form input"),c.a.createElement(Bl,{onClick:()=>l({type:"input"})},"Single-line"),c.a.createElement(Bl,{onClick:()=>l({type:"textarea"})},"Multi-line"),c.a.createElement(Xa.a,{divider:!0}),c.a.createElement(Xa.a,{header:!0},"Structured input"),c.a.createElement(Bl,{onClick:()=>l({type:"radio"})},"Multiple choice"),c.a.createElement(Bl,{onClick:()=>l({type:"checkbox"})},"Check all that apply")),c.a.createElement(Z.a,{className:"pt-2 pb-3"},c.a.createElement(Xa.a,{header:!0},"Ranges"),c.a.createElement(Bl,{onClick:()=>l({type:"slider"})},"Slider"),c.a.createElement(Bl,{disabled:!0},"Visual analogue scale"),c.a.createElement(Bl,{onClick:()=>l({type:"likert",items:[],width:5,anchors:[]})},"Likert scale"))))))};var zl=({columns:e,addItem:t})=>c.a.createElement("tfoot",null,c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",{colSpan:e.length},c.a.createElement(Ul,{addItem:t})),c.a.createElement("td",null)));const ql=({index:e,name:t,data:a,arrayHelpers:n,isLastItem:r})=>c.a.createElement(Er,{name:t,index:e,isLastItem:r,arrayHelpers:n,leftColumn:Wl,rightColumn:Vl},c.a.createElement(Ml,{name:t,type:a.type,data:a,index:e})),Yl=()=>{const e=Object(o.useState)(!1),t=Object(Q.a)(e,2),a=t[0],n=t[1],r=Object(lt.i)().values;return c.a.createElement(Cr.a,{className:"px-0"},c.a.createElement("table",{className:"table grid no-header border-bottom-0 my-0"},c.a.createElement("colgroup",null,c.a.createElement("col",{style:{width:"5%"}}),c.a.createElement("col",{style:{width:"90%"}}),c.a.createElement("col",{style:{width:"5%"}})),c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("div",{style:{width:"40px"}})),c.a.createElement("td",null,c.a.createElement($.a,{form:!0},c.a.createElement(Z.a,null,c.a.createElement(Bn.a,null,c.a.createElement(lt.b,{name:"submitButtonText",component:it.c,placeholder:"Submit button text",default:"Continue \u2192",disabled:"hidden"===r.submitButtonPosition}),c.a.createElement(lt.b,{name:"submitButtonPosition",id:"submitButtonPosition",className:"form-control custom-select",as:"select"},c.a.createElement("option",{value:"right"},"Show submit button"),c.a.createElement("option",{value:"hidden"},"Hide submit button"))))),c.a.createElement(Qn.a,{isOpen:a},c.a.createElement("hr",null),c.a.createElement("h3",{className:"h6"},"Presentation"),c.a.createElement(ot.a,{row:!0,className:"mt-2"},c.a.createElement(ct.a,{xs:3,for:"width"},"Page width"),c.a.createElement(Z.a,{xs:9},c.a.createElement(Bn.a,null,c.a.createElement(lt.b,{name:"width",id:"width",as:"select",defaultValue:"m",className:"form-control custom-select"},c.a.createElement("option",{value:"s"},"Small"),c.a.createElement("option",{value:"m"},"Medium"),c.a.createElement("option",{value:"l"},"Large"))))))),c.a.createElement("td",null,c.a.createElement(te.a,{block:!0,outline:!0,color:"muted",onClick:()=>n(!a)},c.a.createElement(_e.a,{icon:"cog"})))))))},Gl=Object(o.createContext)({}),Kl=e=>{const t=Object(o.useState)(void 0),a=Object(Q.a)(t,2),n=a[0],r=a[1];return(c.a.createElement(Gl.Provider,Object.assign({value:{openItem:n,setOpenItem:r}},e)))};var Xl=({id:e,data:t})=>c.a.createElement(we,{title:"Content",wrapContent:!1},c.a.createElement(kr,{id:e,data:t,keys:["items","submitButtonText","submitButtonPosition","width"],validateOnChange:!1},c.a.createElement(Kl,null,c.a.createElement(gr,{name:"items",defaultItem:{type:""},row:ql,footer:zl,className:"no-header"})),c.a.createElement(Yl,null)));class Ql extends o.Component{getChildContext(){return{id:this.props.id,type:this.props.type}}render(){const e=this.props,t=e.id,a=e.type,n=e.tab,r=e.data;if("welcome"===t)return c.a.createElement(rr,null);if(void 0===a)return c.a.createElement(lr,null);const l=((e,t)=>{switch(t){case"Content":switch(e){case"lab.canvas.Screen":return el;case"lab.html.Screen":case"lab.html.Form":return al;case"lab.canvas.Frame":case"lab.html.Frame":return nl;case"lab.html.Questionnaire":case"lab.html.Page":return Xl;case"lab.flow.Loop":return vl;case"lab.flow.Sequence":return wl;default:throw new Error("Unknown component type, can't show content")}case"Behavior":return Nr;case"Scripts":return Ar;case"Files":return Lr;case"Plugins":return Yr;case"Parameters":return Qr;case"More":return Jr;default:return({id:e,data:t})=>c.a.createElement("div",null,"id: ",e,", type: ",t.type,", tab: ",t._tab)}})(a,n);return(c.a.createElement(l,{id:t,data:r}))}}Ql.childContextTypes={id:pn.a.oneOfType([pn.a.string,pn.a.number]),type:pn.a.string};var Jl=Object(m.c)(e=>{const t=e.componentDetail.viewProps.id,a=e.components[t]?e.components[t].type:void 0,n=e.components[t]?x(e.components[t]._tab,a):void 0,r=e.components[t]?e.components[t]:{};return{key:"".concat(t,"-").concat(n),id:t,type:a,tab:n,data:r}})(Ql);class $l extends o.Component{constructor(e){super(e),this.defaultState={error:null,errorInfo:{}},this.state=Object(h.a)({},this.defaultState)}componentDidCatch(e,t){X.b(a=>{a.setExtras(t),a.setTag("scope","crash"),a.setLevel("fatal");const n=X.a(e);this.setState({error:e,errorInfo:t,eventId:n})})}resetError(){this.setState(Object(h.a)({},this.defaultState))}render(){return this.state.error?c.a.createElement(ke,{error:this.state.error,errorInfo:this.state.errorInfo,eventId:this.state.eventId,reset:()=>this.resetError()}):c.a.createElement(c.a.Fragment,null,c.a.createElement(Ia,null),c.a.createElement(Aa,null),c.a.createElement(Ne,{sidebar:c.a.createElement(Sn,null),footer:c.a.createElement(Vn,null)},c.a.createElement(Xn,null),c.a.createElement(Jl,null)))}}var Zl=$l,eo=(a(714),a(783)),to=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serviceWorker"in navigator)){e.next=20;break}return a=window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/")+1)+"api/",e.next=4,navigator.serviceWorker.getRegistrations();case 4:return n=e.sent,e.next=7,Promise.all(n.map(e=>e.unregister()));case 7:return e.prev=7,e.next=10,navigator.serviceWorker.register("/api/worker.js",{scope:a});case 10:return console.log("Preview worker registered successfully at ".concat(a)),e.next=13,Ma();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(7),e.t0;case 18:e.next=21;break;case 20:throw new Error("Service workers not available");case 21:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}();const ao=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function no(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("","/service-worker.js");ao?(!function(e,t){fetch(e).then(a=>{const n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):ro(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ro(t,e)})}}function ro(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FA:"free"}).REACT_APP_SENTRY_DSN&&eo.a({dsn:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FA:"free"}).REACT_APP_SENTRY_DSN,release:"@lab.js/builder@".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FA:"free"}).REACT_APP_SENTRY_RELEASE)}),Object(l.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:return t=e.sent,At(t),e.next=6,B(t);case 6:return e.prev=6,e.next=9,to(t);case 9:a=!0,e.next=17;break;case 12:e.prev=12,e.t0=e.catch(6),console.log("Error during preview worker registration:",e.t0),a=!1,"Service workers not available"!==e.t0.message&&X.b(t=>{t.setTag("scope","worker"),X.a(e.t0)});case 17:return e.prev=17,n=Object(Y.DragDropContext)(K.a)(Zl),i.a.render(c.a.createElement(Ha,{value:{previewActive:a}},c.a.createElement(m.a,{store:t},c.a.createElement(n,null))),document.getElementById("root")),no(),e.finish(17);case 22:case"end":return e.stop()}}),e,null,[[6,12,17,22]])})))()}},[[406,1,2]]]);
//# sourceMappingURL=main.a407ac90.chunk.js.map